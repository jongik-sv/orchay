@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Primary Colors */
  --notion-bg-primary: #ffffff;
  --notion-bg-secondary: #f7f6f3;
  --notion-bg-tertiary: #efefef;

  /* Text Colors */
  --notion-text-primary: #37352f;
  --notion-text-secondary: #626060;
  --notion-text-tertiary: #9a9a97;

  /* Border Colors */
  --notion-border-light: #e9e9e7;
  --notion-border-medium: #d3d3ce;

  /* Button Colors */
  --notion-button-bg: #e5e5e5;
  --notion-button-hover: #d4d4d4;
  --notion-button-active: #c4c4c4;

  /* Accent Colors (Notion palette) */
  --notion-red: #f81b13;
  --notion-orange: #fa8500;
  --notion-yellow: #ebdb34;
  --notion-green: #0b8861;
  --notion-blue: #0b6e99;
  --notion-purple: #6940ef;
  --notion-pink: #d946ef;
  --notion-gray: #626060;
}

/* Manual Theme Support - .dark class */
html.dark {
  --notion-bg-primary: #191919;
  --notion-bg-secondary: #2a2a2a;
  --notion-bg-tertiary: #3a3a37;
  --notion-text-primary: #e6e6e4;
  --notion-text-secondary: #b3b3b1;
  --notion-text-tertiary: #a1a1aa;
  --notion-border-light: #3d3d3a;
  --notion-border-medium: #4d4d4a;

  /* Button Colors - Dark Mode */
  --notion-button-bg: #4d4d4a;
  --notion-button-hover: #5d5d5a;
  --notion-button-active: #6d6d6a;
}

/* System preference based dark mode (fallback) */
@media (prefers-color-scheme: dark) {
  :root:not(.light) {
    --notion-bg-primary: #191919;
    --notion-bg-secondary: #2a2a2a;
    --notion-bg-tertiary: #3a3a37;
    --notion-text-primary: #e6e6e4;
    --notion-text-secondary: #b3b3b1;
    --notion-text-tertiary: #a1a1aa;
    --notion-border-light: #3d3d3a;
    --notion-border-medium: #4d4d4a;

    /* Button Colors - Dark Mode */
    --notion-button-bg: #4d4d4a;
    --notion-button-hover: #5d5d5a;
    --notion-button-active: #6d6d6a;
  }
}

/* Smooth transition for theme switching */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  transition: background-color 150ms ease,
              color 150ms ease,
              border-color 150ms ease;
}

/* Exclude transition for performance */
img, video, canvas, svg {
  transition: none;
}

html,
body {
  background-color: var(--notion-bg-primary);
  color: var(--notion-text-primary);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial,
    sans-serif;
  line-height: 1.5;
}

/* Layout */
.sidebar {
  width: 240px;
  background-color: var(--notion-bg-secondary);
  border-right: 1px solid var(--notion-border-light);
}

.editor-area {
  flex: 1;
  overflow: auto;
  padding: 0 96px;
}

/* Typography */
h1,
h2,
h3,
h4,
h5,
h6 {
  font-weight: 600;
  margin-top: 1rem;
  margin-bottom: 0.5rem;
}

h1 {
  font-size: 1.875rem;
}

h2 {
  font-size: 1.5rem;
}

h3 {
  font-size: 1.25rem;
}

/* ============================================
   BlockNote Editor Notion Style Overrides
   ============================================ */

/* 1. BlockNote basic override */
.bn-block {
  margin: 1px 0;
}

/* Editor container */
.bn-editor {
  padding: 96px;
  background-color: var(--notion-bg-primary);
  color: var(--notion-text-primary);
}

/* Responsive: reduce padding on mobile */
@media (max-width: 768px) {
  .bn-editor {
    padding: 24px;
  }
}

/* 2. Block handle style */
.bn-block-content {
  position: relative;
}

.bn-side-menu {
  opacity: 0;
  transition: opacity 0.15s ease;
  background-color: var(--notion-bg-secondary);
}

.bn-block:hover .bn-side-menu {
  opacity: 1;
}

/* 3. Slash menu style */
.bn-popover {
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
  border: 1px solid var(--notion-border-light);
  border-radius: 4px;
  background-color: var(--notion-bg-primary);
}

/* Menu item */
.bn-menu-item {
  padding: 6px 12px;
  transition: background-color 0.1s ease;
  color: var(--notion-text-primary);
}

.bn-menu-item:hover {
  background-color: var(--notion-bg-tertiary);
}

/* 4. Heading block style */
.bn-heading {
  font-weight: 600;
  line-height: 1.3;
}

.bn-heading[level="1"] {
  font-size: 1.875rem;
  margin-top: 2rem;
  margin-bottom: 0.5rem;
}

.bn-heading[level="2"] {
  font-size: 1.5rem;
  margin-top: 1.5rem;
  margin-bottom: 0.5rem;
}

.bn-heading[level="3"] {
  font-size: 1.25rem;
  margin-top: 1rem;
  margin-bottom: 0.5rem;
}

/* 5. Placeholder style */
.bn-editor [data-placeholder] {
  color: var(--notion-text-tertiary);
  pointer-events: none;
}

.bn-editor [data-placeholder]:empty:before {
  content: attr(data-placeholder);
}

/* 6. Additional Notion style tuning */
/* Body text style */
.bn-block-content {
  font-size: 16px;
  line-height: 1.5;
  color: var(--notion-text-primary);
}

/* Inline content style */
.bn-inline-content {
  color: var(--notion-text-primary);
}

/* Code block style */
.bn-code-block {
  background-color: var(--notion-bg-secondary);
  border-radius: 4px;
  padding: 12px;
  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
  font-size: 14px;
}

/* Quote block style */
.bn-quote-block {
  border-left: 3px solid var(--notion-text-primary);
  padding-left: 14px;
  color: var(--notion-text-secondary);
}

/* List style */
.bn-list-item {
  padding-left: 4px;
}

/* Drag handle style */
.bn-drag-handle {
  opacity: 0;
  transition: opacity 0.15s ease;
}

.bn-block:hover .bn-drag-handle {
  opacity: 0.4;
}

.bn-drag-handle:hover {
  opacity: 1 !important;
}

/* ============================================
   Dark Mode BlockNote Overrides
   ============================================ */

html.dark .bn-popover,
:root:not(.light) .bn-popover {
  background-color: var(--notion-bg-secondary);
  border-color: var(--notion-border-light);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}

html.dark .bn-menu-item:hover,
:root:not(.light) .bn-menu-item:hover {
  background-color: var(--notion-bg-tertiary);
}

html.dark .bn-code-block,
:root:not(.light) .bn-code-block {
  background-color: var(--notion-bg-secondary);
}

html.dark .bn-editor,
:root:not(.light) .bn-editor {
  background-color: var(--notion-bg-primary);
  color: var(--notion-text-primary);
}

html.dark .bn-inline-content,
:root:not(.light) .bn-inline-content {
  color: var(--notion-text-primary);
}

html.dark .bn-side-menu,
:root:not(.light) .bn-side-menu {
  background-color: var(--notion-bg-secondary);
}

html.dark .bn-slash-menu,
:root:not(.light) .bn-slash-menu {
  background-color: var(--notion-bg-secondary);
  border-color: var(--notion-border-light);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}

html.dark .bn-toolbar,
:root:not(.light) .bn-toolbar {
  background-color: var(--notion-bg-secondary);
  border-color: var(--notion-border-light);
}

html.dark .bn-editor input,
html.dark .bn-editor textarea,
:root:not(.light) .bn-editor input,
:root:not(.light) .bn-editor textarea {
  background-color: var(--notion-bg-secondary);
  color: var(--notion-text-primary);
  border-color: var(--notion-border-light);
}

/* ============================================
   Skeleton Loading Animation
   ============================================ */

@keyframes skeleton-pulse {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 0.8; }
}

.skeleton {
  animation: skeleton-pulse 1.5s ease-in-out infinite;
  background-color: var(--notion-bg-tertiary);
}

/* ============================================
   Toast Slide-in Animation
   ============================================ */

@keyframes slide-in-right {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.animate-slide-in-right {
  animation: slide-in-right 0.3s ease-out forwards;
}
