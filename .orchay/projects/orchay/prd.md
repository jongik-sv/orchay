# PRD: orchay - Task ìŠ¤ì¼€ì¤„ëŸ¬

## ë¬¸ì„œ ì •ë³´

| í•­ëª© | ë‚´ìš© |
|------|------|
| ë¬¸ì„œ ë²„ì „ | 2.0 |
| ì‘ì„±ì¼ | 2025-12-28 |
| ìƒíƒœ | Draft |
| í”„ë¡œì íŠ¸ ê²½ë¡œ | `./orchay` |

---

## 1. ì œí’ˆ ê°œìš”

### 1.1 ì´ë¦„ ìœ ë˜

**orchay** = **orch**estration + ok**ay**

ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜(ì‘ì—… ì¡°ìœ¨)ê³¼ okay(í™•ì¸/ìŠ¹ì¸)ì˜ í•©ì„±ì–´ë¡œ, Task ì‘ì—…ì„ ìë™ìœ¼ë¡œ ì¡°ìœ¨í•˜ê³  ë¶„ë°°í•˜ëŠ” ìŠ¤ì¼€ì¤„ëŸ¬ì˜ ì—­í• ì„ í‘œí˜„í•©ë‹ˆë‹¤.

### 1.2 ì œí’ˆ ë¹„ì „

WezTerm í„°ë¯¸ë„ ë©€í‹°í”Œë ‰ì„œ í™˜ê²½ì—ì„œ ì‹¤í–‰ë˜ëŠ” Task ìŠ¤ì¼€ì¤„ëŸ¬ì…ë‹ˆë‹¤. wbs.mdë¥¼ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ì—¬ ì‹¤í–‰ ê°€ëŠ¥í•œ Taskë¥¼ ì¶”ì¶œí•˜ê³ , ì—¬ëŸ¬ Claude Code Worker paneì— ì‘ì—…ì„ ìë™ ë¶„ë°°í•©ë‹ˆë‹¤.

### 1.3 í•µì‹¬ ê°€ì¹˜

| ê°€ì¹˜ | ì„¤ëª… |
|------|------|
| ìë™í™” | ìˆ˜ë™ Task ë¶„ë°° ì—†ì´ ìë™ìœ¼ë¡œ ì‘ì—… ì¡°ìœ¨ |
| ë³‘ë ¬ ì²˜ë¦¬ | ì—¬ëŸ¬ Claude Code ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ë™ì‹œ ì‘ì—… |
| ì˜ì¡´ì„± ê´€ë¦¬ | Task ê°„ ì˜ì¡´ì„±ì„ ê³ ë ¤í•œ ì§€ëŠ¥ì  ìŠ¤ì¼€ì¤„ë§ |
| í¬ë¡œìŠ¤í”Œë«í¼ | Windows, macOS, Linux ë‹¨ì¼ ì½”ë“œ ì§€ì› |

---

## 2. ì•„í‚¤í…ì²˜

### 2.1 ì‹œìŠ¤í…œ êµ¬ì„±

![ì‹œìŠ¤í…œ êµ¬ì„±](diagrams/01-system-architecture.svg)

<details>
<summary>í…ìŠ¤íŠ¸ ë‹¤ì´ì–´ê·¸ë¨</summary>

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      WezTerm (N+1 panes)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Pane 0: orchay       â”‚  Pane 1: Claude (Worker 1)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ [ìŠ¤ì¼€ì¤„ëŸ¬]       â”‚  â”‚  â”‚ ì‘ì—… ì¤‘: TSK-01-01-01          â”‚â”‚
â”‚  â”‚                 â”‚â”€â”€â”¼â”€â–¶â”‚ /wf:start ...                  â”‚â”‚
â”‚  â”‚ â€¢ wbs.md ëª¨ë‹ˆí„°ë§â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”‚ â€¢ ìŠ¤ì¼€ì¤„ í ê´€ë¦¬ â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚ â€¢ pane ìƒíƒœ ê°ì§€ â”‚  â”‚  Pane 2: Claude (Worker 2)          â”‚
â”‚  â”‚ â€¢ ì‘ì—… ë¶„ë°°      â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                 â”‚â”€â”€â”¼â”€â–¶â”‚ ì‘ì—… ì¤‘: TSK-01-01-02          â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”‚ â”‚ ìŠ¤ì¼€ì¤„ í    â”‚ â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚ â”‚ 1. TSK-02-01â”‚ â”‚  â”‚  Pane 3: Claude (Worker 3)          â”‚
â”‚  â”‚ â”‚ 2. TSK-02-02â”‚ â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â”‚ 3. ...      â”‚â”€â”¼â”€â”€â”¼â”€â–¶â”‚ ëŒ€ê¸° ì¤‘ â†’ ë‹¤ìŒ Task ë¶„ë°°       â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

</details>

### 2.2 êµ¬ì„± ìš”ì†Œ

| êµ¬ì„± ìš”ì†Œ | ìœ„ì¹˜ | ì—­í•  |
|----------|------|------|
| orchay | Pane 0 | ìŠ¤ì¼€ì¤„ëŸ¬ - wbs.md ëª¨ë‹ˆí„°ë§, í ê´€ë¦¬, ì‘ì—… ë¶„ë°° |
| Worker 1~N | Pane 1~N | Claude Code ì¸ìŠ¤í„´ìŠ¤ - ì‹¤ì œ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ |

### 2.3 ìŠ¤ì¼€ì¤„ëŸ¬(orchay) ìƒì„¸ ì—­í• 

#### í•µì‹¬ ì±…ì„

| ì±…ì„ | ìƒì„¸ ì„¤ëª… |
|------|----------|
| **wbs.md ëª¨ë‹ˆí„°ë§** | íŒŒì¼ ë³€ê²½ ê°ì§€ (polling/watcher), íŒŒì‹±, Task ìƒíƒœ ì¶”ì  |
| **ìŠ¤ì¼€ì¤„ í ê´€ë¦¬** | ì‹¤í–‰ ê°€ëŠ¥ Task í•„í„°ë§, ìš°ì„ ìˆœìœ„ ì •ë ¬, í ìœ ì§€ |
| **Worker ìƒíƒœ ê°ì‹œ** | pane ì¶œë ¥ ëª¨ë‹ˆí„°ë§, ëŒ€ê¸°/ì‘ì—…ì¤‘/ì—ëŸ¬ ìƒíƒœ íŒë³„ |
| **ì‘ì—… ë¶„ë°°** | ëŒ€ê¸° ì¤‘ Workerì— Task í• ë‹¹, WezTerm CLIë¡œ ëª…ë ¹ ì „ì†¡ |
| **ì§„í–‰ ìƒí™© ì¶”ì ** | ì „ì²´ ì‘ì—… í˜„í™©, ì™„ë£Œìœ¨, ì˜ˆìƒ ì”ì—¬ ì‹œê°„ í‘œì‹œ |
| **ë¡œê¹…/ë¦¬í¬íŒ…** | ì‹¤í–‰ ë¡œê·¸ ê¸°ë¡, ì—ëŸ¬ ì¶”ì , í†µê³„ ì¶œë ¥ |
| **ì‘ì—… íˆìŠ¤í† ë¦¬ ê´€ë¦¬** | ì™„ë£Œëœ ì‘ì—… ì¶œë ¥ ì €ì¥, ì¡°íšŒ ê¸°ëŠ¥ ì œê³µ |

#### ìŠ¤ì¼€ì¤„ëŸ¬ ìƒíƒœ ë¨¸ì‹ 

![ìŠ¤ì¼€ì¤„ëŸ¬ ìƒíƒœ ë¨¸ì‹ ](diagrams/02-scheduler-state-machine.svg)

<details>
<summary>í…ìŠ¤íŠ¸ ë‹¤ì´ì–´ê·¸ë¨</summary>

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì´ˆê¸°í™”   â”‚â”€â”€â”€â”€â–¶â”‚ ëª¨ë‹ˆí„°ë§   â”‚â—€â”€â”€â”€â–¶â”‚ ë¶„ë°° ì¤‘  â”‚â”€â”€â”€â”€â–¶â”‚ ëŒ€ê¸° ì¤‘  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                â”‚                â”‚               â”‚
     â–¼                â–¼                â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ì—ëŸ¬ ìƒíƒœ                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

</details>

| ìƒíƒœ | ì„¤ëª… | ì „ì´ ì¡°ê±´ |
|------|------|----------|
| ì´ˆê¸°í™” | ì„¤ì • ë¡œë“œ, wbs.md íŒŒì‹±, Worker íƒì§€ | ì™„ë£Œ ì‹œ â†’ ëª¨ë‹ˆí„°ë§ |
| ëª¨ë‹ˆí„°ë§ | wbs.md ë³€ê²½ ê°ì§€, Worker ìƒíƒœ ì²´í¬ | ëŒ€ê¸° Worker ë°œê²¬ â†’ ë¶„ë°° ì¤‘ |
| ë¶„ë°° ì¤‘ | Task ì„ íƒ, ëª…ë ¹ ì „ì†¡ | ì™„ë£Œ â†’ ëª¨ë‹ˆí„°ë§ |
| ëŒ€ê¸° ì¤‘ | í ë¹„ì–´ìˆìŒ, ëª¨ë“  Worker busy | í ê°±ì‹  ë˜ëŠ” Worker idle â†’ ëª¨ë‹ˆí„°ë§ |
| ì—ëŸ¬ | ì¹˜ëª…ì  ì˜¤ë¥˜ ë°œìƒ | ë³µêµ¬ ë˜ëŠ” ì¢…ë£Œ |

#### ìŠ¤ì¼€ì¤„ëŸ¬ ì´ë²¤íŠ¸ ë£¨í”„ ìƒì„¸

â†’ ì½”ë“œ ì°¸ì¡°: [orchay-code-reference.md#ìŠ¤ì¼€ì¤„ëŸ¬-ì´ë²¤íŠ¸-ë£¨í”„](orchay-code-reference.md#ìŠ¤ì¼€ì¤„ëŸ¬-ì´ë²¤íŠ¸-ë£¨í”„)

### 2.4 ì›Œì»¤(Claude Code) ìƒì„¸ ì—­í• 

#### í•µì‹¬ ì±…ì„

| ì±…ì„ | ìƒì„¸ ì„¤ëª… |
|------|----------|
| **ëª…ë ¹ ìˆ˜ì‹ ** | ìŠ¤ì¼€ì¤„ëŸ¬ë¡œë¶€í„° ì›Œí¬í”Œë¡œìš° ëª…ë ¹ ìˆ˜ì‹  (stdin) |
| **ì›Œí¬í”Œë¡œìš° ì‹¤í–‰** | /wf:start, /wf:approve, /wf:build, /wf:done ë“± ì‹¤í–‰ |
| **wbs.md ìƒíƒœ ì—…ë°ì´íŠ¸** | ì‘ì—… ì§„í–‰ì— ë”°ë¼ Task ìƒíƒœ ê¸°í˜¸ ë³€ê²½ |
| **ì‚°ì¶œë¬¼ ìƒì„±** | ì„¤ê³„ ë¬¸ì„œ, ì½”ë“œ, í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±/ìˆ˜ì • |
| **ê²°ê³¼ ë³´ê³ ** | ì™„ë£Œ/ì—ëŸ¬ ì‹œ í”„ë¡¬í”„íŠ¸ë¡œ ë³µê·€í•˜ì—¬ ìƒíƒœ í‘œì‹œ |

#### ì›Œì»¤ ìƒíƒœ

| ìƒíƒœ | ê°ì§€ ë°©ë²• | ì˜ë¯¸ | ìŠ¤ì¼€ì¤„ëŸ¬ ëŒ€ì‘ |
|------|----------|------|-------------|
| `idle` | í”„ë¡¬í”„íŠ¸ íŒ¨í„´ (`>`, `â•­â”€`, `â¯`) | ì‘ì—… ëŒ€ê¸°, ìƒˆ Task ìˆ˜ì‹  ê°€ëŠ¥ | `/clear` í›„ ë‹¤ìŒ Task ë¶„ë°° |
| `busy` | ì¶œë ¥ ì§„í–‰ ì¤‘ (í”„ë¡¬í”„íŠ¸ ì—†ìŒ) | ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì¤‘ | ëŒ€ê¸° |
| `paused` | ì¼ì‹œ ì¤‘ë‹¨ íŒ¨í„´ (ë ˆì´íŠ¸/í† í° ë¦¬ë°‹) | API ì œí•œìœ¼ë¡œ ì¼ì‹œ ì¤‘ë‹¨ | ëŒ€ê¸° í›„ "ê³„ì†" ì „ì†¡ |
| `error` | ì—ëŸ¬ íŒ¨í„´ (`Error:`, `Failed:`) | ì‘ì—… ì‹¤íŒ¨, ê°œì… í•„ìš” | ë¡œê·¸ ê¸°ë¡, ì•Œë¦¼ |
| `blocked` | ì§ˆë¬¸ íŒ¨í„´ (`?`, `ì„ íƒí•˜ì„¸ìš”`) | ì‚¬ìš©ì ì…ë ¥ ëŒ€ê¸° ì¤‘ | íƒ€ì„ì•„ì›ƒ ë˜ëŠ” ìŠ¤í‚µ |
| `dead` | pane ë¯¸ì¡´ì¬ | pane ì¢…ë£Œë¨ | Worker í’€ì—ì„œ ì œê±° |

##### ìƒíƒœë³„ ë³µêµ¬ ë°©ë²•

| ìƒíƒœ | ë³µêµ¬ ì•¡ì…˜ | ì„¤ëª… |
|------|----------|------|
| `paused` | ëŒ€ê¸° â†’ "ê³„ì†" ì „ì†¡ | ë ˆì´íŠ¸ ë¦¬ë°‹ í•´ì œ ëŒ€ê¸° í›„ ìë™ ì¬ê°œ |
| `error` | ë¡œê·¸ â†’ ìŠ¤í‚µ â†’ ë‹¤ìŒ Task | Taskë¥¼ blocked ë§ˆí‚¹ í›„ ë‹¤ìŒ ì‘ì—… ì§„í–‰ |
| `blocked` | íƒ€ì„ì•„ì›ƒ â†’ ìŠ¤í‚µ | ì¼ì • ì‹œê°„ í›„ ì‘ë‹µ ì—†ìœ¼ë©´ ìŠ¤í‚µ |
| `dead` | Worker í’€ ê°±ì‹  | ë‹¤ìŒ ëª¨ë‹ˆí„°ë§ ì£¼ê¸°ì— ìƒˆ pane íƒì§€ |

#### ì›Œì»¤ ì‹¤í–‰ íë¦„

![ì›Œì»¤ ì‹¤í–‰ íë¦„](diagrams/03-worker-execution-flow.svg)

<details>
<summary>í…ìŠ¤íŠ¸ ë‹¤ì´ì–´ê·¸ë¨</summary>

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Worker ì‹¤í–‰ íë¦„                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [idle] â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                          â”‚ â”‚
â”‚    â”‚ ëª…ë ¹ ìˆ˜ì‹ : /wf:start TSK-01-01-01                        â”‚ â”‚
â”‚    â–¼                                                          â”‚ â”‚
â”‚  [busy]                                                       â”‚ â”‚
â”‚    â”‚                                                          â”‚ â”‚
â”‚    â”œâ”€â”€â–¶ 1. Task ì»¨í…ìŠ¤íŠ¸ ë¡œë“œ (wbs.mdì—ì„œ ìƒì„¸ ì •ë³´ ì½ê¸°)       â”‚ â”‚
â”‚    â”‚                                                          â”‚ â”‚
â”‚    â”œâ”€â”€â–¶ 2. ì„¤ê³„ ë¬¸ì„œ ìƒì„±                                      â”‚ â”‚
â”‚    â”‚       â””â”€â”€ wbs.md ìƒíƒœ ì—…ë°ì´íŠ¸: [ ] â†’ [dd]                â”‚ â”‚
â”‚    â”‚                                                          â”‚ â”‚
â”‚    â”œâ”€â”€â–¶ 3. ì½”ë“œ êµ¬í˜„                                           â”‚ â”‚
â”‚    â”‚       â””â”€â”€ wbs.md ìƒíƒœ ì—…ë°ì´íŠ¸: [dd] â†’ [ap] (ìŠ¹ì¸ ëŒ€ê¸°)    â”‚ â”‚
â”‚    â”‚                                                          â”‚ â”‚
â”‚    â”œâ”€â”€â–¶ 4. í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ê²€ì¦                                  â”‚ â”‚
â”‚    â”‚       â””â”€â”€ wbs.md ìƒíƒœ ì—…ë°ì´íŠ¸: [ap] â†’ [im]               â”‚ â”‚
â”‚    â”‚                                                          â”‚ â”‚
â”‚    â””â”€â”€â–¶ 5. ì™„ë£Œ ì²˜ë¦¬                                           â”‚ â”‚
â”‚            â””â”€â”€ í”„ë¡¬í”„íŠ¸ ì¶œë ¥ (>) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â€» ìŠ¤ì¼€ì¤„ëŸ¬ê°€ í”„ë¡¬í”„íŠ¸ ê°ì§€ â†’ ë‹¤ìŒ Task ë¶„ë°°                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

</details>

#### ì›Œì»¤ê°€ ìˆ˜ì •í•˜ëŠ” íŒŒì¼

| íŒŒì¼ ìœ í˜• | ê²½ë¡œ íŒ¨í„´ | ì„¤ëª… |
|----------|----------|------|
| wbs.md | `.orchay/projects/{project}/wbs.md` | Task ìƒíƒœ ì—…ë°ì´íŠ¸ |
| ì„¤ê³„ ë¬¸ì„œ | `.orchay/projects/{project}/design/{task-id}.md` | ìƒì„¸ ì„¤ê³„ |
| ì†ŒìŠ¤ ì½”ë“œ | `lib/`, `src/` | êµ¬í˜„ ì½”ë“œ |
| í…ŒìŠ¤íŠ¸ | `test/` | ë‹¨ìœ„/í†µí•© í…ŒìŠ¤íŠ¸ |

### 2.5 ìŠ¤ì¼€ì¤„ëŸ¬-ì›Œì»¤ ìƒí˜¸ì‘ìš© í”„ë¡œí† ì½œ

#### í†µì‹  ì±„ë„

![ìŠ¤ì¼€ì¤„ëŸ¬-ì›Œì»¤ í†µì‹ ](diagrams/04-scheduler-worker-communication.svg)

<details>
<summary>í…ìŠ¤íŠ¸ ë‹¤ì´ì–´ê·¸ë¨</summary>

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ìŠ¤ì¼€ì¤„ëŸ¬     â”‚                              â”‚    ì›Œì»¤       â”‚
â”‚   (orchay)    â”‚                              â”‚ (Claude Code) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚               â”‚  wezterm cli send-text       â”‚               â”‚
â”‚   ëª…ë ¹ ì „ì†¡   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶   â”‚   ëª…ë ¹ ìˆ˜ì‹    â”‚
â”‚               â”‚                              â”‚               â”‚
â”‚               â”‚  wezterm cli get-text        â”‚               â”‚
â”‚   ìƒíƒœ í™•ì¸   â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   ì¶œë ¥ ìƒì„±   â”‚
â”‚               â”‚  (í´ë§)                      â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚               â”‚         wbs.md               â”‚               â”‚
â”‚   ë³€ê²½ ê°ì§€   â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   ìƒíƒœ ê°±ì‹    â”‚
â”‚               â”‚  (íŒŒì¼ ëª¨ë‹ˆí„°ë§)              â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

</details>

#### ëª…ë ¹ í˜•ì‹

```bash
# ê¸°ë³¸ í˜•ì‹
/wf:{action} {task-id}

# ì˜ˆì‹œ
/wf:start TSK-01-01-01
/wf:approve TSK-01-01-01
/wf:build TSK-01-01-01
/wf:done TSK-01-01-01
```

#### ì™„ë£Œ ê°ì§€ í”„ë¡œí† ì½œ

![ì™„ë£Œ ê°ì§€ ì‹œí€€ìŠ¤](diagrams/05-completion-detection.svg)

<details>
<summary>í…ìŠ¤íŠ¸ ë‹¤ì´ì–´ê·¸ë¨</summary>

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ì™„ë£Œ ê°ì§€ ì‹œí€€ìŠ¤                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. ìŠ¤ì¼€ì¤„ëŸ¬: wezterm cli get-text --pane-id N                  â”‚
â”‚     â””â”€â”€ Worker paneì˜ ìµœê·¼ ì¶œë ¥ ì½ê¸°                             â”‚
â”‚                                                                 â”‚
â”‚  2. í”„ë¡¬í”„íŠ¸ íŒ¨í„´ ë§¤ì¹­                                           â”‚
â”‚     â””â”€â”€ ê¸°ë³¸: ^>\s*$ (ì¤„ ì‹œì‘ì´ > ë¡œ ì‹œì‘)                       â”‚
â”‚     â””â”€â”€ ì»¤ìŠ¤í…€: promptPattern ì„¤ì •ìœ¼ë¡œ ë³€ê²½ ê°€ëŠ¥                  â”‚
â”‚                                                                 â”‚
â”‚  3. ë§¤ì¹­ ì„±ê³µ â†’ idle ìƒíƒœ íŒì •                                   â”‚
â”‚                                                                 â”‚
â”‚  4. wbs.md ì¬ì½ê¸°                                               â”‚
â”‚     â””â”€â”€ í•´ë‹¹ Taskì˜ ìƒíƒœ í™•ì¸                                    â”‚
â”‚     â””â”€â”€ ìƒíƒœê°€ ì§„í–‰ë˜ì—ˆìœ¼ë©´ â†’ ì‘ì—… ì™„ë£Œë¡œ íŒì •                    â”‚
â”‚     â””â”€â”€ ìƒíƒœ ë¯¸ë³€ê²½ â†’ ì—ëŸ¬ ë˜ëŠ” ìŠ¤í‚µìœ¼ë¡œ íŒì •                     â”‚
â”‚                                                                 â”‚
â”‚  5. ë‹¤ìŒ Task ë¶„ë°° (íì— í•­ëª© ìˆìœ¼ë©´)                             â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

</details>

#### ë™ì‹œì„± ì œì–´

| ê·œì¹™ | ì„¤ëª… |
|------|------|
| **Task ë‹¨ë… ì‹¤í–‰** | ë™ì¼ Taskë¥¼ ì—¬ëŸ¬ Workerì—ì„œ ë™ì‹œ ì‹¤í–‰ ê¸ˆì§€ |
| **wbs.md ìˆœì°¨ ì“°ê¸°** | Workerë“¤ì´ ë™ì‹œì— wbs.md ìˆ˜ì • ì‹œ ì¶©ëŒ ê°€ëŠ¥ â†’ ìˆœì°¨ ì—…ë°ì´íŠ¸ ê¶Œì¥ |
| **ì˜ì¡´ì„± ì¤€ìˆ˜** | dependsì— ëª…ì‹œëœ ì„ í–‰ Task ì™„ë£Œ ì „ê¹Œì§€ í›„í–‰ Task ë¶„ë°° ì•ˆ í•¨ |
| **ìµœëŒ€ ë³‘ë ¬ë„** | ë™ì‹œ ì‹¤í–‰ Task ìˆ˜ = Worker pane ìˆ˜ |

---

## 3. í•µì‹¬ ê¸°ëŠ¥

### 3.1 wbs.md ëª¨ë‹ˆí„°ë§

- íŒŒì¼ ë³€ê²½ ê°ì§€ (polling ë˜ëŠ” file watcher)
- ë³€ê²½ ì‹œ Task ëª©ë¡ ì¬íŒŒì‹±
- ìŠ¤ì¼€ì¤„ í ê°±ì‹ 

#### Task ì†ì„± íŒŒì‹±

â†’ [wbs-task-spec.md](../../docs/wbs-task-spec.md) ì°¸ì¡°

**ìŠ¤ì¼€ì¤„ëŸ¬ê°€ íŒŒì‹±í•˜ëŠ” ì£¼ìš” ì†ì„±:**
- **ê¸°ë³¸ ì†ì„±**: category, domain, status, priority, depends, blocked-by
- **PRD ì—°ë™ ì†ì„±**: prd-ref, requirements, acceptance (standard ì´ìƒ)
- **TRD ì—°ë™ ì†ì„±**: tech-spec, api-spec, data-model (detailed ì´ìƒ)
- **ìƒì„¸ë„ ë ˆë²¨**: minimal, standard, detailed, full

#### wbs.md ë©”íƒ€ë°ì´í„°

wbs.md ìƒë‹¨ì˜ `> key: value` í˜•ì‹ ë©”íƒ€ë°ì´í„°ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤:

| í•„ë“œ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| `version` | WBS ë²„ì „ | `1.0` |
| `depth` | ê³„ì¸µ ê¹Šì´ (3 ë˜ëŠ” 4) | `3` |
| `updated` | ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ë‚ ì§œ | `2025-12-28` |
| `project-root` | ê°œë°œ í´ë” ê²½ë¡œ (í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê¸°ì¤€) | `orchay`, `./`, `lib/myapp` |
| `strategy` | ê°œë°œ ì „ëµ ì„¤ëª… | `ë¶€íŠ¸ìŠ¤íŠ¸ë˜í•‘` |

**project-root ì‚¬ìš©**:
- í”„ë¡œì íŠ¸ëª…ìœ¼ë¡œ Task ID ì ‘ë‘ì‚¬ ì§€ì •
- ì˜ˆ: `project-root: orchay` â†’ `/wf:design orchay/TSK-01-01`

### 3.2 ìŠ¤ì¼€ì¤„ í ê´€ë¦¬

ì˜ì¡´ì„±ê³¼ ìš°ì„ ìˆœìœ„ë¥¼ ê³ ë ¤í•˜ì—¬ ì‹¤í–‰ ê°€ëŠ¥í•œ Task íë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. ìŠ¤ì¼€ì¤„ íì—ëŠ” **ê°œë°œ ê°€ëŠ¥í•œ Taskë§Œ** í‘œì‹œë©ë‹ˆë‹¤.

#### ì˜ì¡´ì„± í•„í„°ë§ ê·œì¹™ (ë‹¨ê³„ë³„)

| ë‹¨ê³„ | ëª¨ë“œ | ì˜ì¡´ì„± í™•ì¸ |
|------|------|------------|
| ì„¤ê³„ (/wf:start) | ëª¨ë“  ëª¨ë“œ | **ë¬´ì‹œ** (ì„¤ê³„ëŠ” ììœ ë¡­ê²Œ) |
| êµ¬í˜„ (/wf:approve ì´í›„) | develop | **í™•ì¸** (ì„ í–‰ Task [im] ì´ìƒ) |
| êµ¬í˜„ (/wf:approve ì´í›„) | force | **ë¬´ì‹œ** |

#### ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜

```
1. wbs.md íŒŒì‹± â†’ ì „ì²´ Task ëª©ë¡ ì¶”ì¶œ

2. ì‹¤í–‰ ê°€ëŠ¥ Task í•„í„°ë§:
   - statusê°€ [xx] (ì™„ë£Œ)ì¸ Task ì œì™¸
   - blocked-byê°€ ìˆëŠ” Task ì œì™¸
   - í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ Task ì œì™¸

3. ëª¨ë“œë³„ ì˜ì¡´ì„± í•„í„°ë§:
   [design ëª¨ë“œ]
   - ì„¤ê³„ ë¯¸ì™„ë£Œ([ ] ìƒíƒœ) Taskë§Œ í‘œì‹œ
   - ì˜ì¡´ì„± ë¬´ì‹œ

   [develop ëª¨ë“œ]
   - ì„¤ê³„ ë¯¸ì™„ë£Œ([ ]) Task: ì˜ì¡´ì„± ë¬´ì‹œ â†’ í‘œì‹œ
   - ì„¤ê³„ ì™„ë£Œ([dd] ì´ìƒ) Task: depends ì„ í–‰ Taskê°€ [im] ì´ìƒì´ë©´ í‘œì‹œ

   [force ëª¨ë“œ]
   - ëª¨ë“  ë¯¸ì™„ë£Œ Task í‘œì‹œ
   - ì˜ì¡´ì„± ë¬´ì‹œ

4. ìš°ì„ ìˆœìœ„ ì •ë ¬:
   - priority: critical > high > medium > low
   - schedule ì‹œì‘ì¼ ì˜¤ë¦„ì°¨ìˆœ

5. ìŠ¤ì¼€ì¤„ íì— ì¶”ê°€
6. ëŒ€ê¸° ì¤‘ì¸ Worker paneì— ë¶„ë°°
```

#### í•„í„°ë§ ë¡œì§

â†’ ì½”ë“œ ì°¸ì¡°: [orchay-code-reference.md#filter_executable_tasks](orchay-code-reference.md#filter_executable_tasks)

### 3.3 Worker ìƒíƒœ ê°ì§€

![Worker ìƒíƒœ ê°ì§€ íë¦„](diagrams/08-worker-state-detection.svg)

**í”„ë¡¬í”„íŠ¸ íŒ¨í„´ ê°ì§€ ë°©ì‹:**

Claude Codeê°€ ì…ë ¥ ëŒ€ê¸° ìƒíƒœì¼ ë•Œ ì¶œë ¥í•˜ëŠ” í”„ë¡¬í”„íŠ¸ íŒ¨í„´ì„ ê°ì§€í•©ë‹ˆë‹¤.

| í•­ëª© | ì„¤ëª… |
|------|------|
| ëª…ë ¹ì–´ | `wezterm cli get-text --pane-id N` |
| ì½ê¸° ë²”ìœ„ | ë§ˆì§€ë§‰ 50ì¤„ (ì„¤ì • ê°€ëŠ¥) |
| ë§¤ì¹­ ë°©ì‹ | ì •ê·œì‹ íŒ¨í„´ ë§¤ì¹­ |

#### ìƒíƒœ ê°ì§€ íŒ¨í„´

| ìƒíƒœ | íŒ¨í„´ | ì˜ˆì‹œ |
|------|------|------|
| **done (ì™„ë£Œ ì‹ í˜¸)** | `ORCHAY_DONE:([^:]+):(\w+):(success\|error)` | wf ëª…ë ¹ì–´ ì™„ë£Œ |
| **idle (í”„ë¡¬í”„íŠ¸)** | `^>\s*$`, `â•­â”€`, `â¯` | Claude Code ì…ë ¥ ëŒ€ê¸° |
| **paused (ì¼ì‹œ ì¤‘ë‹¨)** | `rate.*limit`, `please.*wait`, `try.*again` | API ì œí•œ |
| | `weekly.*limit.*reached`, `resets.*at` | Weekly limit |
| | `context.*limit`, `conversation.*too.*long` | í† í° í•œê³„ |
| **error** | `Error:`, `Failed:`, `Exception:`, `âŒ` | ì‘ì—… ì‹¤íŒ¨ |
| **blocked (ì§ˆë¬¸)** | `\?\s*$`, `\(y/n\)`, `ì„ íƒ` | ì‚¬ìš©ì ì…ë ¥ ëŒ€ê¸° |

#### ì™„ë£Œ ì‹ í˜¸ í˜•ì‹ (ORCHAY_DONE)

ê° `/wf:*` ëª…ë ¹ì–´ëŠ” ì‘ì—… ì™„ë£Œ ì‹œ ë‹¤ìŒ í˜•ì‹ì˜ ì‹ í˜¸ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤:

```
ORCHAY_DONE:[{project}/]{task-id}:{action}:{status}[:{message}]
```

| í•„ë“œ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| `project` | í”„ë¡œì íŠ¸ëª… (ì„ íƒ) | `orchay` |
| `task-id` | Task ì‹ë³„ì | `TSK-01-01` |
| `action` | wf ëª…ë ¹ì–´ | `start`, `build`, `done` ë“± |
| `status` | ì™„ë£Œ ìƒíƒœ | `success` ë˜ëŠ” `error` |
| `message` | ì—ëŸ¬ ë©”ì‹œì§€ (ì„ íƒ) | `í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨` |

**ì˜ˆì‹œ:**
```
ORCHAY_DONE:TSK-01-01:start:success              # ê¸°ì¡´ í˜¸í™˜
ORCHAY_DONE:orchay/TSK-01-01:start:success       # ìƒˆ í˜•ì‹
ORCHAY_DONE:orchay/TSK-01-01:build:error:TDD 5íšŒ ì´ˆê³¼
```

**Fallback íŒ¨í„´** (ORCHAY_DONE ëˆ„ë½ ì‹œ):
```
Task orchay/TSK-01-01 ì™„ë£Œ
Task TSK-01-01 ì™„ë£Œ                               # ê¸°ì¡´ í˜¸í™˜
```

#### ìƒíƒœ íŒì • ìš°ì„ ìˆœìœ„

**íŒŒì¼ ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬**: ì‘ì—… ì¤‘ì¸ WorkerëŠ” `orchay-active.json` íŒŒì¼ë¡œ ì¶”ì í•©ë‹ˆë‹¤.

> ìƒì„¸ êµ¬í˜„ ì½”ë“œëŠ” [orchay-code-reference.md](./orchay-code-reference.md#ìƒíƒœ-ê°ì§€) ì°¸ì¡°

```
íŒì • ë¡œì§:
1. íŒŒì¼ì— í•´ë‹¹ paneì˜ ì‘ì—…ì´ ìˆìœ¼ë©´:
   - ORCHAY_DONE ê°ì§€ ì‹œ â†’ done + íŒŒì¼ì—ì„œ ì œê±°
   - ê·¸ ì™¸ â†’ busy (ê³„ì† ì‘ì—… ì¤‘)

2. íŒŒì¼ì— ì—†ìœ¼ë©´ (ì´ˆê¸° ìƒíƒœ ë˜ëŠ” ì‘ì—… ì™„ë£Œ í›„):
   - pane ì¶œë ¥ìœ¼ë¡œ ìƒíƒœ íŒë‹¨
   - ìš°ì„ ìˆœìœ„: dead > done > idle > paused > error > blocked > busy
```

### 3.4 ì‘ì—… ë¶„ë°°

ëŒ€ê¸° ì¤‘ì¸ Worker paneì— Taskë¥¼ ë¶„ë°°í•©ë‹ˆë‹¤. **í•œ Workerê°€ í•œ Taskë¥¼ ëê¹Œì§€ ì±…ì„ì§€ê³  ìˆ˜í–‰**í•©ë‹ˆë‹¤.

#### Task ë‹¨ìœ„ ì‹¤í–‰ ì›ì¹™

```
ê¸°ì¡´: Worker1: TSK-01 /wf:start â†’ TSK-02 /wf:start â†’ TSK-01 /wf:approve â†’ ...
ë³€ê²½: Worker1: TSK-01 (/wf:start â†’ /wf:approve â†’ /wf:build â†’ /wf:done) â†’ TSK-02 ...
```

- í•œ Workerê°€ í•œ Taskì˜ ì „ì²´ workflowë¥¼ ìˆœì°¨ ì‹¤í–‰
- Task ì™„ë£Œ í›„ ë‹¤ìŒ Task í• ë‹¹
- ì¤‘ê°„ì— ì—ëŸ¬ ë°œìƒ ì‹œ í•´ë‹¹ Task ì¤‘ë‹¨ í›„ ë‹¤ìŒ Taskë¡œ ì´ë™

#### ë¶„ë°° ì‹œí€€ìŠ¤

```
idle Worker ê°ì§€ â†’ /clear ì „ì†¡ â†’ Task workflow ìˆœì°¨ ì‹¤í–‰ â†’ ì™„ë£Œ â†’ ë‹¤ìŒ Task
```

#### Task ì‹¤í–‰ ë¡œì§

â†’ ì½”ë“œ ì°¸ì¡°: [orchay-code-reference.md#task-ì‹¤í–‰-ë¡œì§](orchay-code-reference.md#task-ì‹¤í–‰-ë¡œì§)

#### WezTerm CLI ëª…ë ¹ì–´

| ëª…ë ¹ì–´ | ì„¤ëª… |
|--------|------|
| `wezterm cli send-text --no-paste --pane-id N "/clear"` | ì»¨í…ìŠ¤íŠ¸ ì´ˆê¸°í™” |
| `wezterm cli send-text --no-paste --pane-id N "text"` | ì›Œí¬í”Œë¡œìš° ëª…ë ¹ ì „ì†¡ |
| `wezterm cli send-text --no-paste --pane-id N \r` | Enter í‚¤ ì „ì†¡ |

### 3.5 ìŠ¤ì¼€ì¤„ëŸ¬ ë£¨í”„

```python
while True:
    1. wbs.md ë³€ê²½ ê°ì§€ â†’ í ê°±ì‹ 
    2. ê° Worker pane ì¶œë ¥ í™•ì¸:
       - wezterm cli get-text --pane-id N
       - í”„ë¡¬í”„íŠ¸ íŒ¨í„´ ê°ì§€ â†’ ëŒ€ê¸° ì¤‘
    3. ëŒ€ê¸° ì¤‘ì¸ pane ë°œê²¬ ì‹œ:
       - íì—ì„œ ë‹¤ìŒ Task pop
       - wezterm cli send-textë¡œ ë¶„ë°°
    4. sleep(interval)
```

### 3.6 ì‘ì—… íˆìŠ¤í† ë¦¬ ê´€ë¦¬

Workerê°€ ì™„ë£Œí•œ ì‘ì—…ì˜ ì¶œë ¥ ë‚´ìš©ì„ ì €ì¥í•˜ê³  ë‚˜ì¤‘ì— ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

#### ì €ì¥ ì‹œì 

| ì´ë²¤íŠ¸ | ì €ì¥ ë‚´ìš© |
|--------|----------|
| Task ë¶„ë°° ì‹œ | task_id, worker_id, started_at |
| Task ì™„ë£Œ ê°ì§€ ì‹œ | completed_at, status, output (pane ì¶œë ¥) |
| Task ì—ëŸ¬ ë°œìƒ ì‹œ | completed_at, status="error", output, error_message |

#### ì €ì¥ í˜•ì‹ (JSON Lines)

`.orchay/logs/orchay-history.jsonl` íŒŒì¼ì— í•œ ì¤„ì”© JSON í˜•íƒœë¡œ ì €ì¥í•©ë‹ˆë‹¤.

```jsonl
{"task_id": "TSK-01-01-01", "worker_id": 1, "started_at": "2025-12-27T10:00:00", "completed_at": "2025-12-27T10:15:30", "status": "completed", "output": "...pane ì¶œë ¥ ë‚´ìš©..."}
{"task_id": "TSK-01-01-02", "worker_id": 2, "started_at": "2025-12-27T10:00:05", "completed_at": "2025-12-27T10:20:15", "status": "completed", "output": "...pane ì¶œë ¥ ë‚´ìš©..."}
{"task_id": "TSK-01-02-01", "worker_id": 1, "started_at": "2025-12-27T10:15:35", "completed_at": "2025-12-27T10:18:00", "status": "error", "output": "...", "error_message": "TypeError: ..."}
```

#### íˆìŠ¤í† ë¦¬ ë ˆì½”ë“œ ìŠ¤í‚¤ë§ˆ

| í•„ë“œ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `task_id` | string | Task ì‹ë³„ì (ì˜ˆ: TSK-01-01-01) |
| `worker_id` | number | Worker pane ë²ˆí˜¸ |
| `started_at` | string | ì‘ì—… ì‹œì‘ ì‹œê°„ (ISO 8601) |
| `completed_at` | string | ì‘ì—… ì™„ë£Œ ì‹œê°„ (ISO 8601) |
| `status` | string | ì™„ë£Œ ìƒíƒœ: "completed", "error", "skipped" |
| `output` | string | pane ì¶œë ¥ ë‚´ìš© (ë§ˆì§€ë§‰ Nì¤„) |
| `error_message` | string? | ì—ëŸ¬ ë°œìƒ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ |
| `duration_seconds` | number | ì‘ì—… ì†Œìš” ì‹œê°„ (ì´ˆ) |

#### íˆìŠ¤í† ë¦¬ ì €ì¥/ì¡°íšŒ ë¡œì§

â†’ ì½”ë“œ ì°¸ì¡°: [orchay-code-reference.md#íˆìŠ¤í† ë¦¬-ê´€ë¦¬](orchay-code-reference.md#íˆìŠ¤í† ë¦¬-ê´€ë¦¬)

### 3.7 ì¸í„°ë™í‹°ë¸Œ ëª…ë ¹ì–´ ì‹œìŠ¤í…œ

ìŠ¤ì¼€ì¤„ëŸ¬ ì‹¤í–‰ ì¤‘ í„°ë¯¸ë„ì—ì„œ ì§ì ‘ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ Function Keyë¡œ ë¹ ë¥´ê²Œ ì¡°ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ëª…ë ¹ì–´ ëª©ë¡

| ë¶„ë¥˜ | ëª…ë ¹ì–´ | ì„¤ëª… |
|------|--------|------|
| **ì œì–´** | `start` | ìŠ¤ì¼€ì¤„ë§ ì‹œì‘ |
| | `stop` | ìŠ¤ì¼€ì¤„ë§ ì¢…ë£Œ (graceful shutdown) |
| | `pause` | ìƒˆ Task ë¶„ë°° ì¼ì‹œ ì¤‘ì§€ (ì§„í–‰ ì¤‘ ì‘ì—… ìœ ì§€) |
| | `resume` | ì¼ì‹œ ì¤‘ì§€ í•´ì œ |
| **ì¡°íšŒ** | `status` | ì „ì²´ í˜„í™© (í í¬ê¸°, Worker ìƒíƒœ, ì§„í–‰ë¥ ) |
| | `queue` | ëŒ€ê¸° ì¤‘ì¸ Task ëª©ë¡ (ìˆœì„œëŒ€ë¡œ) |
| | `workers` | ì „ì²´ Worker ìƒíƒœ |
| | `worker N` | Worker Nì˜ í˜„ì¬ pane ì¶œë ¥ |
| | `history [ID]` | ì™„ë£Œëœ ì‘ì—… íˆìŠ¤í† ë¦¬ |
| **í ì¡°ì •** | `up TSK-XX` | í•´ë‹¹ Taskë¥¼ í•œ ì¹¸ ìœ„ë¡œ |
| | `top TSK-XX` | í•´ë‹¹ Taskë¥¼ ìµœìš°ì„ (1ë²ˆ)ìœ¼ë¡œ |
| **ì‘ì—… ê´€ë¦¬** | `skip TSK-XX` | í•´ë‹¹ Task ìŠ¤í‚µ (blocked ì²˜ë¦¬) |
| | `retry TSK-XX` | ì‹¤íŒ¨í•œ Task ì¬ì‹œë„ |
| | `reload` | wbs.md ê°•ì œ ì¬ë¡œë“œ |
| | `clear N` | Worker Nì— /clear ì „ì†¡ |
| **ëª¨ë“œ** | `mode design` | ì„¤ê³„ ëª¨ë“œë¡œ ì „í™˜ |
| | `mode develop` | ê°œë°œ ëª¨ë“œë¡œ ì „í™˜ |
| | `mode force` | ê°•ì œ ëª¨ë“œë¡œ ì „í™˜ |
| **ê¸°íƒ€** | `help` | ëª…ë ¹ì–´ ë„ì›€ë§ ë° í‚¤ ë°”ì¸ë”© í‘œì‹œ |

#### Function Key ë°”ì¸ë”©

| Key | ëª…ë ¹ì–´ | ì„¤ëª… |
|-----|--------|------|
| **F1** | `help` | ë„ì›€ë§ / í‚¤ ë°”ì¸ë”© í‘œì‹œ |
| **F2** | `status` | ì „ì²´ í˜„í™© |
| **F3** | `queue` | ëŒ€ê¸° Task ëª©ë¡ (ì¸í„°ë™í‹°ë¸Œ ëª¨ë“œ) |
| **F4** | `workers` | Worker ìƒíƒœ |
| **F5** | `reload` | wbs.md ì¬ë¡œë“œ |
| **F6** | `history` | ì™„ë£Œ íˆìŠ¤í† ë¦¬ |
| **F7** | `mode` | ëª¨ë“œ ìˆœí™˜ (design â†’ develop â†’ force) |
| **F9** | `pause`/`resume` | í† ê¸€ |
| **F10** | `stop` | ì¢…ë£Œ |
| **Shift+F1** | `worker 1` | Worker 1 ì¶œë ¥ ë³´ê¸° |
| **Shift+F2** | `worker 2` | Worker 2 ì¶œë ¥ ë³´ê¸° |
| **Shift+F3** | `worker 3` | Worker 3 ì¶œë ¥ ë³´ê¸° |
| **Shift+F5** | `clear` | ì„ íƒëœ Workerì— /clear |

#### ì¸í„°ë™í‹°ë¸Œ Task ì„ íƒ UI

`F3` (queue) ë˜ëŠ” `queue` ëª…ë ¹ ì‹¤í–‰ ì‹œ ì¸í„°ë™í‹°ë¸Œ ëª¨ë“œë¡œ ì§„ì…í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ Task Queue (5 items)                          [F1: Help]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â–¶ 1. TSK-01-01-01  [ ]  development  ê¸°ë³¸ ì„¤ê³„          â†ì„ íƒë¨ â”‚
â”‚    2. TSK-01-01-02  [ ]  development  ìƒì„¸ ì„¤ê³„                 â”‚
â”‚    3. TSK-01-02-01  [dd] development  UI êµ¬í˜„                   â”‚
â”‚    4. TSK-02-01     [ ]  defect       ë²„ê·¸ ìˆ˜ì •                 â”‚
â”‚    5. TSK-03-01     [ ]  infra        CI/CD ì„¤ì •                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â†‘/â†“: ì´ë™  Enter: ì•¡ì…˜ ì„ íƒ  U: ìœ„ë¡œ  T: ìµœìš°ì„   ESC: ë‹«ê¸°     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¡°ì‘ í‚¤:**

| Key | ë™ì‘ |
|-----|------|
| `â†‘` / `â†“` | Task ì„ íƒ ì´ë™ |
| `Enter` | ì„ íƒí•œ Taskì— ëŒ€í•œ ì•¡ì…˜ ë©”ë‰´ ì—´ê¸° |
| `U` | ì„ íƒí•œ Taskë¥¼ í•œ ì¹¸ ìœ„ë¡œ (up) |
| `T` | ì„ íƒí•œ Taskë¥¼ ìµœìš°ì„ ìœ¼ë¡œ (top) |
| `S` | ì„ íƒí•œ Task ìŠ¤í‚µ (skip) |
| `R` | ì„ íƒí•œ Task ì¬ì‹œë„ (retry) |
| `ESC` | ì¸í„°ë™í‹°ë¸Œ ëª¨ë“œ ì¢…ë£Œ |

**ì•¡ì…˜ ë©”ë‰´ (Enter ì‹œ):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TSK-01-01-01 ì•¡ì…˜ ì„ íƒ      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. ìœ„ë¡œ ì´ë™ (up)          â”‚
â”‚  2. ìµœìš°ì„  (top)            â”‚
â”‚  3. ìŠ¤í‚µ (skip)             â”‚
â”‚  4. ì¬ì‹œë„ (retry)          â”‚
â”‚  5. ìƒì„¸ ë³´ê¸°               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ESC: ì·¨ì†Œ                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ëª…ë ¹ì–´ ì…ë ¥ ì²˜ë¦¬

â†’ ì½”ë“œ ì°¸ì¡°: [orchay-code-reference.md#ì¸í„°ë™í‹°ë¸Œ-ëª…ë ¹ì–´](orchay-code-reference.md#ì¸í„°ë™í‹°ë¸Œ-ëª…ë ¹ì–´)

### 3.8 ì‹¤í–‰ ëª¨ë“œ

ìŠ¤ì¼€ì¤„ëŸ¬ì˜ ë™ì‘ ë°©ì‹ì„ ê²°ì •í•˜ëŠ” 4ê°€ì§€ ì‹¤í–‰ ëª¨ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

â†’ ëª¨ë“œ ì •ì˜: [workflows.json](../../settings/workflows.json) `executionModes` ì°¸ì¡°

#### ëª¨ë“œ ì •ì˜

| ëª¨ë“œ | ì„¤ê³„ ë‹¨ê³„ | êµ¬í˜„ ì´í›„ | ìˆ˜í–‰ ë²”ìœ„ | ìš©ë„ |
|------|----------|----------|----------|------|
| **design** | ì˜ì¡´ì„± ë¬´ì‹œ | - | startë§Œ | ì „ì²´ Task ì„¤ê³„ ë¬¸ì„œ ì¼ê´„ ìƒì„± |
| **quick** | ì˜ì¡´ì„± ë¬´ì‹œ | ì˜ì¡´ì„± í™•ì¸ | transitionsë§Œ | ë¹ ë¥¸ ê°œë°œ (ë¦¬ë·°/í…ŒìŠ¤íŠ¸ ìƒëµ) |
| **develop** | ì˜ì¡´ì„± ë¬´ì‹œ | ì˜ì¡´ì„± í™•ì¸ | full (transitions + actions) | ì „ì²´ ì›Œí¬í”Œë¡œìš° (ë¦¬ë·°/í…ŒìŠ¤íŠ¸ í¬í•¨) |
| **force** | ì˜ì¡´ì„± ë¬´ì‹œ | ì˜ì¡´ì„± ë¬´ì‹œ | transitionsë§Œ | ê¸´ê¸‰ ê°œë°œ, ì˜ì¡´ì„± ë¬´ì‹œ |

#### ì›Œí¬í”Œë¡œìš° ë‹¨ê³„ ë¹„êµ

| ëª¨ë“œ | ì›Œí¬í”Œë¡œìš° ë‹¨ê³„ |
|------|----------------|
| design | `start` |
| quick | `start â†’ approve â†’ build â†’ done` |
| develop | `start â†’ review â†’ apply â†’ approve â†’ build â†’ audit â†’ patch â†’ test â†’ done` |
| force | quickê³¼ ë™ì¼ |

#### ëª¨ë“œë³„ ë™ì‘

**design ëª¨ë“œ:**
```
- ëª¨ë“  [ ] ìƒíƒœ Taskì— ëŒ€í•´ /wf:start ì‹¤í–‰
- ì„¤ê³„ ë¬¸ì„œë§Œ ìƒì„± ([dd] ìƒíƒœê¹Œì§€)
- ì˜ì¡´ê´€ê³„ ë¬´ì‹œ â†’ ì „ì²´ Task ì„¤ê³„ ë³‘ë ¬ ì§„í–‰ ê°€ëŠ¥
- ìš©ë„: í”„ë¡œì íŠ¸ ì´ˆê¸° ì „ì²´ ì„¤ê³„ ìˆ˜í–‰
```

**quick ëª¨ë“œ:**
```
- ì„¤ê³„ ë‹¨ê³„: ì˜ì¡´ê´€ê³„ ë¬´ì‹œ
- êµ¬í˜„ ë‹¨ê³„: ì„ í–‰ Taskê°€ êµ¬í˜„ ì™„ë£Œ([im]) ì´ìƒì´ì–´ì•¼ ì§„í–‰
- transitionsë§Œ ì‹¤í–‰ (review, apply, audit, patch, test ìƒëµ)
- ìš©ë„: ë¹ ë¥¸ ê°œë°œ, ë¦¬ë·° ë¶ˆí•„ìš”í•œ ì‘ì—…
```

**develop ëª¨ë“œ:**
```
- ì„¤ê³„ ë‹¨ê³„: ì˜ì¡´ê´€ê³„ ë¬´ì‹œ
- êµ¬í˜„ ë‹¨ê³„: ì„ í–‰ Taskê°€ êµ¬í˜„ ì™„ë£Œ([im]) ì´ìƒì´ì–´ì•¼ ì§„í–‰
- ì „ì²´ workflow ìˆœì°¨ ì‹¤í–‰ (transitions + actions)
- ìš©ë„: ì •ìƒì ì¸ ê°œë°œ ì›Œí¬í”Œë¡œìš° (ë¦¬ë·°/í…ŒìŠ¤íŠ¸ í¬í•¨)
```

**force ëª¨ë“œ:**
```
- ëª¨ë“  ë‹¨ê³„ì—ì„œ ì˜ì¡´ê´€ê³„ ë¬´ì‹œ
- transitionsë§Œ ì‹¤í–‰ (quickê³¼ ë™ì¼í•œ ë‹¨ê³„)
- ìš©ë„: ê¸´ê¸‰ ê°œë°œ, íŠ¹ì • Task ìš°ì„  ì™„ë£Œ í•„ìš” ì‹œ
```

#### ëª¨ë“œ ì „í™˜

**ëª…ë ¹ì–´:**
```bash
mode design   # ì„¤ê³„ ëª¨ë“œë¡œ ì „í™˜
mode quick    # ë¹ ë¥¸ ê°œë°œ ëª¨ë“œë¡œ ì „í™˜
mode develop  # ì „ì²´ ê°œë°œ ëª¨ë“œë¡œ ì „í™˜
mode force    # ê°•ì œ ëª¨ë“œë¡œ ì „í™˜
```

**Function Key:**
- `F7`: ëª¨ë“œ ìˆœí™˜ (design â†’ quick â†’ develop â†’ force â†’ design)

#### ëª¨ë“œ í‘œì‹œ UI

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  orchay - Task Scheduler                   [MODE: quick]      â•‘
â•‘  Workers: 3 | Queue: 5 | Completed: 12     F7: ëª¨ë“œ ì „í™˜      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

ëª¨ë“œ ìƒ‰ìƒ í‘œì‹œ:
- `[MODE: design]` - ì²­ìƒ‰ (#3b82f6)
- `[MODE: quick]` - ë…¹ìƒ‰ (#22c55e)
- `[MODE: develop]` - ë³´ë¼ìƒ‰ (#8b5cf6)
- `[MODE: force]` - í™©ìƒ‰ (#f59e0b)

### 3.9 ì‘ì—… ì¤‘ ìƒíƒœ ê´€ë¦¬

í˜„ì¬ Workerê°€ ì²˜ë¦¬ ì¤‘ì¸ Taskì™€ ì§„í–‰ ë‹¨ê³„ë¥¼ ì¶”ì í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

#### ì €ì¥ ìœ„ì¹˜

`.orchay/logs/orchay-active.json`

#### ë°ì´í„° êµ¬ì¡°

```json
{
  "activeTasks": {
    "TSK-01-01-01": {
      "worker": 1,
      "startedAt": "2025-12-28T10:00:00",
      "currentStep": "build"
    },
    "TSK-01-02-01": {
      "worker": 2,
      "startedAt": "2025-12-28T10:05:00",
      "currentStep": "start"
    }
  }
}
```

#### í•„ë“œ ì„¤ëª…

| í•„ë“œ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `worker` | number | ì‘ì—… ì¤‘ì¸ Worker pane ë²ˆí˜¸ |
| `startedAt` | string | Task ì‹œì‘ ì‹œê°„ (ISO 8601) |
| `currentStep` | string | í˜„ì¬ ì§„í–‰ ì¤‘ì¸ /wf ëª…ë ¹ì–´ |

#### currentStep ê°’

| ê°’ | ì„¤ëª… |
|---|------|
| `start` | ì„¤ê³„ ì‹œì‘ (/wf:start) |
| `draft` | ìƒì„¸ ì„¤ê³„ (/wf:draft) |
| `review` | ë¦¬ë·° (/wf:review) |
| `apply` | ë¦¬ë·° ë°˜ì˜ (/wf:apply) |
| `approve` | ìŠ¹ì¸ (/wf:approve) |
| `build` | êµ¬í˜„ (/wf:build) |
| `audit` | ì½”ë“œ ë¦¬ë·° (/wf:audit) |
| `patch` | íŒ¨ì¹˜ ë°˜ì˜ (/wf:patch) |
| `test` | í…ŒìŠ¤íŠ¸ (/wf:test) |
| `done` | ì™„ë£Œ ì²˜ë¦¬ (/wf:done) |

#### ìƒëª…ì£¼ê¸°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ì‘ì—… ì¤‘ ìƒíƒœ ìƒëª…ì£¼ê¸°                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. ë“±ë¡ (Task ë¶„ë°° ì‹œ)                                          â”‚
â”‚     â””â”€â”€ worker, startedAt, currentStep ê¸°ë¡                     â”‚
â”‚                                                                 â”‚
â”‚  2. ë‹¨ê³„ ê°±ì‹  (ê° /wf ëª…ë ¹ì–´ ì „ì†¡ ì‹œ)                             â”‚
â”‚     â””â”€â”€ currentStep ì—…ë°ì´íŠ¸                                     â”‚
â”‚                                                                 â”‚
â”‚  3. í•´ì œ (ORCHAY_DONE ì‹ í˜¸ ê°ì§€ ì‹œ)                               â”‚
â”‚     â””â”€â”€ activeTasksì—ì„œ í•´ë‹¹ Task ì‚­ì œ                           â”‚
â”‚                                                                 â”‚
â”‚  4. ì´ˆê¸°í™” (ìŠ¤ì¼€ì¤„ëŸ¬ ì‹œì‘ ì‹œ)                                     â”‚
â”‚     â””â”€â”€ íŒŒì¼ ë¹„ìš°ê¸° ë˜ëŠ” ì‚­ì œ (ì´ì „ ì„¸ì…˜ ìƒíƒœ í´ë¦¬ì–´)              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ìƒíƒœ ê´€ë¦¬ ë¡œì§

â†’ ì½”ë“œ ì°¸ì¡°: [orchay-code-reference.md#ìƒíƒœ-íŒŒì¼-êµ¬ì¡°](orchay-code-reference.md#ìƒíƒœ-íŒŒì¼-êµ¬ì¡°)

#### UI ì—°ë™

WBS ê¸°ë°˜ UIì—ì„œ `orchay-active.json` íŒŒì¼ì„ ëª¨ë‹ˆí„°ë§í•˜ì—¬:
- `activeTasks`ì— ìˆëŠ” TaskëŠ” **ìŠ¤í”¼ë„ˆ ì•„ì´ì½˜** í‘œì‹œ
- `currentStep` ê°’ìœ¼ë¡œ í˜„ì¬ ì§„í–‰ ë‹¨ê³„ í‘œì‹œ ê°€ëŠ¥
- íŒŒì¼ ë³€ê²½ ê°ì§€ (polling ë˜ëŠ” file watcher)ë¡œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸

### 3.10 ìŠ¤ì¼€ì¤„ëŸ¬ ìƒíƒœ ë° ì›Œì»¤ ì œì–´

ìŠ¤ì¼€ì¤„ëŸ¬ì™€ ê°œë³„ ì›Œì»¤ì˜ ìƒíƒœë¥¼ ì œì–´í•˜ê³  í‘œì‹œí•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

#### ìŠ¤ì¼€ì¤„ëŸ¬ ìƒíƒœ (SchedulerState)

| ìƒíƒœ | ì•„ì´ì½˜ | ìƒ‰ìƒ | ì„¤ëª… |
|------|--------|------|------|
| `running` | â–¶ | #22c55e (ë…¹ìƒ‰) | ì •ìƒ ë™ì‘ ì¤‘ |
| `paused` | â¸ | #f59e0b (í™©ìƒ‰) | ì¼ì‹œì •ì§€ (ìƒˆ Task ë¶„ë°° ì•ˆ í•¨) |
| `stopped` | â¹ | #ef4444 (ì ìƒ‰) | ì™„ì „ ì¤‘ì§€ |

#### ì›Œì»¤ ë‹¨ìœ„ Pause/Resume

ê°œë³„ Workerë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì¼ì‹œì •ì§€/ì¬ê°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ê¸°ëŠ¥:**
- ìˆ˜ë™ ì¼ì‹œì •ì§€ëœ WorkerëŠ” `is_available()` ë©”ì„œë“œì—ì„œ `False` ë°˜í™˜
- ìƒˆ Task ë¶„ë°° ëŒ€ìƒì—ì„œ ì œì™¸
- í˜„ì¬ ì§„í–‰ ì¤‘ì¸ TaskëŠ” ê³„ì† ì™„ë£Œ (ê°•ì œ ì¤‘ë‹¨ ì•„ë‹˜)

**ìƒíƒœ íŒŒì¼:**

```json
{
  "activeTasks": { ... },
  "pausedWorkers": [2, 3],
  "schedulerState": "running"
}
```

#### TUI ì¡°ì‘

| í‚¤ | ë™ì‘ |
|-----|------|
| **F4** | Workers ì¸í„°ë™í‹°ë¸Œ ëª¨ë“œ í† ê¸€ |
| **1~5** | í•´ë‹¹ ë²ˆí˜¸ì˜ Worker ì„ íƒ ë° ì¸í„°ë™í‹°ë¸Œ ëª¨ë“œ ì§„ì… |
| **â†‘/â†“** | ì¸í„°ë™í‹°ë¸Œ ëª¨ë“œì—ì„œ Worker ì„ íƒ ì´ë™ |
| **P** | ì„ íƒëœ Workerì˜ pause/resume í† ê¸€ |
| **Enter** | ì„ íƒëœ Workerì˜ pause/resume í† ê¸€ |
| **ESC** | ì¸í„°ë™í‹°ë¸Œ ëª¨ë“œ ì¢…ë£Œ |
| **F9** | ìŠ¤ì¼€ì¤„ëŸ¬ ì „ì²´ ì¼ì‹œì •ì§€/ì¬ê°œ |

#### Worker íŒ¨ë„ í‘œì‹œ

```
  Workers (â†‘â†“: ì„ íƒ  P: Pause/Resume  ESC: ë‹«ê¸°)
  â–¶ Worker 1  â—  idle      -                     Ready for next task
    Worker 2  â—  busy  ğŸ›‘  TSK-01-01 (build)    Manually paused (P to resume)
    Worker 3  â—  idle      -                     Ready for next task
```

- `â–¶`: í˜„ì¬ ì„ íƒëœ Worker
- `ğŸ›‘`: ìˆ˜ë™ ì¼ì‹œì •ì§€ ìƒíƒœ

### 3.11 ë¬¸ì„œ ë·°ì–´ (Markdown Rendering)

ì›¹ UIì—ì„œ Task ê´€ë ¨ Markdown ë¬¸ì„œë¥¼ VS Code ìˆ˜ì¤€ìœ¼ë¡œ ë Œë”ë§í•©ë‹ˆë‹¤.

#### ë Œë”ë§ ë°©ì‹

| í•­ëª© | ì„¤ëª… |
|------|------|
| ë Œë”ë§ ìœ„ì¹˜ | ì„œë²„ ì‚¬ì´ë“œ (Python) |
| íŒŒì„œ | markdown-it-py (GFM í˜¸í™˜) |
| ì½”ë“œ í•˜ì´ë¼ì´íŒ… | Pygments (598ê°œ ì–¸ì–´, monokai í…Œë§ˆ) |
| ë‹¤ì´ì–´ê·¸ë¨ | Mermaid.js (í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ) |

#### ì§€ì› ê¸°ëŠ¥ (GFM)

| ê¸°ëŠ¥ | ë¬¸ë²• | ë Œë”ë§ |
|------|------|--------|
| í…Œì´ë¸” | `\| A \| B \|` | HTML `<table>` |
| ì²´í¬ë¦¬ìŠ¤íŠ¸ | `- [x] Done` | ì²´í¬ë°•ìŠ¤ |
| ì·¨ì†Œì„  | `~~deleted~~` | `<del>` íƒœê·¸ |
| ê°ì£¼ | `[^1]` | í•˜ë‹¨ ê°ì£¼ |
| ìë™ ë§í¬ | `https://...` | í´ë¦­ ê°€ëŠ¥ ë§í¬ |

#### ì½”ë“œ ë¸”ë¡ í•˜ì´ë¼ì´íŒ…

```markdown
```python
def hello():
    print("world")
```
```

- ì–¸ì–´ ìë™ ê°ì§€ (lang ë¯¸ì§€ì • ì‹œ)
- Pygments monokai í…Œë§ˆ ì ìš©
- 598ê°œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ ì§€ì›

#### Mermaid ë‹¤ì´ì–´ê·¸ë¨

```markdown
```mermaid
graph TD
  A-->B
```
```

- ì„œë²„ì—ì„œ `language-mermaid` í´ë˜ìŠ¤ë¡œ íŒ¨ìŠ¤ìŠ¤ë£¨
- í´ë¼ì´ì–¸íŠ¸ì—ì„œ mermaid.jsë¡œ ë Œë”ë§
- ë‹¤í¬ í…Œë§ˆ ìë™ ì ìš©

#### API ì—”ë“œí¬ì¸íŠ¸

| ì—”ë“œí¬ì¸íŠ¸ | ì‘ë‹µ |
|------------|------|
| `GET /api/document/{task_id}/{doc_name}` | `.md`: HTMLResponse (ë Œë”ë§ë¨) |
| | ì´ë¯¸ì§€: FileResponse |
| `GET /api/pygments.css` | Pygments í…Œë§ˆ CSS |

#### ìŠ¤íƒ€ì¼

- `/static/markdown.css`: VS Code ë‹¤í¬ í…Œë§ˆ ê¸°ë°˜ prose ìŠ¤íƒ€ì¼
- `/api/pygments.css`: ì½”ë“œ í•˜ì´ë¼ì´íŒ… CSS (monokai)

---

## 4. ìƒíƒœ â†’ ëª…ë ¹ì–´ ë§¤í•‘

| ìƒíƒœ | ì¹´í…Œê³ ë¦¬ | ì‹¤í–‰ ëª…ë ¹ì–´ |
|------|---------|------------|
| `[ ]` | development | `/wf:start {ID}` |
| `[ ]` | defect | `/wf:start {ID}` |
| `[ ]` | infrastructure | `/wf:start {ID}` |
| `[dd]` | development | `/wf:approve {ID}` |
| `[ap]` | development | `/wf:build {ID}` |
| `[im]` | development | `/wf:done {ID}` |
| `[an]` | defect | `/wf:fix {ID}` |
| `[fx]` | defect | `/wf:verify {ID}` |
| `[vf]` | defect | `/wf:done {ID}` |
| `[dd]` | infrastructure | `/wf:build {ID}` |
| `[im]` | infrastructure | `/wf:done {ID}` |

---

## 5. ì„¤ì •

### 5.1 ì„¤ì • íŒŒì¼

`.orchay/settings/orchay.json`

```json
{
  "workers": 3,
  "interval": 5,
  "category": null,
  "project": null,
  "detection": {
    "donePattern": "ORCHAY_DONE:([^:]+):(\\w+):(success|error)(?::(.+))?",
    "promptPatterns": ["^>\\s*$", "â•­â”€", "â¯"],
    "pausePatterns": [
      "rate.*limit", "please.*wait", "try.*again",
      "weekly.*limit.*reached", "resets.*at",
      "context.*limit", "conversation.*too.*long",
      "overloaded", "capacity"
    ],
    "errorPatterns": ["Error:", "Failed:", "Exception:", "âŒ", "fatal:"],
    "questionPatterns": ["\\?\\s*$", "\\(y/n\\)", "ì„ íƒ"],
    "readLines": 50
  },
  "recovery": {
    "resumeText": "ê³„ì†",
    "defaultWaitTime": 60,
    "contextLimitWait": 5,
    "maxRetries": 3,
    "retryInterval": 5,
    "resetTimePatterns": [
      "resets\\s+(\\w+\\s+\\d+)\\s+at\\s+(\\d+:\\d+(?:am|pm)?)",
      "reset\\s+at\\s+(\\w+\\s+\\d+),?\\s*(\\d+:?\\d*\\s*(?:am|pm)?)"
    ]
  },
  "dispatch": {
    "clearBeforeDispatch": true,
    "clearWaitTime": 2
  },
  "history": {
    "enabled": true,
    "storagePath": ".orchay/logs/orchay-history.jsonl",
    "maxEntries": 1000,
    "captureLines": 500
  },
  "execution": {
    "mode": "quick",
    "allowModeSwitch": true
  }
}
```

### 5.2 ì„¤ì • í•­ëª©

#### ê¸°ë³¸ ì„¤ì •

| ì„¤ì • | íƒ€ì… | ì„¤ëª… | ê¸°ë³¸ê°’ |
|------|------|------|--------|
| `workers` | number | Worker pane ìˆ˜ | 3 |
| `interval` | number | ëª¨ë‹ˆí„°ë§ ê°„ê²© (ì´ˆ) | 5 |
| `category` | string\|null | ì¹´í…Œê³ ë¦¬ í•„í„° (null=ì „ì²´) | null |
| `project` | string\|null | í”„ë¡œì íŠ¸ ê²½ë¡œ (null=ìë™) | null |

#### ìƒíƒœ ê°ì§€ ì„¤ì • (detection)

| ì„¤ì • | íƒ€ì… | ì„¤ëª… | ê¸°ë³¸ê°’ |
|------|------|------|--------|
| `donePattern` | string | wf ì™„ë£Œ ì‹ í˜¸ ê°ì§€ ì •ê·œì‹ | `"ORCHAY_DONE:..."` |
| `promptPatterns` | string[] | idle ìƒíƒœ ê°ì§€ ì •ê·œì‹ | `["^>\\s*$", "â•­â”€", "â¯"]` |
| `pausePatterns` | string[] | ì¼ì‹œ ì¤‘ë‹¨ ê°ì§€ ì •ê·œì‹ | (ë ˆì´íŠ¸/í† í° ë¦¬ë°‹ íŒ¨í„´) |
| `errorPatterns` | string[] | ì—ëŸ¬ ê°ì§€ ì •ê·œì‹ | `["Error:", "Failed:", ...]` |
| `questionPatterns` | string[] | ì§ˆë¬¸ ëŒ€ê¸° ê°ì§€ ì •ê·œì‹ | `["\\?\\s*$", "(y/n)", ...]` |
| `readLines` | number | pane ì¶œë ¥ ì½ê¸° ì¤„ ìˆ˜ | 50 |

#### ë³µêµ¬ ì„¤ì • (recovery)

| ì„¤ì • | íƒ€ì… | ì„¤ëª… | ê¸°ë³¸ê°’ |
|------|------|------|--------|
| `resumeText` | string | ì¬ê°œ ì‹œ ì „ì†¡í•  í…ìŠ¤íŠ¸ | `"ê³„ì†"` |
| `defaultWaitTime` | number | ë ˆì´íŠ¸ ë¦¬ë°‹ ëŒ€ê¸° ì‹œê°„ (ì´ˆ) | 60 |
| `contextLimitWait` | number | ì»¨í…ìŠ¤íŠ¸ ë¦¬ë°‹ ëŒ€ê¸° ì‹œê°„ (ì´ˆ) | 5 |
| `maxRetries` | number | ìµœëŒ€ ì¬ì‹œë„ íšŸìˆ˜ | 3 |
| `retryInterval` | number | ì¬ì‹œë„ ê°„ê²© (ì´ˆ) | 5 |
| `resetTimePatterns` | string[] | Reset ì‹œê°„ ì¶”ì¶œ ì •ê·œì‹ | (ì•„ë˜ ì°¸ì¡°) |

#### ë¶„ë°° ì„¤ì • (dispatch)

| ì„¤ì • | íƒ€ì… | ì„¤ëª… | ê¸°ë³¸ê°’ |
|------|------|------|--------|
| `clearBeforeDispatch` | boolean | Task ë¶„ë°° ì „ /clear ì „ì†¡ | true |
| `clearWaitTime` | number | /clear í›„ ëŒ€ê¸° ì‹œê°„ (ì´ˆ) | 2 |

#### íˆìŠ¤í† ë¦¬ ì„¤ì • (history)

| ì„¤ì • | íƒ€ì… | ì„¤ëª… | ê¸°ë³¸ê°’ |
|------|------|------|--------|
| `enabled` | boolean | íˆìŠ¤í† ë¦¬ ì €ì¥ í™œì„±í™” | true |
| `storagePath` | string | íˆìŠ¤í† ë¦¬ íŒŒì¼ ê²½ë¡œ | `.orchay/logs/orchay-history.jsonl` |
| `maxEntries` | number | ìµœëŒ€ ì €ì¥ í•­ëª© ìˆ˜ | 1000 |
| `captureLines` | number | pane ì¶œë ¥ ìº¡ì²˜ ì¤„ ìˆ˜ | 500 |

#### ì‹¤í–‰ ì„¤ì • (execution)

| ì„¤ì • | íƒ€ì… | ì„¤ëª… | ê¸°ë³¸ê°’ |
|------|------|------|--------|
| `mode` | string | ì‹¤í–‰ ëª¨ë“œ: "design", "quick", "develop", "force" | "quick" |
| `allowModeSwitch` | boolean | ì‹¤í–‰ ì¤‘ ëª¨ë“œ ì „í™˜ í—ˆìš© | true |

â†’ ëª¨ë“œ ìƒì„¸: [workflows.json](../../settings/workflows.json) `executionModes` ì°¸ì¡°

---

## 6. CLI

### 6.1 íŒŒì¼ êµ¬ì„±

```
.orchay/
â””â”€â”€ bin/
    â”œâ”€â”€ orchay.py        # Python í¬ë¡œìŠ¤í”Œë«í¼ ìŠ¤í¬ë¦½íŠ¸
    â”œâ”€â”€ orchay           # Unix wrapper
    â””â”€â”€ orchay.ps1       # Windows wrapper
```

### 6.2 ì‚¬ìš©ë²•

```bash
# Unix/macOS
./orchay                    # ìŠ¤ì¼€ì¤„ëŸ¬ ì‹œì‘
./orchay --dry-run          # ë¯¸ë¦¬ë³´ê¸° (ë¶„ë°° ì•ˆ í•¨)

# Windows PowerShell
.\orchay.ps1
.\orchay.ps1 -DryRun

# íˆìŠ¤í† ë¦¬ ì¡°íšŒ
./orchay history              # ìµœê·¼ ì™„ë£Œëœ ì‘ì—… ë¦¬ìŠ¤íŠ¸
./orchay history TSK-01-01-01 # íŠ¹ì • ì‘ì—…ì˜ ìƒì„¸ ì¶œë ¥ ë³´ê¸°
./orchay history --limit 50   # ìµœê·¼ 50ê°œ ì‘ì—… ë¦¬ìŠ¤íŠ¸
./orchay history --clear      # íˆìŠ¤í† ë¦¬ ì „ì²´ ì‚­ì œ
```

### 6.3 CLI ì‚¬ìš©ë²•

```bash
orchay [PROJECT] [OPTIONS]
```

| ì¸ì/ì˜µì…˜ | ì„¤ëª… |
|----------|------|
| `PROJECT` | í”„ë¡œì íŠ¸ëª… (`.orchay/projects/{PROJECT}/` ì‚¬ìš©, ê¸°ë³¸: orchay) |
| `-w, --workers N` | workers ì˜¤ë²„ë¼ì´ë“œ |
| `-i, --interval S` | interval ì˜¤ë²„ë¼ì´ë“œ |
| `-m, --mode MODE` | ì‹¤í–‰ ëª¨ë“œ (design/quick/develop/force) |
| `--dry-run` | ë¯¸ë¦¬ë³´ê¸° (ë¶„ë°° ì•ˆ í•¨) |
| `-v, --verbose` | ìƒì„¸ ë¡œê·¸ ì¶œë ¥ |

**ì‚¬ìš© ì˜ˆì‹œ**:
```bash
# orchay í”„ë¡œì íŠ¸ ì‹¤í–‰
uv run python -m orchay orchay --dry-run

# orchay-flutter í”„ë¡œì íŠ¸ ì‹¤í–‰
uv run python -m orchay orchay-flutter -m develop

# ê¸°ë³¸ê°’ (orchay í”„ë¡œì íŠ¸)
uv run python -m orchay --dry-run
```

**ìš°ì„ ìˆœìœ„**: CLI ì˜µì…˜ > ì„¤ì • íŒŒì¼ > ê¸°ë³¸ê°’

### 6.4 exec ì„œë¸Œì»¤ë§¨ë“œ (ì‹¤í–‰ ìƒíƒœ ê´€ë¦¬)

ì›Œí¬í”Œë¡œìš°(`/wf:*`) ëª…ë ¹ì–´ ì‹¤í–‰ ì‹œ Task ì‹¤í–‰ ìƒíƒœë¥¼ ì¶”ì í•˜ê¸° ìœ„í•œ ì„œë¸Œì»¤ë§¨ë“œì…ë‹ˆë‹¤.
Claude Code Workerë“¤ì´ ì–´ë–¤ Taskë¥¼ ì‹¤í–‰ ì¤‘ì¸ì§€ `.orchay/logs/orchay-active.json`ì— ê¸°ë¡í•©ë‹ˆë‹¤.

```bash
# Task ì‹¤í–‰ ì‹œì‘ ë“±ë¡
orchay exec start TSK-01-01 design

# Task ì‹¤í–‰ ì™„ë£Œ í•´ì œ
orchay exec stop TSK-01-01

# Task ë‹¨ê³„ ê°±ì‹ 
orchay exec update TSK-01-01 build

# ì‹¤í–‰ ì¤‘ì¸ Task ëª©ë¡
orchay exec list

# ëª¨ë“  ì‹¤í–‰ ìƒíƒœ ì´ˆê¸°í™”
orchay exec clear
```

| ëª…ë ¹ì–´ | ì„¤ëª… |
|--------|------|
| `exec start <task_id> <step>` | Task ì‹¤í–‰ ì‹œì‘ ë“±ë¡ |
| `exec stop <task_id>` | Task ì‹¤í–‰ ì™„ë£Œ í•´ì œ |
| `exec update <task_id> <step>` | Task ë‹¨ê³„ ê°±ì‹  |
| `exec list` | ì‹¤í–‰ ì¤‘ì¸ Task ëª©ë¡ |
| `exec clear` | ëª¨ë“  ì‹¤í–‰ ìƒíƒœ ì´ˆê¸°í™” |

**ì˜µì…˜ (start)**:
| ì˜µì…˜ | ì„¤ëª… |
|------|------|
| `-w, --worker N` | Worker ID (ê¸°ë³¸: 0) |
| `-p, --pane N` | Pane ID (ê¸°ë³¸: 0) |

**ìƒíƒœ íŒŒì¼ êµ¬ì¡°** (`.orchay/logs/orchay-active.json`):
```json
{
  "activeTasks": {
    "TSK-01-01": {
      "worker": 1,
      "paneId": 2,
      "startedAt": "2025-12-28T10:00:00",
      "currentStep": "design"
    }
  }
}
```

**ì›Œí¬í”Œë¡œìš° í›… ì—°ë™**:
- `/wf:*` ëª…ë ¹ì–´ ì‹œì‘ ì‹œ: `orchay exec start {TASK_ID} {COMMAND}`
- `/wf:*` ëª…ë ¹ì–´ ì™„ë£Œ ì‹œ: `orchay exec stop {TASK_ID}`

### 6.5 ì„¤ì¹˜

```bash
# PATHì— ì¶”ê°€ (Unix)
echo 'export PATH="$PATH:$HOME/.orchay/bin"' >> ~/.bashrc

# PowerShell í”„ë¡œí•„ì— ì¶”ê°€ (Windows)
[Environment]::SetEnvironmentVariable("Path", $env:Path + ";$HOME\.orchay\bin", "User")
```

---

## 7. êµ¬í˜„

### 7.1 Python ì„ íƒ ì´ìœ 

| ì¥ì  | ì„¤ëª… |
|------|------|
| í¬ë¡œìŠ¤í”Œë«í¼ | Windows, macOS, Linux ë‹¨ì¼ ì½”ë“œ |
| ë§ˆí¬ë‹¤ìš´ íŒŒì‹± | wbs.md íŒŒì‹± ìš©ì´ (regex ë˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬) |
| JSON ì²˜ë¦¬ | settings íŒŒì¼ ì²˜ë¦¬ ë„¤ì´í‹°ë¸Œ ì§€ì› |
| ê°€ë…ì„± | ë³µì¡í•œ ë¡œì§ë„ ìœ ì§€ë³´ìˆ˜ ìš©ì´ |
| ì˜ì¡´ì„± | Python 3.xë§Œ í•„ìš” (ì¶”ê°€ íŒ¨í‚¤ì§€ ë¶ˆí•„ìš”) |

### 7.2 ì˜ì¡´ì„±

- Python 3.8+
- í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ì‚¬ìš© (argparse, json, re, subprocess, time)
- ì™¸ë¶€ íŒ¨í‚¤ì§€ ë¶ˆí•„ìš”

### 7.3 WezTerm CLI ëª…ë ¹ì–´

| ëª…ë ¹ì–´ | ì„¤ëª… |
|--------|------|
| `wezterm cli list` | í˜„ì¬ pane ëª©ë¡ ë° ID ì¡°íšŒ |
| `wezterm cli get-text --pane-id N` | pane ì¶œë ¥ í…ìŠ¤íŠ¸ ì½ê¸° |
| `wezterm cli send-text --no-paste --pane-id N "text"` | paneì— í…ìŠ¤íŠ¸ ì „ì†¡ |

---

## 8. ìš´ì˜

### 8.1 ë³‘ë ¬ ì‹¤í–‰ ê·œì¹™

| ê·œì¹™ | ì„¤ëª… |
|------|------|
| ì˜ì¡´ì„± ê²€ì‚¬ | dependsì— ëª…ì‹œëœ ì„ í–‰ Taskê°€ ì™„ë£Œë˜ì§€ ì•Šìœ¼ë©´ ì œì™¸ |
| ì¤‘ë³µ ë°©ì§€ | ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ TaskëŠ” ë¶„ë°° ëŒ€ìƒì—ì„œ ì œì™¸ |
| ìµœëŒ€ Nê°œ | ë™ì‹œ ì‹¤í–‰ì€ Worker pane ìˆ˜ë§Œí¼ |
| ìƒíƒœ ë¬´ê´€ | [dd], [im] ë“± ì§„í–‰ ì¤‘ ìƒíƒœë„ ë‹¤ìŒ ë‹¨ê³„ë¡œ ë¶„ë°° ê°€ëŠ¥ |

### 8.2 ì£¼ì˜ì‚¬í•­

| í•­ëª© | ì„¤ëª… |
|------|------|
| pane ID | WezTerm ì¬ì‹œì‘ ì‹œ pane IDê°€ ë³€ê²½ë  ìˆ˜ ìˆìŒ â†’ orchayê°€ ìë™ ì¡°íšŒ |
| ë™ì¼ Task ê¸ˆì§€ | ë™ì¼ Taskë¥¼ ì—¬ëŸ¬ paneì—ì„œ ë™ì‹œ ì‹¤í–‰ ê¸ˆì§€ |
| wbs.md ì¶©ëŒ | ë™ì‹œ ìˆ˜ì • ì‹œ Git ì¶©ëŒ ê°€ëŠ¥ â†’ ìˆœì°¨ì  ìƒíƒœ ì—…ë°ì´íŠ¸ ê¶Œì¥ |
| ë¦¬ì†ŒìŠ¤ | Claude Code Nê°œ ë™ì‹œ ì‹¤í–‰ ì‹œ ë©”ëª¨ë¦¬/CPU ì‚¬ìš©ëŸ‰ ê³ ë ¤ |

### 8.3 í™˜ê²½ ë³€ìˆ˜

| ë³€ìˆ˜ëª… | ì„¤ëª… | ê¸°ë³¸ê°’ |
|--------|------|--------|
| `ORCHAY_ROOT` | .orchay í´ë” ê²½ë¡œ | ìë™ íƒìƒ‰ |
| `NUMBER_OF_WORKING_PANE` | Claude pane ê°œìˆ˜ | 3 |

### 8.4 ì—ëŸ¬ ì²˜ë¦¬ ë° ë³µêµ¬

#### ì—ëŸ¬ ìœ í˜• ë° ëŒ€ì‘

| ì—ëŸ¬ ìœ í˜• | ê°ì§€ ë°©ë²• | ìŠ¤ì¼€ì¤„ëŸ¬ ëŒ€ì‘ | ë³µêµ¬ ë°©ë²• |
|----------|----------|-------------|----------|
| **ì›Œí¬í”Œë¡œìš° ì‹¤íŒ¨** | Worker ì¶œë ¥ì— ì—ëŸ¬ íŒ¨í„´ | Task blocked ë§ˆí‚¹, ìŠ¤í‚µ | ìˆ˜ë™ ê°œì… í›„ ì¬ì‹œì‘ |
| **Worker ë¬´ì‘ë‹µ** | íƒ€ì„ì•„ì›ƒ (ì„¤ì • ê°€ëŠ¥) | í•´ë‹¹ Worker ë¹„í™œì„±í™”, Task ì¬í | pane ì¬ì‹œì‘ |
| **wbs.md íŒŒì‹± ì˜¤ë¥˜** | íŒŒì‹± ì˜ˆì™¸ ë°œìƒ | ì´ì „ ìƒíƒœ ìœ ì§€, ê²½ê³  ì¶œë ¥ | íŒŒì¼ ìˆ˜ì • í›„ ìë™ ì¬íŒŒì‹± |
| **wbs.md ì¶©ëŒ** | Git ì¶©ëŒ ë§ˆì»¤ ê°ì§€ | ìŠ¤ì¼€ì¤„ë§ ì¼ì‹œ ì¤‘ì§€ | ì¶©ëŒ í•´ê²° í›„ ì¬ê°œ |
| **pane ì¢…ë£Œ** | wezterm cli list ì¡°íšŒ | Worker í’€ì—ì„œ ì œê±° | ìƒˆ pane ìƒì„± ë˜ëŠ” ëŒ€ê¸° |
| **ë„¤íŠ¸ì›Œí¬/API ì˜¤ë¥˜** | Claude Code ì—ëŸ¬ ì¶œë ¥ | Task ì¬ì‹œë„ ë˜ëŠ” ìŠ¤í‚µ | ìë™ ì¬ì‹œë„ (ìµœëŒ€ 3íšŒ) |

#### ì—ëŸ¬ ë¡œê¹…

```
[12:15:30] âŒ Worker 2 ì—ëŸ¬ ë°œìƒ
           Task: TSK-01-02-03
           ì—ëŸ¬: TypeError: Cannot read property 'x' of undefined
           ëŒ€ì‘: Taskë¥¼ blocked ìƒíƒœë¡œ ë§ˆí‚¹, ìŠ¤í‚µ

[12:15:35] âš ï¸ Worker 2 ë³µêµ¬ ì™„ë£Œ, ë‹¤ìŒ Task ë¶„ë°°
```

#### ì—ëŸ¬ íŒ¨í„´ ì„¤ì •

```json
{
  "errorPatterns": [
    "Error:",
    "Failed:",
    "Exception:",
    "âŒ",
    "fatal:"
  ],
  "retryCount": 3,
  "retryDelay": 5
}
```

### 8.5 ìƒëª…ì£¼ê¸° ê´€ë¦¬

#### ìŠ¤ì¼€ì¤„ëŸ¬ ìƒëª…ì£¼ê¸°

![ìŠ¤ì¼€ì¤„ëŸ¬ ìƒëª…ì£¼ê¸°](diagrams/06-scheduler-lifecycle.svg)

<details>
<summary>í…ìŠ¤íŠ¸ ë‹¤ì´ì–´ê·¸ë¨</summary>

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ìŠ¤ì¼€ì¤„ëŸ¬(orchay) ìƒëª…ì£¼ê¸°                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [ì‹œì‘]                                                         â”‚
â”‚    â”‚                                                            â”‚
â”‚    â”œâ”€â”€â–¶ 1. ì„¤ì • íŒŒì¼ ë¡œë“œ (orchay.json)                          â”‚
â”‚    â”œâ”€â”€â–¶ 2. wbs.md ì´ˆê¸° íŒŒì‹±                                      â”‚
â”‚    â”œâ”€â”€â–¶ 3. Worker pane íƒì§€ (wezterm cli list)                  â”‚
â”‚    â”œâ”€â”€â–¶ 4. ìŠ¤ì¼€ì¤„ í ì´ˆê¸°í™”                                      â”‚
â”‚    â””â”€â”€â–¶ 5. ì´ë²¤íŠ¸ ë£¨í”„ ì‹œì‘                                      â”‚
â”‚                                                                 â”‚
â”‚  [ì‹¤í–‰ ì¤‘]                                                       â”‚
â”‚    â”‚                                                            â”‚
â”‚    â””â”€â”€â–¶ ì´ë²¤íŠ¸ ë£¨í”„ ë°˜ë³µ (ëª¨ë‹ˆí„°ë§ â†’ ë¶„ë°° â†’ ëŒ€ê¸°)                 â”‚
â”‚                                                                 â”‚
â”‚  [ì¢…ë£Œ]                                                          â”‚
â”‚    â”‚                                                            â”‚
â”‚    â”œâ”€â”€â–¶ 1. Ctrl+C ë˜ëŠ” SIGTERM ìˆ˜ì‹                               â”‚
â”‚    â”œâ”€â”€â–¶ 2. ì§„í–‰ ì¤‘ Task ìƒíƒœ ì¶œë ¥                                 â”‚
â”‚    â”œâ”€â”€â–¶ 3. í˜„ì¬ í ìƒíƒœ ì €ì¥ (ì„ íƒ)                               â”‚
â”‚    â””â”€â”€â–¶ 4. ì •ë¦¬ ë° ì¢…ë£Œ                                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

</details>

#### ì›Œì»¤ ìƒëª…ì£¼ê¸°

![ì›Œì»¤ ìƒëª…ì£¼ê¸°](diagrams/07-worker-lifecycle.svg)

<details>
<summary>í…ìŠ¤íŠ¸ ë‹¤ì´ì–´ê·¸ë¨</summary>

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì›Œì»¤(Claude Code) ìƒëª…ì£¼ê¸°                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [ì‹œì‘]                                                         â”‚
â”‚    â”‚                                                            â”‚
â”‚    â”œâ”€â”€â–¶ 1. WezTerm paneì—ì„œ Claude Code ì‹¤í–‰                     â”‚
â”‚    â”‚       $ claude                                              â”‚
â”‚    â””â”€â”€â–¶ 2. í”„ë¡¬í”„íŠ¸ ëŒ€ê¸° (idle ìƒíƒœ)                              â”‚
â”‚                                                                 â”‚
â”‚  [ì‘ì—… ë£¨í”„]                                                     â”‚
â”‚    â”‚                                                            â”‚
â”‚    â”œâ”€â”€â–¶ ëª…ë ¹ ìˆ˜ì‹  (/wf:start TSK-XX-XX)                          â”‚
â”‚    â”œâ”€â”€â–¶ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰                                          â”‚
â”‚    â”œâ”€â”€â–¶ wbs.md ìƒíƒœ ì—…ë°ì´íŠ¸                                     â”‚
â”‚    â””â”€â”€â–¶ í”„ë¡¬í”„íŠ¸ ë³µê·€ (idle) â†’ ë‹¤ìŒ ëª…ë ¹ ëŒ€ê¸°                     â”‚
â”‚                                                                 â”‚
â”‚  [ì¢…ë£Œ]                                                          â”‚
â”‚    â”‚                                                            â”‚
â”‚    â”œâ”€â”€â–¶ ë°©ë²• 1: pane ë‹«ê¸°                                        â”‚
â”‚    â”œâ”€â”€â–¶ ë°©ë²• 2: /exit ëª…ë ¹                                       â”‚
â”‚    â””â”€â”€â–¶ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ê°ì§€ â†’ Worker í’€ì—ì„œ ì œê±°                      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

</details>

#### ì¬ì‹œì‘ ì‹œë‚˜ë¦¬ì˜¤

| ì‹œë‚˜ë¦¬ì˜¤ | ì„¤ëª… | ë³µêµ¬ ì ˆì°¨ |
|----------|------|----------|
| **ìŠ¤ì¼€ì¤„ëŸ¬ ì¬ì‹œì‘** | orchay í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ í›„ ì¬ì‹¤í–‰ | wbs.mdì—ì„œ í˜„ì¬ ìƒíƒœ ë³µì›, ì§„í–‰ ì¤‘ Task ê°ì§€ |
| **Worker ì¬ì‹œì‘** | Claude Code pane ì¢…ë£Œ í›„ ì¬ìƒì„± | ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ìë™ ê°ì§€, ëŒ€ê¸° ì¤‘ Task ì¬ë¶„ë°° |
| **ì „ì²´ ì¬ì‹œì‘** | WezTerm ì¢…ë£Œ í›„ ì¬ì‹¤í–‰ | ìŠ¤ì¼€ì¤„ëŸ¬ â†’ Worker ìˆœì„œë¡œ ì‹œì‘, ì´ì „ ìƒíƒœ ë³µì› |

#### Graceful Shutdown

```bash
# 1. ìŠ¤ì¼€ì¤„ëŸ¬ì— ì¢…ë£Œ ì‹ í˜¸ ì „ì†¡
Ctrl+C

# 2. ì¶œë ¥ ì˜ˆì‹œ
[12:30:00] ğŸ›‘ ì¢…ë£Œ ì‹ í˜¸ ìˆ˜ì‹ 
[12:30:00] ì§„í–‰ ì¤‘ Task:
           - Worker 1: TSK-01-01-03 (ì§„í–‰ë¥  50%)
           - Worker 2: TSK-01-02-01 (ì§„í–‰ë¥  80%)
           - Worker 3: idle
[12:30:00] ìŠ¤ì¼€ì¤„ í ì”ì—¬: 5ê±´
[12:30:01] orchay ì¢…ë£Œ ì™„ë£Œ
```

### 8.6 ìë™ ì¬ê°œ ë©”ì»¤ë‹ˆì¦˜

![ìë™ ì¬ê°œ íë¦„](diagrams/09-auto-resume-flow.svg)

Workerê°€ ì¼ì‹œ ì¤‘ë‹¨(paused) ìƒíƒœê°€ ë˜ì—ˆì„ ë•Œ ìë™ìœ¼ë¡œ ì¬ê°œí•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤.

#### í•µì‹¬ ì›ë¦¬

```
paused ìƒíƒœ ê°ì§€ â†’ ëŒ€ê¸° ì‹œê°„ ê³„ì‚° â†’ ëŒ€ê¸° â†’ "ê³„ì†" ì „ì†¡ â†’ ì‘ì—… ì¬ê°œ
```

#### Weekly Limit Reset ì‹œê°„ íŒŒì‹±

Claude Codeê°€ Weekly limitì— ë„ë‹¬í•˜ë©´ ë‹¤ìŒ í˜•ì‹ì˜ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤:

```
Weekly limit reached Â· resets Oct 9 at 10:30am
/upgrade to increase your usage limit.
```

ì´ ë©”ì‹œì§€ì—ì„œ reset ì‹œê°„ì„ íŒŒì‹±í•˜ì—¬ ì •í™•í•œ ëŒ€ê¸° ì‹œê°„ì„ ê³„ì‚°í•©ë‹ˆë‹¤.

â†’ ì½”ë“œ ì°¸ì¡°: [orchay-code-reference.md#rate-limit-ì²˜ë¦¬](orchay-code-reference.md#rate-limit-ì²˜ë¦¬)

#### ì¬ê°œ í…ìŠ¤íŠ¸ ì˜µì…˜

| ìƒí™© | ì „ì†¡ í…ìŠ¤íŠ¸ | ì„¤ëª… |
|------|-----------|------|
| ì¼ë°˜ ì¬ê°œ | `ê³„ì†` | í•œêµ­ì–´ í™˜ê²½ ê¸°ë³¸ê°’ |
| ì˜ë¬¸ í™˜ê²½ | `continue` | ì˜ë¬¸ Claude Code |
| ê°•ì œ ì§„í–‰ | `y` ë˜ëŠ” Enter | í™•ì¸ í”„ë¡¬í”„íŠ¸ |

#### ì¬ê°œ íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ìë™ ì¬ê°œ íë¦„                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  [paused ê°ì§€]                                                   â”‚
â”‚       â”‚                                                          â”‚
â”‚       â–¼                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚  â”‚ ëŒ€ê¸° ì‹œê°„ ê³„ì‚°   â”‚                                             â”‚
â”‚  â”‚ - Weekly limit: reset ì‹œê°„ íŒŒì‹± (resets Oct 9 at 10:30am)     â”‚
â”‚  â”‚ - ë ˆì´íŠ¸ ë¦¬ë°‹: 60ì´ˆ (ë˜ëŠ” ì¶œë ¥ì—ì„œ ì¶”ì¶œ)                        â”‚
â”‚  â”‚ - ì»¨í…ìŠ¤íŠ¸: 5ì´ˆ                                                â”‚
â”‚  â”‚ - ê¸°íƒ€: 30ì´ˆ                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚           â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚  â”‚   ëŒ€ê¸° (sleep)   â”‚                                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚           â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚  â”‚ "ê³„ì†" ì „ì†¡      â”‚                                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚           â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     ì„±ê³µ      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  ìƒíƒœ ì¬í™•ì¸     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   busy ìƒíƒœ     â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚           â”‚ ì‹¤íŒ¨                                                  â”‚
â”‚           â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     ì´ˆê³¼      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ retry_count++   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   error ìƒíƒœ    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚           â”‚ ì¬ì‹œë„                                                â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ ì²˜ìŒìœ¼ë¡œ
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ìŠ¤ì¼€ì¤„ëŸ¬ ë£¨í”„ í†µí•©

â†’ ì½”ë“œ ì°¸ì¡°: [orchay-code-reference.md#ìŠ¤ì¼€ì¤„ëŸ¬-ì´ë²¤íŠ¸-ë£¨í”„](orchay-code-reference.md#ìŠ¤ì¼€ì¤„ëŸ¬-ì´ë²¤íŠ¸-ë£¨í”„)

---

## 9. ì¶œë ¥ ì˜ˆì‹œ

### 9.1 ìŠ¤ì¼€ì¤„ëŸ¬ ì‹œì‘

```bash
$ ./orchay

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  orchay - Task Scheduler                                       â•‘
â•‘  Workers: 3 | Interval: 5s | Project: orchay-flutter           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[12:00:00] ìŠ¤ì¼€ì¤„ í ì´ˆê¸°í™” ì™„ë£Œ (5ê±´)
[12:00:00] Worker 1 (pane 1): ëŒ€ê¸° ì¤‘ â†’ TSK-01-01-01 ë¶„ë°°
[12:00:00] Worker 2 (pane 2): ëŒ€ê¸° ì¤‘ â†’ TSK-01-01-02 ë¶„ë°°
[12:00:00] Worker 3 (pane 3): ëŒ€ê¸° ì¤‘ â†’ TSK-02-01 ë¶„ë°°
[12:00:05] Worker 1: ì‘ì—… ì¤‘...
[12:00:05] Worker 2: ì‘ì—… ì¤‘...
[12:00:05] Worker 3: ì‘ì—… ì¤‘...
[12:05:30] Worker 2 (pane 2): ì™„ë£Œ ê°ì§€ â†’ TSK-02-02 ë¶„ë°°
[12:08:15] Worker 1 (pane 1): ì™„ë£Œ ê°ì§€ â†’ TSK-03-01 ë¶„ë°°
...
```

### 9.2 Dry Run

```bash
$ ./orchay --dry-run

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  orchay - Task Scheduler (DRY RUN)                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ìŠ¤ì¼€ì¤„ í (5ê±´)                                                  â”‚
â”œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ #  â”‚ Task ID       â”‚ ìƒíƒœ â”‚ ì¹´í…Œê³ ë¦¬    â”‚ ë‹¤ìŒ ì•¡ì…˜              â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ TSK-01-01-01  â”‚ [ ]  â”‚ development â”‚ /wf:start              â”‚
â”‚ 2  â”‚ TSK-01-01-02  â”‚ [ ]  â”‚ development â”‚ /wf:start              â”‚
â”‚ 3  â”‚ TSK-02-01     â”‚ [ ]  â”‚ development â”‚ /wf:start              â”‚
â”‚ 4  â”‚ TSK-02-02     â”‚ [ ]  â”‚ development â”‚ /wf:start              â”‚
â”‚ 5  â”‚ TSK-03-01     â”‚ [dd] â”‚ development â”‚ /wf:approve            â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Workers: 3 | ì´ˆê¸° ë¶„ë°°: TSK-01-01-01, TSK-01-01-02, TSK-02-01
```

---

## ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ë‚´ìš© |
|------|------|-----------|
| 1.0 | 2025-12-27 | ì´ˆê¸° PRD ì‘ì„± (ìŠ¤ì¼€ì¤„ëŸ¬ ì •ì˜) |
| 1.1 | 2025-12-27 | WBS ìƒì„¸í™” ì§€ì› ì¶”ê°€ (PRD/TRD ì—°ë™ ì†ì„±, Task ìƒì„¸ë„ ë ˆë²¨) |
| 1.2 | 2025-12-27 | ìŠ¤ì¼€ì¤„ëŸ¬/ì›Œì»¤ ì—­í•  ìƒì„¸í™” (2.3~2.5, 8.4~8.5 ì„¹ì…˜ ì¶”ê°€) |
| 1.3 | 2025-12-27 | ìƒíƒœ ê°ì§€ ë° ìë™ ì¬ê°œ ë©”ì»¤ë‹ˆì¦˜ ì¶”ê°€ |
|     |            | - ì›Œì»¤ ìƒíƒœ í™•ì¥: paused, dead ì¶”ê°€ (2.4) |
|     |            | - ìƒíƒœ ê°ì§€ ë¡œì§ ìƒì„¸í™”: íŒ¨í„´ ê¸°ë°˜ ìš°ì„ ìˆœìœ„ íŒì • (3.3) |
|     |            | - ì‘ì—… ë¶„ë°° ìˆ˜ì •: /clear í›„ ëª…ë ¹ ì „ì†¡ (3.4) |
|     |            | - ìë™ ì¬ê°œ ë©”ì»¤ë‹ˆì¦˜ ì¶”ê°€: ëŒ€ê¸° í›„ "ê³„ì†" ì „ì†¡ (8.6) |
|     |            | - ì„¤ì • íŒŒì¼ í™•ì¥: detection, recovery, dispatch ì˜µì…˜ (5) |
| 1.4 | 2025-12-27 | Weekly limit reset ì‹œê°„ íŒŒì‹± ê¸°ëŠ¥ ì¶”ê°€ |
|     |            | - ë©”ì‹œì§€ í˜•ì‹: "Weekly limit reached Â· resets Oct 9 at 10:30am" |
|     |            | - extract_reset_time() í•¨ìˆ˜ë¡œ ì •í™•í•œ ëŒ€ê¸° ì‹œê°„ ê³„ì‚° (8.6) |
|     |            | - resetTimePatterns ì„¤ì • ì¶”ê°€ (5.1) |
| 1.5 | 2025-12-27 | ì‘ì—… íˆìŠ¤í† ë¦¬ ì €ì¥ ë° ì¡°íšŒ ê¸°ëŠ¥ ì¶”ê°€ |
|     |            | - Worker ì™„ë£Œ ì‘ì—… ì¶œë ¥ ì €ì¥ (JSON Lines í˜•ì‹) (3.6) |
|     |            | - íˆìŠ¤í† ë¦¬ ì¡°íšŒ CLI ëª…ë ¹ ì¶”ê°€ (6.2) |
|     |            | - history ì„¤ì • ì˜µì…˜ ì¶”ê°€ (5.1, 5.2) |
| 1.6 | 2025-12-27 | ì¸í„°ë™í‹°ë¸Œ ëª…ë ¹ì–´ ì‹œìŠ¤í…œ ì¶”ê°€ (3.7) |
|     |            | - ì‹¤í–‰ ì¤‘ ëª…ë ¹ì–´ ì…ë ¥: start, stop, pause, resume, status ë“± |
|     |            | - Function Key ë°”ì¸ë”©: F1~F10, Shift+F1~F3 |
|     |            | - í ì¡°ì • ëª…ë ¹ì–´: up, top |
|     |            | - ì¸í„°ë™í‹°ë¸Œ Task ì„ íƒ UI (í™”ì‚´í‘œ ì´ë™, ì•¡ì…˜ ë©”ë‰´) |
| 1.7 | 2025-12-27 | ìŠ¤ì¼€ì¤„ë§ ë¡œì§ ë° ì‹¤í–‰ ëª¨ë“œ ì¶”ê°€ |
|     |            | - Task ë‹¨ìœ„ ì‹¤í–‰: í•œ Workerê°€ í•œ Taskë¥¼ ëê¹Œì§€ ìˆ˜í–‰ (3.4) |
|     |            | - ì˜ì¡´ì„± í•„í„°ë§: ì„¤ê³„ ë‹¨ê³„ëŠ” ë¬´ì‹œ, êµ¬í˜„ ë‹¨ê³„ë§Œ í™•ì¸ (3.2) |
|     |            | - ì‹¤í–‰ ëª¨ë“œ 3ì¢…: design, develop, force (3.8) |
|     |            | - F7 í‚¤ë¡œ ëª¨ë“œ ìˆœí™˜ ì „í™˜ |
|     |            | - execution ì„¤ì • ì˜µì…˜ ì¶”ê°€ (5.1, 5.2) |
| 1.8 | 2025-12-27 | ì‹¤í–‰ ëª¨ë“œ í™•ì¥ ë° ì›Œí¬í”Œë¡œìš° ì™¸ë¶€í™” |
|     |            | - ì‹¤í–‰ ëª¨ë“œ 4ì¢…ìœ¼ë¡œ í™•ì¥: design, quick, develop, force (3.8) |
|     |            | - quick: transitionsë§Œ (ë¦¬ë·°/í…ŒìŠ¤íŠ¸ ìƒëµ) |
|     |            | - develop: full workflow (transitions + actions) |
|     |            | - ì˜ì¡´ì„± í™•ì¸: êµ¬í˜„ ë‹¨ê³„ì—ì„œ ì„ í–‰ Task [im] ì´ìƒ í•„ìš” (3.2) |
|     |            | - workflows.jsonì— executionModes ì„¹ì…˜ ì¶”ê°€ |
|     |            | - ê¸°ë³¸ ëª¨ë“œ ë³€ê²½: develop â†’ quick |
| 1.9 | 2025-12-28 | ì‘ì—… ì¤‘ ìƒíƒœ ê´€ë¦¬ ê¸°ëŠ¥ ì¶”ê°€ (3.9) |
|     |            | - ë³„ë„ ìƒíƒœ íŒŒì¼: `.orchay/logs/orchay-active.json` |
|     |            | - ë°ì´í„° êµ¬ì¡°: worker, startedAt, currentStep |
|     |            | - ìƒëª…ì£¼ê¸°: ë“±ë¡(ë¶„ë°° ì‹œ) â†’ ê°±ì‹ (ë‹¨ê³„ ë³€ê²½ ì‹œ) â†’ í•´ì œ(ì™„ë£Œ ì‹œ) â†’ ì´ˆê¸°í™”(ì¬ì‹œì‘ ì‹œ) |
|     |            | - UI ì—°ë™: ìŠ¤í”¼ë„ˆ í‘œì‹œ, í˜„ì¬ ì§„í–‰ ë‹¨ê³„ í‘œì‹œ |
| 2.0 | 2025-12-28 | exec ì„œë¸Œì»¤ë§¨ë“œ CLI ì¶”ê°€ (6.4) |
|     |            | - `orchay exec start/stop/update/list/clear` ëª…ë ¹ì–´ |
|     |            | - ì›Œí¬í”Œë¡œìš° í›… ì—°ë™: `/wf:*` ì‹¤í–‰ ì‹œ ìƒíƒœ ë“±ë¡/í•´ì œ |
|     |            | - `orchay/src/orchay/cli.py` êµ¬í˜„ |
|     |            | - ê¸°ì¡´ `npx orchay exec` â†’ `orchay exec`ë¡œ ëŒ€ì²´ |
| 2.1 | 2025-12-28 | ì›Œì»¤ ë‹¨ìœ„ Pause/Resume ë° ìŠ¤ì¼€ì¤„ëŸ¬ ìƒíƒœ í‘œì‹œ ê¸°ëŠ¥ ì¶”ê°€ |
|     |            | - ìŠ¤ì¼€ì¤„ëŸ¬ ìƒíƒœ í‘œì‹œ: running/paused/stopped (SchedulerState ì—´ê±°í˜•) |
|     |            | - TUI í—¤ë”ì— ìŠ¤ì¼€ì¤„ëŸ¬ ìƒíƒœ ì•„ì´ì½˜(â–¶/â¸/â¹) í‘œì‹œ |
|     |            | - ì›Œì»¤ ë‹¨ìœ„ ìˆ˜ë™ ì¼ì‹œì •ì§€/ì¬ê°œ ê¸°ëŠ¥ (is_manually_paused í•„ë“œ) |
|     |            | - TUIì—ì„œ F4 ë˜ëŠ” 1~5 í‚¤ë¡œ ì›Œì»¤ ì„ íƒ, P í‚¤ë¡œ pause/resume í† ê¸€ |
|     |            | - ìƒíƒœ íŒŒì¼ í™•ì¥: `pausedWorkers`, `schedulerState` í•„ë“œ ì¶”ê°€ |
|     |            | - ì›Œì»¤ íŒ¨ë„ì— ìˆ˜ë™ ì¼ì‹œì •ì§€ í‘œì‹œ(ğŸ›‘) ë° ì¸í„°ë™í‹°ë¸Œ ì„ íƒ UI |
| 2.2 | 2025-12-28 | transition.ts ë…ë¦½ êµ¬í˜„ ë° Worker Reset ê¸°ëŠ¥ ì¶”ê°€ |
|     |            | - `.orchay/script/transition.ts` ì™¸ë¶€ ëª¨ë“ˆ ì˜ì¡´ì„± ì œê±° |
|     |            | - wbs.md ì§ì ‘ íŒŒì‹±/ìˆ˜ì • ë¡œì§ êµ¬í˜„ (taskService/wbsService ì—†ì´ ë™ì‘) |
|     |            | - dispatch í›„ grace period ì¶”ê°€ (ê¸°ë³¸ 20ì´ˆ, ìƒíƒœ ì²´í¬ ì§€ì—°) |
|     |            | - TUI Worker Reset ê¸°ëŠ¥: R í‚¤ë¡œ error ìƒíƒœ Workerë¥¼ idleë¡œ ë³µêµ¬ |
|     |            | - Queue í…Œì´ë¸” ì»¬ëŸ¼ ë¶„ë¦¬: Titleê³¼ Dependsë¥¼ ë³„ë„ ì»¬ëŸ¼ìœ¼ë¡œ |
| 2.3 | 2025-12-28 | ë¬¸ì„œ ë·°ì–´ Markdown ë Œë”ë§ ê³ ë„í™” (3.11) |
|     |            | - ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§: markdown-it-py + Pygments |
|     |            | - GFM ì™„ì „ ì§€ì›: í…Œì´ë¸”, ì²´í¬ë¦¬ìŠ¤íŠ¸, ì·¨ì†Œì„ , ê°ì£¼ |
|     |            | - ì½”ë“œ í•˜ì´ë¼ì´íŒ…: Pygments monokai í…Œë§ˆ (598ê°œ ì–¸ì–´) |
|     |            | - Mermaid ë‹¤ì´ì–´ê·¸ë¨: í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë Œë”ë§ ìœ ì§€ |
|     |            | - VS Code ìˆ˜ì¤€ ë‹¤í¬ í…Œë§ˆ ìŠ¤íƒ€ì¼ ì ìš© |
