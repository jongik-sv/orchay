# 요구사항 추적성 매트릭스 (025-traceability-matrix.md)

**Template Version:** 1.0.0 — **Last Updated:** 2025-12-28

> **목적**: PRD → 설계 → 테스트 양방향 추적
>
> **참조**: 이 문서는 `010-design.md`와 `026-test-specification.md`와 함께 사용됩니다.

---

## 0. 문서 메타데이터

| 항목 | 내용 |
|------|------|
| Task ID | TSK-02-03 |
| Task명 | TUI 인터랙티브 기능 |
| 설계 참조 | `010-design.md` |
| 테스트 명세 참조 | `026-test-specification.md` |
| 작성일 | 2025-12-28 |
| 작성자 | Claude |

---

## 1. 기능 요구사항 추적 (FR → 설계 → 테스트)

> PRD → 설계 → 테스트케이스 매핑

| 요구사항 ID | PRD 섹션 | 설계 섹션 | 단위 테스트 | E2E 테스트 | 매뉴얼 TC | 상태 |
|-------------|----------|-----------|-------------|------------|-----------|------|
| FR-001 | 3.7 명령어 목록 | 6.1 사용자 액션 | UT-001~004 | E2E-001 | TC-001 | 설계완료 |
| FR-002 | 3.7 Function Key 바인딩 | 6.3 키보드/접근성 | UT-005~008 | E2E-002 | TC-002 | 설계완료 |
| FR-003 | 3.7 인터랙티브 Task 선택 UI | 5.2 화면별 상세 | UT-009~012 | E2E-003 | TC-003 | 설계완료 |
| FR-004 | 3.7 큐 조정 (up, top, skip, retry) | 3.2 UC-03, UC-04 | UT-013~016 | E2E-004 | TC-004 | 설계완료 |
| FR-005 | 3.7 모드 전환 (F7) | 3.2 UC-05 | UT-017 | E2E-005 | TC-005 | 설계완료 |

### 1.1 요구사항별 상세 매핑

#### FR-001: 명령어 입력 시스템

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 3.7 명령어 목록 | start, stop, pause, resume, status, queue, workers, up, top, skip, retry, reload, clear, mode, help |
| 설계 | 010-design.md | 6.1 사용자 액션 | 명령어 파싱, 실행, 피드백 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-001~004 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-001 |

#### FR-002: Function Key 바인딩

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 3.7 Function Key 바인딩 | F1~F10, Shift+F1~F3 키 매핑 |
| 설계 | 010-design.md | 6.3 키보드/접근성 | Textual key bindings |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-005~008 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-002 |

#### FR-003: 인터랙티브 Task 선택 UI

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 3.7 인터랙티브 Task 선택 UI | ↑/↓ 이동, Enter 액션, U/T/S/R 키 |
| 설계 | 010-design.md | 5.2 화면별 상세 | 큐 인터랙티브 UI, 액션 메뉴 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-009~012 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-003 |

#### FR-004: 큐 조정 기능

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 3.7 큐 조정 | up, top, skip, retry 명령어 |
| 설계 | 010-design.md | 3.2 UC-03, UC-04 | 순서 조정, Task 액션 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-013~016 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-004 |

#### FR-005: 모드 전환

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 3.7 모드 | F7 순환, mode 명령어 |
| 설계 | 010-design.md | 3.2 UC-05 | 모드 전환 로직 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-017 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-005 |

---

## 2. 비즈니스 규칙 추적 (BR → 구현 → 검증)

| 규칙 ID | PRD 출처 | 설계 섹션 | 구현 위치(개념) | 단위 테스트 | E2E 테스트 | 검증 방법 | 상태 |
|---------|----------|----------|-----------------|-------------|------------|-----------|------|
| BR-001 | 3.7 큐 조정 | 8.1 BR-01 | CommandHandler | UT-018 | E2E-006 | 실행 중 Task skip 시 에러 확인 | 설계완료 |
| BR-002 | 3.8 실행 모드 | 8.1 BR-02 | CommandHandler | UT-019 | E2E-007 | 모드 전환 후 다음 분배 확인 | 설계완료 |
| BR-003 | 3.7 제어 | 8.1 BR-03 | CommandHandler | UT-020 | E2E-008 | pause 시 진행 중 작업 지속 확인 | 설계완료 |

### 2.1 비즈니스 규칙별 상세 매핑

#### BR-001: 실행 중인 Task는 skip 불가

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 실행 중인 Task 스킵 시 에러 메시지 표시 |
| **설계 표현** | 실행 중 Task skip 불가, 큐 대기 중 Task만 가능 |
| **구현 위치** | CommandHandler.skip_task() |
| **검증 방법** | skip 명령 시 running_tasks 확인 후 거부 |
| **관련 테스트** | UT-018, E2E-006 |

#### BR-002: 모드 전환은 다음 분배부터 적용

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 모드 변경 시 진행 중 작업에 영향 없음 |
| **설계 표현** | 모드 전환 → 즉시 반영 → 다음 분배부터 적용 |
| **구현 위치** | CommandHandler.change_mode() |
| **검증 방법** | 모드 전환 후 진행 중 Worker 상태 변화 없음 확인 |
| **관련 테스트** | UT-019, E2E-007 |

#### BR-003: pause 시 새 분배만 중지

| 구분 | 내용 |
|------|------|
| **PRD 원문** | pause 명령 시 진행 중 작업 유지 |
| **설계 표현** | pause → 새 분배 중지, 진행 중 작업 계속 |
| **구현 위치** | CommandHandler.toggle_pause() |
| **검증 방법** | pause 후 Worker busy 상태 유지 확인 |
| **관련 테스트** | UT-020, E2E-008 |

---

## 3. 테스트 역추적 매트릭스

> 테스트 결과 → 요구사항 역추적용

| 테스트 ID | 테스트 유형 | 검증 대상 요구사항 | 검증 대상 비즈니스 규칙 | 상태 |
|-----------|------------|-------------------|----------------------|------|
| UT-001 | 단위 | FR-001 | - | 미실행 |
| UT-002 | 단위 | FR-001 | - | 미실행 |
| UT-003 | 단위 | FR-001 | - | 미실행 |
| UT-004 | 단위 | FR-001 | - | 미실행 |
| UT-005 | 단위 | FR-002 | - | 미실행 |
| UT-006 | 단위 | FR-002 | - | 미실행 |
| UT-007 | 단위 | FR-002 | - | 미실행 |
| UT-008 | 단위 | FR-002 | - | 미실행 |
| UT-009 | 단위 | FR-003 | - | 미실행 |
| UT-010 | 단위 | FR-003 | - | 미실행 |
| UT-011 | 단위 | FR-003 | - | 미실행 |
| UT-012 | 단위 | FR-003 | - | 미실행 |
| UT-013 | 단위 | FR-004 | - | 미실행 |
| UT-014 | 단위 | FR-004 | - | 미실행 |
| UT-015 | 단위 | FR-004 | - | 미실행 |
| UT-016 | 단위 | FR-004 | - | 미실행 |
| UT-017 | 단위 | FR-005 | - | 미실행 |
| UT-018 | 단위 | - | BR-001 | 미실행 |
| UT-019 | 단위 | - | BR-002 | 미실행 |
| UT-020 | 단위 | - | BR-003 | 미실행 |
| E2E-001 | E2E | FR-001 | - | 미실행 |
| E2E-002 | E2E | FR-002 | - | 미실행 |
| E2E-003 | E2E | FR-003 | - | 미실행 |
| E2E-004 | E2E | FR-004 | - | 미실행 |
| E2E-005 | E2E | FR-005 | - | 미실행 |
| E2E-006 | E2E | - | BR-001 | 미실행 |
| E2E-007 | E2E | - | BR-002 | 미실행 |
| E2E-008 | E2E | - | BR-003 | 미실행 |
| TC-001 | 매뉴얼 | FR-001 | - | 미실행 |
| TC-002 | 매뉴얼 | FR-002 | - | 미실행 |
| TC-003 | 매뉴얼 | FR-003 | - | 미실행 |
| TC-004 | 매뉴얼 | FR-004 | - | 미실행 |
| TC-005 | 매뉴얼 | FR-005 | - | 미실행 |

---

## 4. 컴포넌트 추적

> 설계 요소 → 구현 클래스/모듈 매핑

| 설계 요소 | Textual 위젯 | 모듈 | 요구사항 |
|----------|-------------|------|----------|
| Input 위젯 | Textual Input | ui/app.py | FR-001 |
| Function Key 바인딩 | @on 데코레이터 | ui/app.py | FR-002 |
| 큐 인터랙티브 UI | OptionList | ui/widgets.py | FR-003 |
| 액션 메뉴 | OptionList | ui/widgets.py | FR-003 |
| 명령어 처리기 | - | command.py | FR-001, FR-004 |

---

## 5. 인터페이스 추적

> 설계 인터페이스 → 구현 클래스 매핑

| 설계 인터페이스 | 구현 클래스 | 메서드 | 요구사항 |
|----------------|------------|--------|----------|
| 명령어 파싱 | CommandHandler | parse_command() | FR-001 |
| 명령어 실행 | CommandHandler | process_command() | FR-001 |
| 키 바인딩 처리 | OrchayApp | on_key() | FR-002 |
| 큐 조정 | CommandHandler | up_task(), top_task() | FR-004 |
| Task 액션 | CommandHandler | skip_task(), retry_task() | FR-004 |
| 모드 전환 | CommandHandler | change_mode() | FR-005 |

---

## 6. 추적성 검증 요약

### 6.1 커버리지 통계

| 구분 | 총 항목 | 매핑 완료 | 미매핑 | 커버리지 |
|------|---------|----------|--------|---------|
| 기능 요구사항 (FR) | 5 | 5 | 0 | 100% |
| 비즈니스 규칙 (BR) | 3 | 3 | 0 | 100% |
| 단위 테스트 (UT) | 20 | 20 | 0 | 100% |
| E2E 테스트 | 8 | 8 | 0 | 100% |
| 매뉴얼 테스트 (TC) | 5 | 5 | 0 | 100% |

### 6.2 미매핑 항목 (있는 경우)

| 구분 | ID | 설명 | 미매핑 사유 |
|------|-----|------|-----------|
| - | - | - | - |

---

## 관련 문서

- 설계: `010-design.md`
- 테스트 명세: `026-test-specification.md`
- PRD: `.orchay/projects/orchay/prd.md`

---

<!--
author: Claude
Template Version History:
- v1.0.0 (2025-12-28): 신규 생성
  - TSK-02-03 TUI 인터랙티브 기능 추적성 매트릭스
-->
