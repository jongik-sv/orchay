# TSK-02-02 요구사항 추적 매트릭스

## 문서 정보

| 항목 | 내용 |
|------|------|
| Task ID | TSK-02-02 |
| 문서 버전 | 1.0 |
| 작성일 | 2026-01-02 |

---

## 1. PRD 요구사항 → 설계 매핑

| PRD 요구사항 ID | 요구사항 설명 | 설계 섹션 | 구현 범위 |
|----------------|--------------|----------|----------|
| K-001 | 주방: 실시간 신규 주문 표시 | UC-01, 시나리오 1, 섹션 6.1 | `order:new` 이벤트 발송 |
| K-002 | 주방: 새 주문 알림음 재생 | UC-01 사후조건 | 클라이언트 훅에서 콜백 제공 |
| C-031 | 고객: 주문 상태 실시간 확인 | UC-02, 시나리오 2, 섹션 6.1 | `order:status` 이벤트 발송 |
| WS-001 | WebSocket 연결 관리 | UC-03, 섹션 6.3 | 재연결 처리, 룸 관리 |
| WS-002 | 이벤트 페이로드 정의 | 섹션 6.2, 섹션 12.1 | 타입 정의, 검증 로직 |

---

## 2. 설계 → 테스트 매핑

| 설계 항목 | 테스트 ID | 테스트 유형 |
|----------|----------|------------|
| lib/socket.ts getSocket() | UT-01 | 단위 테스트 |
| lib/socket.ts joinTable() | UT-02 | 단위 테스트 |
| lib/socket.ts joinKitchen() | UT-03 | 단위 테스트 |
| lib/socket.ts onOrderNew() | UT-04 | 단위 테스트 |
| lib/socket.ts onOrderStatus() | UT-05 | 단위 테스트 |
| 재연결 처리 | UT-06 | 단위 테스트 |
| 이벤트 페이로드 검증 | UT-07 | 단위 테스트 |
| hooks/useKitchenSocket | UT-08 | 단위 테스트 |
| hooks/useCustomerSocket | UT-09 | 단위 테스트 |
| POST /api/orders → order:new | IT-01 | 통합 테스트 |
| PATCH /api/orders/{id}/status → order:status | IT-02 | 통합 테스트 |
| 주문 생성 → 주방 수신 | E2E-01 | E2E 테스트 |
| 상태 변경 → 고객 수신 | E2E-02 | E2E 테스트 |
| 연결 끊김 → 재연결 → 동기화 | E2E-03 | E2E 테스트 |

---

## 3. 유즈케이스 → 요구사항 역추적

| 유즈케이스 | 관련 PRD 요구사항 |
|----------|------------------|
| UC-01: 새 주문 실시간 수신 | K-001, K-002 |
| UC-02: 주문 상태 실시간 수신 | C-031 |
| UC-03: 연결 복원 | WS-001 |

---

## 4. 비즈니스 규칙 추적

| 규칙 ID | 설명 | 설계 섹션 | 검증 방법 |
|--------|------|----------|----------|
| BR-01 | 주문 생성 시 즉시 주방 알림 | 섹션 8.1 | E2E-01 |
| BR-02 | 상태 변경 시 해당 테이블에만 알림 | 섹션 8.1 | E2E-02 |
| BR-03 | 완료된 주문도 상태 이벤트 발송 | 섹션 8.1 | IT-02 |

---

## 변경 이력

| 버전 | 일자 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2026-01-02 | Claude | 최초 작성 (리뷰 반영) |
