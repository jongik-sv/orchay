# TSK-03-04 - WP-03 통합 확인: 고객 화면 검증 설계 문서

## 문서 정보

| 항목 | 내용 |
|------|------|
| Task ID | TSK-03-04 |
| 문서 버전 | 1.0 |
| 작성일 | 2026-01-02 |
| 상태 | 작성중 |
| 카테고리 | development |
| 도메인 | test |

---

## 1. 개요

### 1.1 배경 및 문제 정의

**현재 상황:**
- WP-03 고객 화면의 개별 Task들(TSK-03-01, 02, 03)이 각각 구현됨
- 메뉴 목록, 장바구니/주문, 주문 상태 추적 기능이 개별적으로 개발됨
- 개별 기능은 동작하나 전체 플로우 연동 검증이 필요

**해결하려는 문제:**
- 고객 화면 전체 플로우의 통합 동작 검증
- 실시간 상태 업데이트 정상 동작 확인
- UI/UX 일관성 및 글래스모피즘 디자인 적용 확인

### 1.2 목적 및 기대 효과

**목적:**
- WP-03 고객 화면의 전체 플로우가 정상 동작하는지 검증
- PRD C-001 ~ C-031 요구사항 충족 여부 확인

**기대 효과:**
- 고객 화면의 품질 보증
- 주방 연동 전 고객 측 기능 완성도 확보
- MVP 핵심 플로우 중 고객 측 검증 완료

### 1.3 범위

**포함:**
- /order?table={id} 메뉴 목록 페이지 검증
- 장바구니 기능 검증
- 주문 전송 기능 검증
- /status?table={id} 주문 상태 추적 검증
- WebSocket 실시간 상태 업데이트 검증
- 글래스모피즘 UI 적용 확인

**제외:**
- 주방 화면(WP-04) 기능
- E2E 전체 플로우 테스트 (WP-05에서 수행)
- 결제 기능 (MVP 제외)

### 1.4 참조 문서

| 문서 | 경로 | 관련 섹션 |
|------|------|----------|
| PRD | `.orchay/projects/table-order/prd.md` | 섹션 3.1 고객 화면 (C-001 ~ C-031) |
| TRD | `.orchay/projects/table-order/trd.md` | 섹션 1.3 글래스모피즘 디자인 |

---

## 2. 의존성 분석

### 2.1 선행 Task

| Task ID | 제목 | 검증 대상 |
|---------|------|----------|
| TSK-03-01 | 메뉴 목록 페이지 구현 | /order 페이지, 카테고리/메뉴 표시 |
| TSK-03-02 | 장바구니 및 주문 기능 구현 | 장바구니, 수량 조절, 주문 전송 |
| TSK-03-03 | 주문 상태 추적 페이지 구현 | /status 페이지, 실시간 상태 |
| TSK-02-02 | 실시간 이벤트 송수신 구현 | WebSocket 연동 |

### 2.2 API 의존성

| API | 용도 | 검증 항목 |
|-----|------|----------|
| GET /api/categories | 카테고리 목록 조회 | 정렬 순서, 응답 형식 |
| GET /api/menus | 메뉴 목록 조회 | 카테고리 정보, 품절 필터 |
| POST /api/orders | 주문 생성 | 주문 ID 반환, order_items 생성 |
| GET /api/orders?table={id} | 테이블별 주문 조회 | 최신 순 정렬 |
| WebSocket order:status | 상태 변경 알림 | 실시간 UI 업데이트 |

---

## 3. 검증 시나리오

### 3.1 시나리오 1: 메뉴 목록 확인 (C-001, C-002, C-010, C-011, C-012)

**상황 설명:**
고객이 QR 코드를 스캔하여 테이블 5번의 메뉴 화면에 접속한다.

**단계별 진행:**

| 단계 | 사용자 행동 | 예상 결과 | 검증 항목 |
|------|-----------|----------|----------|
| 1 | /order?table=5 URL 접속 | 메뉴 페이지 로딩 | 페이지 정상 렌더링 |
| 2 | 화면 상단 확인 | "테이블 5" 표시 | C-002 테이블 번호 표시 |
| 3 | 카테고리 탭 확인 | 모든 카테고리 표시 | C-010 카테고리별 메뉴 |
| 4 | 메뉴 카드 확인 | 메뉴명, 가격, 이미지 표시 | C-011 메뉴 정보 |
| 5 | 품절 메뉴 확인 | 회색 처리, 클릭 불가 | C-012 품절 표시 |

**성공 조건:**
- 테이블 번호가 URL 파라미터에서 정확히 추출되어 표시
- 카테고리 정렬 순서대로 표시
- 품절 메뉴가 시각적으로 구분되고 선택 불가

### 3.2 시나리오 2: 장바구니 및 주문 (C-020, C-021, C-022, C-023)

**상황 설명:**
고객이 메뉴를 장바구니에 담고 주문을 전송한다.

**단계별 진행:**

| 단계 | 사용자 행동 | 예상 결과 | 검증 항목 |
|------|-----------|----------|----------|
| 1 | 메뉴 카드 클릭 | 장바구니에 추가 | C-020 메뉴 담기 |
| 2 | + 버튼 클릭 | 수량 증가 | C-021 수량 조절 |
| 3 | - 버튼으로 수량 0 | 장바구니에서 제거 | 수량 0 시 삭제 |
| 4 | 장바구니 영역 확인 | 담은 메뉴, 수량, 총 금액 표시 | C-022 장바구니 확인 |
| 5 | "주문하기" 버튼 클릭 | 주문 전송, 상태 페이지 이동 | C-023 주문 전송 |

**성공 조건:**
- 동일 메뉴 추가 시 수량만 증가
- 총 금액이 실시간으로 정확히 계산
- 주문 전송 후 /status 페이지로 자동 이동

### 3.3 시나리오 3: 주문 상태 실시간 추적 (C-030, C-031)

**상황 설명:**
고객이 주문 후 상태 페이지에서 조리 진행 상황을 확인한다.

**단계별 진행:**

| 단계 | 사용자 행동 | 시스템 반응 | 검증 항목 |
|------|-----------|------------|----------|
| 1 | /status?table=5 접속 | 현재 테이블 주문 목록 표시 | C-030 주문 내역 |
| 2 | 주문 상태 확인 | "접수됨" 상태 표시 | 초기 상태 표시 |
| 3 | (서버에서 상태 변경) | "조리중" 상태로 변경 | C-031 실시간 상태 |
| 4 | (서버에서 상태 변경) | "완료" 상태로 변경 | 실시간 업데이트 |
| 5 | "추가 주문" 버튼 클릭 | /order 페이지로 이동 | 추가 주문 플로우 |

**성공 조건:**
- 주문 목록이 최신 순으로 정렬
- WebSocket으로 상태 변경 시 즉시 UI 업데이트
- 상태별 색상 구분 (pending: gray, cooking: warning, completed: success)

### 3.4 시나리오 4: 에러 상황 처리

**상황 설명:**
네트워크 오류 또는 잘못된 접근 시 적절한 에러 처리가 되는지 확인

| 에러 상황 | 예상 동작 | 검증 항목 |
|----------|----------|----------|
| table 파라미터 없이 /order 접속 | 에러 메시지 또는 기본값 처리 | 파라미터 검증 |
| API 응답 실패 | 에러 메시지 표시, 재시도 유도 | 에러 처리 |
| WebSocket 연결 끊김 | 재연결 시도 | 연결 복구 |
| 빈 장바구니로 주문 시도 | 주문 버튼 비활성화 또는 안내 | 유효성 검증 |

---

## 4. UI/UX 검증

### 4.1 글래스모피즘 디자인 체크리스트

| 요소 | 확인 항목 | TailwindCSS 클래스 |
|------|----------|-------------------|
| 페이지 배경 | 그라데이션 적용 | `bg-gradient-to-br from-[#E8DFFF] via-[#F3E8FF] to-[#FFE4F3]` |
| 메뉴 카드 | 블러 배경, 반투명 | `backdrop-blur-[16px] bg-white/25 border-white/30` |
| 장바구니 영역 | 글래스 효과 | `backdrop-blur-[8px] bg-white/20` |
| Primary 버튼 | 그라데이션 | `bg-gradient-to-r from-primary-500 to-primary-600` |
| 상태 배지 | 상태별 색상 | success/warning/gray |

### 4.2 반응형 동작

| 화면 크기 | 레이아웃 | 확인 항목 |
|----------|---------|----------|
| 모바일 (375px) | 1열 그리드 | 터치 영역 적절성 |
| 태블릿 (768px) | 2열 그리드 | 카드 크기 조절 |
| 데스크톱 (1024px+) | 3-4열 그리드 | 넓은 화면 활용 |

---

## 5. 테스트 케이스

### 5.1 기능 테스트

| TC-ID | 테스트 항목 | 선행조건 | 테스트 단계 | 예상 결과 |
|-------|-----------|---------|------------|----------|
| TC-01 | 테이블 번호 표시 | /order?table=5 접속 | 상단 확인 | "테이블 5" 표시 |
| TC-02 | 카테고리 목록 | 페이지 로드 완료 | 카테고리 탭 확인 | 모든 카테고리 표시, 정렬 순서 |
| TC-03 | 메뉴 목록 | 카테고리 선택 | 메뉴 카드 확인 | 해당 카테고리 메뉴만 표시 |
| TC-04 | 품절 메뉴 | 품절 메뉴 존재 | 품절 메뉴 클릭 | 클릭 불가, 회색 표시 |
| TC-05 | 장바구니 추가 | 메뉴 페이지 | 메뉴 카드 클릭 | 장바구니에 추가됨 |
| TC-06 | 수량 증가 | 장바구니에 메뉴 존재 | + 버튼 클릭 | 수량 1 증가 |
| TC-07 | 수량 감소 | 수량 2 이상 | - 버튼 클릭 | 수량 1 감소 |
| TC-08 | 수량 0 삭제 | 수량 1 | - 버튼 클릭 | 장바구니에서 제거 |
| TC-09 | 총 금액 계산 | 여러 메뉴 담음 | 금액 확인 | 정확한 합계 |
| TC-10 | 주문 전송 | 장바구니에 메뉴 존재 | 주문하기 클릭 | 주문 성공, /status 이동 |
| TC-11 | 주문 목록 조회 | 주문 생성 완료 | /status 페이지 확인 | 주문 목록 표시 |
| TC-12 | 실시간 상태 변경 | 주문 존재 | 서버에서 상태 변경 | UI 즉시 업데이트 |
| TC-13 | 추가 주문 | /status 페이지 | 추가 주문 버튼 클릭 | /order 페이지 이동 |

### 5.2 UI 테스트

| TC-ID | 테스트 항목 | 확인 내용 |
|-------|-----------|----------|
| UI-01 | 그라데이션 배경 | 페이지 배경에 그라데이션 적용 |
| UI-02 | 글래스 카드 | 메뉴 카드에 블러 효과 |
| UI-03 | 버튼 스타일 | Primary 버튼 그라데이션 |
| UI-04 | 상태 배지 | 상태별 색상 구분 |
| UI-05 | 반응형 레이아웃 | 모바일/태블릿/데스크톱 적응 |

---

## 6. 수용 기준 (Acceptance Criteria)

### 6.1 필수 조건

- [ ] /order?table={id} 접속 시 테이블 번호 표시
- [ ] 카테고리별 메뉴 목록 정상 표시
- [ ] 품절 메뉴 비활성화 동작
- [ ] 장바구니 추가/수량 조절/삭제 동작
- [ ] 주문하기 버튼으로 주문 전송 성공
- [ ] /status 페이지에서 주문 상태 실시간 확인
- [ ] 글래스모피즘 UI 적용 확인

### 6.2 품질 기준

- [ ] 페이지 로딩 시간 3초 이내
- [ ] WebSocket 연결 끊김 시 5초 이내 재연결
- [ ] 모든 버튼 터치 영역 44px 이상
- [ ] 색상 대비 WCAG AA 기준 충족

---

## 7. 구현 범위

### 7.1 영향받는 영역

| 영역 | 검증 내용 | 영향도 |
|------|----------|--------|
| /order 페이지 | 메뉴 목록, 장바구니, 주문 | 높음 |
| /status 페이지 | 주문 상태 추적 | 높음 |
| API 연동 | categories, menus, orders | 높음 |
| WebSocket | order:status 이벤트 | 높음 |

### 7.2 제약 사항

| 제약 | 설명 | 대응 방안 |
|------|------|----------|
| 주방 화면 미완성 | 상태 변경 테스트 어려움 | API 직접 호출로 상태 변경 |
| 실제 QR 코드 없음 | URL 직접 입력으로 테스트 | table 파라미터 수동 설정 |

---

## 8. 체크리스트

### 8.1 설계 완료 확인

- [x] 검증 범위 및 목적 정의
- [x] 의존성 Task 분석
- [x] 검증 시나리오 작성
- [x] 테스트 케이스 정의
- [x] 수용 기준 명시
- [x] UI/UX 검증 항목 정의

### 8.2 구현 준비

- [ ] 선행 Task 구현 완료 확인
- [ ] API 정상 동작 확인
- [ ] WebSocket 연결 가능 확인

---

## 변경 이력

| 버전 | 일자 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2026-01-02 | Claude | 최초 작성 |
