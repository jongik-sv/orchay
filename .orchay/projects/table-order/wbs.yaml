project:
  id: table-order
  name: 테이블 오더 MVP
  description: QR 코드 기반 테이블 주문 시스템 - 주문 → 주방 연결 → 상태 추적 핵심 플로우 검증
  version: 0.1.0
  status: active
  createdAt: "2025-12-31"
  updatedAt: "2026-01-02"
wbs:
  version: "1.0"
  depth: 3
  projectRoot: mvp
  strategy: MVP 핵심 플로우 검증 - 최소 기능으로 빠른 검증
workPackages:
  - id: WP-00
    title: 프로젝트 초기화
    status: planned
    priority: critical
    schedule: 2026-01-02 ~ 2026-01-02
    tasks:
      - id: TSK-00-01
        title: Next.js 프로젝트 초기화 및 의존성 설치
        category: infrastructure
        domain: fullstack
        status: "[vf]"
        priority: critical
        assignee: "-"
        schedule: 2026-01-02 ~ 2026-01-02
        tags:
          - setup
          - init
          - nextjs
        depends: []
        blockedBy: null
        testResult: pass
        note: null
        requirements:
          prdRef: TRD 섹션 7
          items:
            - Next.js 15.x + App Router 프로젝트 생성
            - TypeScript 설정
            - TailwindCSS 설정
            - better-sqlite3, socket.io, lucide-react 설치
          acceptance:
            - npm run dev 실행 시 정상 동작
            - TypeScript 컴파일 에러 없음
            - TailwindCSS 유틸리티 클래스 동작 확인
          techSpec:
            - Next.js 15.x (App Router)
            - TypeScript 5.x
            - TailwindCSS 3.4
            - better-sqlite3 11.x
            - socket.io 4.8
      - id: TSK-00-02
        title: 프로젝트 구조 및 타입 정의
        category: infrastructure
        domain: fullstack
        status: "[vf]"
        priority: critical
        assignee: "-"
        schedule: 2026-01-02 ~ 2026-01-02
        tags:
          - structure
          - types
        depends:
          - TSK-00-01
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: TRD 섹션 3
          items:
            - TRD에 명시된 폴더 구조 생성
            - 공통 타입 정의 (Table, Category, Menu, Order, OrderItem)
          acceptance:
            - 모든 폴더 구조 생성 완료
            - 타입 정의 파일에서 import 가능
          techSpec:
            - app/, components/, lib/, types/ 폴더
            - PRD 섹션 4 데이터 모델 기반 타입
      - id: TSK-00-03
        title: "WP-00 통합 확인: 프로젝트 초기화 검증"
        category: development
        domain: test
        status: "[ap]"
        priority: high
        assignee: "-"
        schedule: 2026-01-02 ~ 2026-01-02
        tags:
          - integration
          - verification
        depends:
          - TSK-00-01
          - TSK-00-02
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: WP-00
          items:
            - 프로젝트 구조 및 설정 전체 검증
            - 개발 서버 정상 실행 확인
            - 타입 시스템 동작 확인
          acceptance:
            - npm run dev 정상 실행
            - npm run build 성공
            - 타입 에러 없음
            - TailwindCSS 스타일 적용 확인
        execution:
          command: build
          startedAt: "2026-01-02T06:09:41.322Z"
  - id: WP-01
    title: 데이터베이스 및 API 기반
    status: planned
    priority: critical
    schedule: 2026-01-02 ~ 2026-01-03
    tasks:
      - id: TSK-01-01
        title: SQLite 데이터베이스 설정 및 스키마 생성
        category: development
        domain: backend
        status: "[im]"
        priority: critical
        assignee: "-"
        schedule: 2026-01-02 ~ 2026-01-02
        tags:
          - database
          - sqlite
          - schema
        depends:
          - TSK-00-02
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: PRD 섹션 4, TRD 섹션 4
          items:
            - better-sqlite3 연결 설정 (lib/db.ts)
            - 테이블 스키마 생성 (tables, categories, menus, orders, order_items)
            - 초기 시드 데이터 삽입 (테이블 5개, 카테고리 3개, 메뉴 10개)
          acceptance:
            - DB 파일 생성 (./data/database.db)
            - 모든 테이블 생성 확인
            - 시드 데이터 조회 가능
          techSpec:
            - better-sqlite3 동기 API 사용
            - TRD 섹션 4 스키마 참조
          dataModel:
            - "tables: id, table_number, status"
            - "categories: id, name, sort_order"
            - "menus: id, category_id, name, price, image_url, is_sold_out"
            - "orders: id, table_id, status, created_at"
            - "order_items: id, order_id, menu_id, quantity, status"
        execution:
          command: audit
          startedAt: "2026-01-02T06:11:28.354Z"
      - id: TSK-01-02
        title: 카테고리/메뉴 조회 API 구현
        category: development
        domain: backend
        status: "[ap]"
        priority: high
        assignee: "-"
        schedule: 2026-01-02 ~ 2026-01-02
        tags:
          - api
          - menu
          - category
        depends:
          - TSK-01-01
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: PRD 섹션 5 고객용 API
          items:
            - GET /api/categories - 카테고리 목록 조회
            - GET /api/menus - 메뉴 목록 조회 (품절 제외 옵션)
          acceptance:
            - 카테고리 목록 정렬 순서대로 반환
            - 메뉴 목록에 카테고리 정보 포함
            - 품절 메뉴 필터링 동작
          apiSpec:
            - "GET /api/categories → { categories: Category[] }"
            - "GET /api/menus → { menus: Menu[] }"
            - GET /api/menus?includeSoldOut=true
      - id: TSK-01-03
        title: 주문 생성/조회 API 구현
        category: development
        domain: backend
        status: "[ap]"
        priority: high
        assignee: "-"
        schedule: 2026-01-02 ~ 2026-01-03
        tags:
          - api
          - order
        depends:
          - TSK-01-01
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: PRD 섹션 5 고객용/주방용 API
          items:
            - POST /api/orders - 주문 생성
            - GET /api/orders?table={id} - 테이블별 주문 조회
            - GET /api/kitchen/orders - 대기/조리중 주문 목록
            - PATCH /api/orders/{id}/status - 주문 상태 변경
          acceptance:
            - 주문 생성 시 order_items도 함께 생성
            - 테이블별 주문 조회 시 최신 순 정렬
            - 주방 주문 목록은 pending, cooking 상태만
            - 상태 변경 시 유효한 상태 전이만 허용
          apiSpec:
            - POST /api/orders → { orderId }
            - "  body: { tableId, items: [{ menuId, quantity }] }"
            - "GET /api/orders?table=5 → { orders: Order[] }"
            - "GET /api/kitchen/orders → { orders: Order[] }"
            - "PATCH /api/orders/1/status → { success: true }"
            - "  body: { status: 'cooking' | 'completed' }"
        execution:
          command: apply
          startedAt: "2026-01-02T04:59:42.024Z"
      - id: TSK-01-04
        title: "WP-01 통합 확인: 데이터베이스 및 API 검증"
        category: development
        domain: test
        status: "[ap]"
        priority: high
        assignee: "-"
        schedule: 2026-01-03 ~ 2026-01-03
        tags:
          - integration
          - verification
          - api
        depends:
          - TSK-01-01
          - TSK-01-02
          - TSK-01-03
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: WP-01
          items:
            - 모든 API 엔드포인트 수동 테스트
            - DB CRUD 동작 확인
            - 에러 케이스 처리 확인
          acceptance:
            - GET /api/categories 정상 응답
            - GET /api/menus 정상 응답
            - POST /api/orders 주문 생성 성공
            - GET /api/orders?table={id} 조회 성공
            - PATCH /api/orders/{id}/status 상태 변경 성공
            - 잘못된 요청 시 적절한 에러 반환
  - id: WP-02
    title: 실시간 통신 (WebSocket)
    status: planned
    priority: critical
    schedule: 2026-01-03 ~ 2026-01-03
    tasks:
      - id: TSK-02-01
        title: Socket.io 서버 설정 및 Custom Server 구성
        category: development
        domain: backend
        status: "[ap]"
        priority: critical
        assignee: "-"
        schedule: 2026-01-03 ~ 2026-01-03
        tags:
          - websocket
          - socket.io
          - server
        depends:
          - TSK-01-03
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: PRD 섹션 5 WebSocket 이벤트, TRD 섹션 5
          items:
            - Next.js Custom Server 설정 (server.ts)
            - Socket.io 서버 인스턴스 생성
            - 룸 기반 이벤트 처리 (table:{id}, kitchen)
          acceptance:
            - npm run dev로 Custom Server 실행
            - 클라이언트 연결 시 로그 출력
            - 룸 조인/리브 동작 확인
          techSpec:
            - TRD 섹션 5 서버 설정 참조
            - join:table, join:kitchen 이벤트 핸들러
      - id: TSK-02-02
        title: 실시간 이벤트 송수신 구현
        category: development
        domain: fullstack
        status: "[ap]"
        priority: high
        assignee: "-"
        schedule: 2026-01-03 ~ 2026-01-03
        tags:
          - websocket
          - event
          - realtime
        depends:
          - TSK-02-01
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: PRD 섹션 5 WebSocket 이벤트
          items:
            - order:new 이벤트 - 새 주문 시 주방에 알림
            - order:status 이벤트 - 상태 변경 시 고객에 알림
            - 클라이언트 Socket.io 훅/유틸 구현
          acceptance:
            - 주문 생성 시 주방 화면에 즉시 표시
            - 상태 변경 시 고객 화면에 즉시 반영
            - 연결 끊김 시 재연결 처리
          techSpec:
            - lib/socket.ts - 클라이언트 유틸
            - useSocket 커스텀 훅 (선택)
      - id: TSK-02-03
        title: "WP-02 통합 확인: 실시간 통신 검증"
        category: development
        domain: test
        status: "[ap]"
        priority: high
        assignee: "-"
        schedule: 2026-01-03 ~ 2026-01-03
        tags:
          - integration
          - verification
          - websocket
        depends:
          - TSK-02-01
          - TSK-02-02
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: WP-02
          items:
            - WebSocket 연결/해제 테스트
            - 룸 조인/리브 동작 확인
            - 이벤트 송수신 확인
          acceptance:
            - 클라이언트 연결 시 서버 로그 출력
            - table:{id} 룸 조인 동작
            - kitchen 룸 조인 동작
            - order:new 이벤트 주방에 전달
            - order:status 이벤트 고객에 전달
            - 재연결 시 기존 룸 복원
  - id: WP-03
    title: 고객 화면 (Customer)
    status: planned
    priority: high
    schedule: 2026-01-03 ~ 2026-01-04
    tasks:
      - id: TSK-03-01
        title: 메뉴 목록 페이지 구현
        category: development
        domain: frontend
        status: "[ap]"
        priority: high
        assignee: "-"
        schedule: 2026-01-03 ~ 2026-01-03
        tags:
          - frontend
          - menu
          - customer
        depends:
          - TSK-01-02
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: C-001, C-002, C-010, C-011, C-012
          items:
            - /order?table={id} 페이지 구현
            - URL 파라미터에서 테이블 번호 추출 및 표시
            - 카테고리별 메뉴 목록 표시
            - MenuCard 컴포넌트 - 메뉴명, 가격, 이미지
            - 품절 메뉴 비활성화 표시
          acceptance:
            - 테이블 번호 상단에 표시
            - 카테고리 탭/섹션으로 메뉴 분류
            - 품절 메뉴는 회색 처리 + 클릭 불가
          uiSpec:
            - 글래스모피즘 카드 디자인
            - backdrop-blur-[16px] bg-white/25
            - 그라데이션 배경 from-[#E8DFFF] via-[#F3E8FF] to-[#FFE4F3]
        execution:
          command: apply
          startedAt: "2026-01-02T05:24:09.926Z"
      - id: TSK-03-02
        title: 장바구니 및 주문 기능 구현
        category: development
        domain: frontend
        status: "[ap]"
        priority: high
        assignee: "-"
        schedule: 2026-01-03 ~ 2026-01-04
        tags:
          - frontend
          - cart
          - order
          - customer
        depends:
          - TSK-03-01
          - TSK-01-03
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: C-020, C-021, C-022, C-023
          items:
            - 메뉴 선택 시 장바구니에 추가
            - +/- 버튼으로 수량 조절
            - 장바구니 패널/모달 - 담은 메뉴, 수량, 총 금액
            - 주문하기 버튼 - POST /api/orders 호출
          acceptance:
            - 메뉴 클릭 시 장바구니에 추가
            - 수량 0 시 장바구니에서 제거
            - 총 금액 실시간 계산
            - 주문 성공 시 주문 상태 페이지로 이동
          uiSpec:
            - CartItem 컴포넌트
            - 하단 고정 장바구니 바
            - Primary 버튼 - bg-gradient-to-r from-primary-500 to-primary-600
        execution:
          command: apply
          startedAt: "2026-01-02T05:22:02.751Z"
      - id: TSK-03-03
        title: 주문 상태 추적 페이지 구현
        category: development
        domain: frontend
        status: "[ap]"
        priority: high
        assignee: "-"
        schedule: 2026-01-04 ~ 2026-01-04
        tags:
          - frontend
          - status
          - realtime
          - customer
        depends:
          - TSK-03-02
          - TSK-02-02
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: C-030, C-031
          items:
            - /status?table={id} 페이지 구현
            - 현재 테이블 주문 목록 표시
            - WebSocket으로 상태 변경 실시간 수신
            - StatusBadge 컴포넌트 - 접수됨/조리중/완료
          acceptance:
            - 주문 목록 최신 순 표시
            - 상태 변경 시 즉시 UI 업데이트
            - 추가 주문 버튼으로 메뉴 화면 이동
          uiSpec:
            - "상태별 색상 - pending: gray, cooking: warning, completed: success"
            - StatusBadge 컴포넌트
      - id: TSK-03-04
        title: "WP-03 통합 확인: 고객 화면 검증"
        category: development
        domain: test
        status: "[ap]"
        priority: high
        assignee: "-"
        schedule: 2026-01-04 ~ 2026-01-04
        tags:
          - integration
          - verification
          - customer
        depends:
          - TSK-03-01
          - TSK-03-02
          - TSK-03-03
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: WP-03, PRD C-001 ~ C-031
          items:
            - 고객 전체 플로우 테스트
            - UI/UX 검증
            - 실시간 상태 업데이트 확인
          acceptance:
            - /order?table={id} 접속 시 테이블 번호 표시
            - 카테고리별 메뉴 목록 정상 표시
            - 품절 메뉴 비활성화 동작
            - 장바구니 추가/수량 조절/삭제 동작
            - 주문하기 버튼으로 주문 전송 성공
            - /status 페이지에서 주문 상태 실시간 확인
            - 글래스모피즘 UI 적용 확인
        execution:
          command: apply
          startedAt: "2026-01-02T05:23:56.086Z"
  - id: WP-04
    title: 주방 화면 (KDS)
    status: planned
    priority: high
    schedule: 2026-01-04 ~ 2026-01-05
    tasks:
      - id: TSK-04-01
        title: 주방 주문 현황 페이지 구현
        category: development
        domain: frontend
        status: "[ap]"
        priority: high
        assignee: "-"
        schedule: 2026-01-04 ~ 2026-01-04
        tags:
          - frontend
          - kitchen
          - kds
        depends:
          - TSK-01-03
          - TSK-02-02
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: K-001, K-002, K-003
          items:
            - /kitchen 페이지 구현
            - 대기/조리중 주문 카드 그리드 표시
            - OrderCard 컴포넌트 - 테이블 번호, 메뉴명, 수량, 주문 시간
            - 새 주문 시 알림음 재생
            - WebSocket으로 새 주문 실시간 수신
          acceptance:
            - 주문 카드 그리드 레이아웃
            - 주문 시간 경과 표시 (N분 전)
            - 새 주문 시 알림음 재생
            - 실시간 주문 추가
          uiSpec:
            - PRD 섹션 6 주방 화면 와이어프레임 참조
            - OrderCard 컴포넌트 - 글래스모피즘
            - 3-4열 그리드 반응형
      - id: TSK-04-02
        title: 주문 상태 관리 기능 구현
        category: development
        domain: frontend
        status: "[ap]"
        priority: high
        assignee: "-"
        schedule: 2026-01-04 ~ 2026-01-05
        tags:
          - frontend
          - kitchen
          - status
        depends:
          - TSK-04-01
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: K-010, K-011, K-012
          items:
            - 조리 시작 버튼 - pending → cooking
            - 조리 완료 버튼 - cooking → completed
            - 완료된 주문 숨김/별도 표시
          acceptance:
            - 버튼 클릭 시 상태 변경 API 호출
            - 상태 변경 시 카드 UI 업데이트
            - 완료 주문 자동 제거 또는 완료 목록으로 이동
          uiSpec:
            - 상태별 버튼 색상
            - "pending: [조리시작] 버튼"
            - "cooking: [조리완료] 버튼 + 배경색 변경"
      - id: TSK-04-03
        title: "WP-04 통합 확인: 주방 화면 검증"
        category: development
        domain: test
        status: "[ap]"
        priority: high
        assignee: "-"
        schedule: 2026-01-05 ~ 2026-01-05
        tags:
          - integration
          - verification
          - kitchen
        depends:
          - TSK-04-01
          - TSK-04-02
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: WP-04, PRD K-001 ~ K-012
          items:
            - 주방 전체 플로우 테스트
            - 실시간 주문 수신 확인
            - 상태 관리 동작 확인
          acceptance:
            - /kitchen 접속 시 대기/조리중 주문 표시
            - 새 주문 실시간 추가 동작
            - 새 주문 시 알림음 재생
            - 조리시작 버튼 → cooking 상태 변경
            - 조리완료 버튼 → completed 상태 변경
            - 완료 주문 숨김/별도 표시 동작
            - 주문 카드 그리드 레이아웃 확인
  - id: WP-05
    title: 통합 테스트 및 마무리
    status: planned
    priority: high
    schedule: 2026-01-05 ~ 2026-01-05
    tasks:
      - id: TSK-05-01
        title: E2E 플로우 테스트
        category: development
        domain: test
        status: "[ap]"
        priority: high
        assignee: "-"
        schedule: 2026-01-05 ~ 2026-01-05
        tags:
          - test
          - e2e
          - integration
        depends:
          - TSK-04-03
        blockedBy: null
        testResult: null
        note: null
        requirements:
          prdRef: PRD 섹션 8 MVP 완료 기준
          items:
            - 전체 플로우 수동 테스트
            - 고객 → 주방 → 고객 실시간 연동 확인
            - 버그 수정 및 UI 개선
          acceptance:
            - 고객이 QR 코드로 메뉴 화면에 접속 가능
            - 고객이 메뉴를 장바구니에 담고 주문 가능
            - 주문이 주방 화면에 실시간으로 표시
            - 주방에서 조리 상태 변경 가능
            - 상태 변경이 고객 화면에 실시간 반영
        execution:
          command: build
          startedAt: "2026-01-02T05:41:25.697Z"
