# TSK-02-03: 데이터 파일 및 리소스 번들링

> **상태**: 구현 완료
> **작성일**: 2025-12-30
> **Category**: infrastructure

---

## 1. 요구사항 요약

| PRD 참조 | 요구사항 | 상태 |
|----------|----------|------|
| PRD 4.7 | workflows.json 포함 | N/A (런타임 외부 설정) |
| PRD 4.7 | src/orchay 하위 리소스 포함 | ✅ |
| PRD 4.7 | datas 옵션 설정 | ✅ |

---

## 2. 구현 내용

### 2.1 리소스 분석

| 리소스 | 경로 | 포함 여부 | 비고 |
|--------|------|----------|------|
| styles.tcss | src/orchay/ui/styles.tcss | ✅ 포함 | Textual TUI 스타일 |
| workflows.json | .orchay/settings/workflows.json | ❌ 제외 | 프로젝트별 외부 설정 |

**workflows.json 분석**:
- `scheduler.py:188`에서 런타임에 `.orchay/settings/workflows.json` 경로로 로드
- 프로젝트 디렉토리의 외부 설정 파일이므로 패키지에 포함 불필요
- 파일이 없으면 기본값 `{}` 사용

### 2.2 spec 파일 수정

**파일**: `orchay/orchay.spec`

```python
# Data files - 패키지에 포함되어야 하는 리소스
datas = [
    # Textual CSS 및 데이터 파일
    *collect_data_files('textual'),
    *collect_data_files('rich'),

    # orchay 패키지 리소스 (TSK-02-03: 데이터 파일 및 리소스 번들링)
    # - styles.tcss: Textual TUI 스타일 파일
    ('src/orchay/ui/styles.tcss', 'orchay/ui'),
]
```

---

## 3. 테스트 결과

### 3.1 빌드 테스트

```bash
uv run pyinstaller orchay.spec --clean
```

| 항목 | 결과 |
|------|------|
| 빌드 성공 | ✅ |
| 실행 파일 크기 | 18.7 MB |
| 실행 테스트 | ✅ (--help 동작 확인) |

### 3.2 리소스 포함 확인

- `styles.tcss`: `orchay/ui/` 경로로 번들링됨
- Textual/Rich 데이터 파일: `collect_data_files()`로 자동 포함

---

## 4. 의존성

| Task ID | 설명 | 상태 |
|---------|------|------|
| TSK-02-01 | PyInstaller spec 파일 생성 | ✅ 완료 (im) |

---

## 5. 변경 파일

| 파일 | 변경 유형 |
|------|----------|
| orchay/orchay.spec | 수정 (datas 설정 추가) |

---

## 6. 다음 단계

- `/wf:verify`: 통합 테스트 실행
- TSK-02-04: 로컬 빌드 테스트 (Linux) - 상세 테스트 진행

---

## 7. Acceptance Criteria 검증

| 기준 | 상태 |
|------|------|
| 실행 파일에서 설정 파일 로드 성공 | ✅ (workflows.json은 외부 설정) |
| 리소스 경로 정상 해석 | ✅ (styles.tcss 포함됨) |

---

<!--
Generated by: /wf:build
Date: 2025-12-30
-->
