# 사용자 매뉴얼: Tree Node 상호작용

**버전:** 1.0.0 — **최종 수정일:** 2025-12-16

---

## 1. 개요

WBS 트리의 개별 노드와 상호작용하는 방법을 안내합니다. 노드 아이콘, 상태 배지, 키보드 내비게이션, 펼침 상태 유지 기능을 다룹니다.

### 1.1 노드 구성 요소

```
┌─────────────────────────────────────────────────────────────┐
│  [>] 📁 WP-01 기본 인프라 구축          [development] ████░░ 60%  │
│       │    │         │                      │           │        │
│       │    │         │                      │           └── 진행률│
│       │    │         │                      └── 카테고리 태그     │
│       │    │         └── 노드 제목                               │
│       │    └── 노드 아이콘                                       │
│       └── 펼침/접힘 버튼                                         │
└─────────────────────────────────────────────────────────────┘
```

### 1.2 노드 타입별 아이콘

| 타입 | 아이콘 | 설명 |
|------|--------|------|
| WP | 📁 | Work Package (작업 패키지) |
| ACT | 📋 | Activity (활동) |
| TSK | ✅ | Task (작업 단위) |

---

## 2. 시나리오별 사용 가이드

### 시나리오 1: 노드 상태 이해하기

**목표**: 각 노드의 상태 배지와 진행 상황을 이해합니다.

#### 상태 코드 및 의미

| 상태 코드 | 표시 | 의미 | 색상 |
|-----------|------|------|------|
| `[ ]` | Todo | 작업 대기 | 회색 |
| `[bd]` | Design | 기본설계 진행 중 | 파란색 |
| `[dd]` | Detail | 상세설계 진행 중 | 청록색 |
| `[im]` | Implement | 구현 진행 중 | 주황색 |
| `[vf]` | Verify | 검증 진행 중 | 보라색 |
| `[xx]` | Done | 완료 | 녹색 |
| `[an]` | Analyze | 결함 분석 중 | 노란색 |
| `[fx]` | Fix | 결함 수정 중 | 빨간색 |

#### 카테고리별 색상

| 카테고리 | 색상 | 워크플로우 단계 |
|----------|------|----------------|
| development | 파란색 배지 | 6단계 |
| defect | 빨간색 배지 | 5단계 |
| infrastructure | 보라색 배지 | 4단계 |

#### 진행률 바 해석

```
████████░░ 80%  → 대부분 완료
████░░░░░░ 40%  → 진행 중
░░░░░░░░░░ 0%   → 시작 전
```

> **Tip**: WP/ACT 노드의 진행률은 하위 Task들의 평균 진행률입니다.

---

### 시나리오 2: 키보드로 트리 탐색하기

**목표**: 마우스 없이 키보드만으로 WBS 트리를 탐색합니다.

#### 단계별 안내

**Step 1.** WBS 트리 패널에 포커스를 맞춥니다 (Tab 키 또는 클릭).

**Step 2.** 아래 키보드 단축키로 탐색합니다:

| 키 | 동작 |
|----|------|
| **↑ (Arrow Up)** | 이전 노드로 이동 |
| **↓ (Arrow Down)** | 다음 노드로 이동 |
| **← (Arrow Left)** | 현재 노드 접기 / 부모 노드로 이동 |
| **→ (Arrow Right)** | 현재 노드 펼치기 / 첫 자식 노드로 이동 |
| **Enter** | 현재 노드 선택 (Detail Panel 표시) |
| **Space** | 현재 노드 펼침/접힘 토글 |
| **Home** | 첫 번째 노드로 이동 |
| **End** | 마지막 노드로 이동 |
| **Escape** | 포커스 해제 |

#### 키보드 탐색 예시

```
시작: WP-01 (포커스)
  ↓  : WP-01 → TSK-01-01
  →  : TSK-01-01 펼치기 (하위 있으면)
  ←  : 다시 접기 또는 부모로 이동
Enter: TSK-01-01 선택 → Detail Panel 표시
```

> **주의**: Task 노드 선택 시에만 Detail Panel이 업데이트됩니다.

---

### 시나리오 3: 노드 펼침/접힘 조작하기

**목표**: 트리 노드를 펼치거나 접어 원하는 구조를 표시합니다.

#### 마우스 조작

**Step 1.** 노드 왼쪽의 펼침 버튼 (`>` 또는 `v`)을 클릭합니다.

| 버튼 | 상태 | 클릭 결과 |
|------|------|----------|
| `>` | 접힘 | 하위 노드 표시 |
| `v` | 펼침 | 하위 노드 숨김 |

**Step 2.** 노드 자체를 더블 클릭해도 펼침/접힘이 토글됩니다.

#### 키보드 조작

| 현재 상태 | 키 | 결과 |
|----------|-----|------|
| 접힌 노드 | `→` 또는 `Space` | 펼침 |
| 펼친 노드 | `←` 또는 `Space` | 접힘 |
| 리프 노드 | `←` | 부모 노드로 이동 |

---

### 시나리오 4: 펼침 상태 유지 확인하기

**목표**: 브라우저 새로고침 후에도 트리 펼침 상태가 유지되는지 확인합니다.

#### 작동 방식

1. **자동 저장**: 노드 펼침/접힘 시 즉시 localStorage에 저장됩니다.
2. **자동 복원**: 페이지 로드 시 저장된 상태를 자동 복원합니다.
3. **프로젝트별 저장**: 각 프로젝트마다 독립적으로 상태가 관리됩니다.

#### 저장 키 형식

```
localStorage 키: orchay:tree:{projectId}:expanded
예시: orchay:tree:orchay:expanded
```

#### 상태 초기화 방법

전체 펼치기/전체 접기 버튼 사용 시:

| 버튼 | 동작 |
|------|------|
| **[전체 펼치기]** | 모든 노드 펼침 + 상태 저장 |
| **[전체 접기]** | 모든 노드 접힘 + 상태 저장 |

> **Tip**: 브라우저의 개발자 도구 → Application → Local Storage에서 저장된 상태를 확인할 수 있습니다.

---

### 시나리오 5: 노드 선택 및 하이라이트

**목표**: 현재 선택/포커스된 노드를 시각적으로 구분합니다.

#### 시각적 상태

| 상태 | 스타일 |
|------|--------|
| 기본 | 투명 배경 |
| 호버 | 연한 파란색 배경 |
| 포커스 | 파란색 테두리 |
| 선택됨 | 진한 파란색 배경 |

#### 선택 동작

| 조작 | 결과 |
|------|------|
| 클릭 | 노드 선택 + Detail Panel 표시 |
| Enter | 포커스된 노드 선택 |
| 다른 노드 클릭 | 이전 선택 해제 + 새 노드 선택 |

---

## 3. 키보드 단축키 총정리

| 키 | 동작 |
|----|------|
| **↑ / ↓** | 이전/다음 노드 이동 |
| **← / →** | 접기/펼치기 또는 부모/자식 이동 |
| **Enter** | 노드 선택 |
| **Space** | 펼침/접힘 토글 |
| **Home** | 첫 노드로 이동 |
| **End** | 마지막 노드로 이동 |
| **Escape** | 포커스 해제 |
| **Tab** | 다음 요소로 포커스 이동 |

---

## 4. FAQ / 트러블슈팅

### Q1. 키보드로 이동이 안 돼요.
- 트리 패널에 포커스가 있는지 확인하세요.
- Tab 키로 트리 영역에 포커스를 맞추세요.

### Q2. 펼침 상태가 저장되지 않아요.
- 브라우저의 localStorage가 활성화되어 있는지 확인하세요.
- 시크릿/프라이빗 모드에서는 저장되지 않을 수 있습니다.

### Q3. 진행률이 0%로 표시돼요.
- 하위 Task가 모두 Todo 상태일 수 있습니다.
- WP/ACT의 진행률은 하위 Task 평균입니다.

### Q4. 상태 배지 색상이 이상해요.
- 카테고리 설정을 확인하세요 (development/defect/infrastructure).
- 상태 코드가 올바른지 확인하세요.

---

## 5. 접근성

### 5.1 키보드 접근성
- 모든 기능이 키보드만으로 조작 가능
- 논리적인 탭 순서 제공
- 포커스 표시기 항상 가시

### 5.2 스크린 리더 지원
- `role="treeitem"` ARIA 역할 적용
- `aria-expanded` 펼침/접힘 상태 전달
- `aria-selected` 선택 상태 전달
- `aria-level` 계층 깊이 정보 제공

### 5.3 시각적 접근성
- 상태별 색상 + 텍스트 레이블 병행
- WCAG AA 기준 명암비 충족
- 색상만으로 정보 구분하지 않음

---

## 6. 관련 문서

| 문서 | 경로 |
|------|------|
| Tree Node 설계 | `tasks/TSK-04-02/010-basic-design.md` |
| Tree Interaction 설계 | `tasks/TSK-04-03/010-basic-design.md` |
| Tree Panel 매뉴얼 | `user-manual-wbs-detail.md` |

---

## 7. 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.0.0 | 2025-12-16 | 초기 작성 |

---

<!--
Author: Claude
Template Version: 1.0.0
Created: 2025-12-16
Based on: TSK-04-02 (Tree Node), TSK-04-03 (Tree Interaction)
-->
