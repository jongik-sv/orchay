# 사용자 매뉴얼: Document Viewer

**버전:** 1.0.0 — **최종 수정일:** 2025-12-16

---

## 1. 개요

Task 상세 패널에서 Markdown 기반 문서(기본설계, 상세설계, 코드리뷰 등)를 렌더링하여 표시하는 Document Viewer 기능을 안내합니다.

### 1.1 지원 기능

| 기능 | 설명 |
|------|------|
| Markdown 렌더링 | Markdown → HTML 변환 및 표시 |
| 코드 하이라이팅 | 문법별 코드 색상 강조 |
| GFM 지원 | 테이블, 체크박스, 취소선 |
| 반응형 스크롤 | 긴 문서의 스크롤 뷰 |

### 1.2 지원 문서 유형

| 번호 | 파일명 | 내용 |
|------|--------|------|
| 010 | basic-design.md | 기본설계 |
| 011 | ui-design.md | 화면설계 |
| 020 | detail-design.md | 상세설계 |
| 021 | design-review-{llm}-{n}.md | 설계리뷰 |
| 030 | implementation.md | 구현 |
| 031 | code-review-{llm}-{n}.md | 코드리뷰 |
| 070 | integration-test.md | 통합테스트 |
| 080 | manual.md | 매뉴얼 |

---

## 2. 시나리오별 사용 가이드

### 시나리오 1: 문서 열기

**목표**: Task의 관련 문서를 Document Viewer에서 열람합니다.

#### 단계별 안내

**Step 1.** WBS 트리에서 Task를 선택합니다.

**Step 2.** Detail Panel의 **문서** 섹션을 펼칩니다.

**Step 3.** 열람할 문서명을 클릭합니다.

```
관련 문서
─────────────────────────────────
📄 010-basic-design.md      [존재] ← 클릭
📄 020-detail-design.md     [존재]
📄 030-implementation.md    [예정]
```

**Step 4.** Document Viewer가 열리며 문서 내용이 표시됩니다.

#### 로딩 상태

| 상태 | 표시 |
|------|------|
| 로딩 중 | Skeleton 애니메이션 |
| 로드 성공 | 렌더링된 문서 |
| 로드 실패 | 에러 메시지 + 재시도 버튼 |

---

### 시나리오 2: 코드 블록 확인

**목표**: 문서 내 코드 블록의 문법 하이라이팅을 확인합니다.

#### 지원 언어

| 언어 | 식별자 |
|------|--------|
| TypeScript | `typescript`, `ts` |
| JavaScript | `javascript`, `js` |
| Vue | `vue` |
| HTML | `html` |
| CSS | `css` |
| Bash | `bash`, `shell` |
| JSON | `json` |
| Markdown | `markdown`, `md` |

#### 코드 블록 예시

````markdown
```typescript
interface Task {
  id: string
  title: string
  status: string
}
```
````

렌더링 결과:
```
┌─────────────────────────────────────┐
│ interface Task {                    │  ← 보라색 (키워드)
│   id: string                        │  ← 파란색 (속성)
│   title: string                     │     초록색 (타입)
│   status: string                    │
│ }                                   │
└─────────────────────────────────────┘
```

#### 하이라이팅 색상 (Dark Blue 테마)

| 요소 | 색상 |
|------|------|
| 키워드 | `#c678dd` (보라색) |
| 문자열 | `#98c379` (초록색) |
| 함수 | `#61afef` (파란색) |
| 주석 | `#5c6370` (회색) |
| 배경 | `#0f0f23` (진한 남색) |

---

### 시나리오 3: GFM 요소 확인

**목표**: GitHub Flavored Markdown 확장 구문을 확인합니다.

#### 테이블

```markdown
| 항목 | 설명 |
|------|------|
| A    | 첫 번째 |
| B    | 두 번째 |
```

렌더링: 정렬된 테이블 표시

#### 체크박스

```markdown
- [x] 완료된 항목
- [ ] 미완료 항목
```

렌더링: ☑ 완료된 항목 / ☐ 미완료 항목

#### 취소선

```markdown
~~취소된 텍스트~~
```

렌더링: ~~취소된 텍스트~~

---

### 시나리오 4: 긴 문서 스크롤

**목표**: 긴 문서를 스크롤하여 필요한 부분을 찾습니다.

#### 스크롤 영역

```
┌─────────────────────────────────────┐
│ # 기본설계                          │ ↑
│                                     │ │
│ ## 1. 목적 및 범위                  │ │ 스크롤
│ ...                                 │ │ 영역
│ ## 2. 요구사항 분석                 │ │
│ ...                                 │ ↓
├─────────────────────────────────────┤
│ ████████░░░░░░░░░░░░░░░░░░░░░░░░░░│  ← 스크롤바
└─────────────────────────────────────┘
```

#### 스크롤 조작

| 조작 | 동작 |
|------|------|
| 마우스 휠 | 상하 스크롤 |
| 스크롤바 드래그 | 빠른 이동 |
| Page Up/Down | 페이지 단위 이동 |
| Home/End | 문서 처음/끝으로 |

#### 최대 높이

- 기본값: 600px
- 문서가 짧으면 내용에 맞춤
- 긴 문서는 스크롤 표시

---

### 시나리오 5: 문서 로드 실패 처리

**목표**: 문서 로드 실패 시 에러를 확인하고 재시도합니다.

#### 에러 유형

| 에러 | 메시지 | 원인 |
|------|--------|------|
| 404 | "문서를 찾을 수 없습니다" | 파일 미존재 |
| 500 | "서버 오류가 발생했습니다" | 서버 문제 |
| Timeout | "요청 시간이 초과되었습니다" | 네트워크 지연 |

#### 재시도 방법

**Step 1.** 에러 메시지 아래 **[재시도]** 버튼을 클릭합니다.

**Step 2.** 문서가 다시 로드됩니다.

```
┌─────────────────────────────────────┐
│                                     │
│    ⚠️ 문서를 찾을 수 없습니다        │
│                                     │
│         [재시도]                    │
│                                     │
└─────────────────────────────────────┘
```

---

## 3. 스타일 가이드

### 3.1 타이포그래피

| 요소 | 스타일 |
|------|--------|
| H1 | 24px, bold, #e0e0e0 |
| H2 | 20px, bold, #e0e0e0 |
| H3 | 16px, bold, #e0e0e0 |
| 본문 | 14px, normal, #b0b0b0 |
| 링크 | 14px, #6c9bcf, 밑줄 |
| 인라인 코드 | 13px, #9cdcfe, #16213e 배경 |

### 3.2 코드 블록

```
배경: #0f0f23
테두리: 1px solid #2a2a4e
패딩: 16px
border-radius: 4px
```

### 3.3 테이블

```
헤더 배경: #16213e
셀 테두리: 1px solid #2a2a4e
패딩: 8px 12px
```

---

## 4. 성능

### 4.1 렌더링 성능

| 문서 크기 | 렌더링 시간 |
|----------|------------|
| ~5KB | < 50ms |
| ~10KB | < 100ms |
| ~50KB | < 300ms |

### 4.2 캐싱

- API 응답 캐싱으로 반복 로드 시 빠른 표시
- 문서 변경 시 캐시 자동 갱신

---

## 5. 보안

### 5.1 XSS 방지

- DOMPurify로 HTML sanitization 적용
- 위험한 태그/속성 자동 제거
- `<script>`, `onerror` 등 차단

### 5.2 안전한 태그

| 허용 | 차단 |
|------|------|
| p, h1-h6, div, span | script, iframe |
| a (href 검증), img | object, embed |
| table, ul, ol, li | form, input |
| code, pre, blockquote | style (인라인) |

---

## 6. FAQ / 트러블슈팅

### Q1. 코드 하이라이팅이 적용되지 않아요.
- 코드 블록에 언어 식별자가 지정되어 있는지 확인하세요.
- 예: ` ```typescript ` (O) / ` ``` ` (X)

### Q2. 이미지가 표시되지 않아요.
- 외부 이미지 URL은 보안상 차단될 수 있습니다.
- 프로젝트 내 상대 경로 이미지를 사용하세요.

### Q3. 테이블이 깨져 보여요.
- GFM 테이블 문법을 정확히 따르고 있는지 확인하세요.
- 헤더 구분자(|---|)가 있어야 합니다.

### Q4. 문서가 너무 느리게 로드돼요.
- 네트워크 연결을 확인하세요.
- 50KB 이상 큰 문서는 로드에 시간이 걸릴 수 있습니다.

---

## 7. 접근성

### 7.1 Semantic HTML
- 제목 태그(h1-h6) 계층 구조 유지
- 목록(ul, ol)에 적절한 마크업
- 테이블에 헤더 셀 구분

### 7.2 스크린 리더
- 코드 블록: `role="code"` 적용
- 문서 영역: `aria-label="문서 내용"`
- 로딩 상태: `aria-busy="true"`

---

## 8. 관련 문서

| 문서 | 경로 |
|------|------|
| Document Viewer 설계 | `tasks/TSK-05-04/010-basic-design.md` |
| Detail Sections 설계 | `tasks/TSK-05-02/010-basic-design.md` |

---

## 9. 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.0.0 | 2025-12-16 | 초기 작성 |

---

<!--
Author: Claude
Template Version: 1.0.0
Created: 2025-12-16
Based on: TSK-05-04 (Document Viewer)
-->
