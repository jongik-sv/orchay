# 요구사항 추적성 매트릭스 (025-traceability-matrix.md)

**Template Version:** 1.0.0 — **Last Updated:** 2025-12-15

> **목적**: PRD → 기본설계 → 상세설계 → 테스트 4단계 양방향 추적
>
> **참조**: 이 문서는 `020-detail-design.md`와 `026-test-specification.md`와 함께 사용됩니다.

---

## 0. 문서 메타데이터

| 항목 | 내용 |
|------|------|
| Task ID | TSK-03-06 |
| Task명 | completed 필드 지원 (Parser/Serializer/API) |
| 상세설계 참조 | `020-detail-design.md` |
| 테스트 명세 참조 | `026-test-specification.md` |
| 작성일 | 2025-12-15 |
| 작성자 | AI Agent |

---

## 1. 기능 요구사항 추적 (FR → 설계 → 테스트)

> PRD → 기본설계 → 상세설계 → 테스트케이스 매핑

| 요구사항 ID | PRD 섹션 | 기본설계 섹션 | 상세설계 섹션 | 단위 테스트 | E2E 테스트 | 매뉴얼 TC | 상태 |
|-------------|----------|--------------|--------------|-------------|------------|-----------|------|
| FR-001 | 7.5 | 2.1, 6.1 | 7.2 | UT-001, UT-002 | E2E-001 | TC-001 | 설계완료 |
| FR-002 | 7.5 | 2.1, 6.2 | 7.3 | UT-003, UT-004 | E2E-001 | TC-001 | 설계완료 |
| FR-003 | 7.5 | 2.1, 6.3 | 7.4, 8.2 | UT-005, UT-006 | E2E-002, E2E-003 | TC-002 | 설계완료 |
| FR-004 | 7.5 | 2.1, 6.4 | 7.4, 12 | UT-007, UT-008, UT-009 | E2E-004, E2E-005 | TC-003 | 설계완료 |

### 1.1 요구사항별 상세 매핑

#### FR-001: WBS Parser가 중첩 리스트 형식의 completed 필드 파싱

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 7.5 | 단계별 완료시각 기록 (completed 필드) |
| 기본설계 | 010-basic-design.md | 2.1, 6.1 | parseCompleted() 함수 (이미 구현됨 확인) |
| 상세설계 | 020-detail-design.md | 7.2 | parseCompleted() 인터페이스 계약 |
| 단위 테스트 | 026-test-specification.md | 2.1, 2.2 | UT-001: 정상 파싱, UT-002: 빈 completed |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-001: wbs.md 파싱 검증 |

#### FR-002: WBS Serializer가 completed 필드를 올바른 형식으로 직렬화

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 7.5 | 단계별 완료시각 기록 (wbs.md 저장) |
| 기본설계 | 010-basic-design.md | 2.1, 6.2 | serializeAttributes() completed 처리 (이미 구현됨 확인) |
| 상세설계 | 020-detail-design.md | 7.3 | serializeAttributes() 인터페이스 계약 |
| 단위 테스트 | 026-test-specification.md | 2.3, 2.4 | UT-003: 정상 직렬화, UT-004: 빈 completed |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-001: 왕복 변환 검증 |

#### FR-003: Transition API 호출 시 자동으로 현재 상태의 완료 시각 기록

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 7.5 | 상태 전이 시 자동 기록 |
| 기본설계 | 010-basic-design.md | 2.1, 6.3 | executeTransition() 타임스탬프 기록 (이미 구현됨 확인) |
| 상세설계 | 020-detail-design.md | 7.4, 8.2 | executeTransition() 인터페이스, 시퀀스 다이어그램 |
| 단위 테스트 | 026-test-specification.md | 2.5, 2.6 | UT-005: 타임스탬프 기록, UT-006: 기존 항목 보존 |
| E2E 테스트 | 026-test-specification.md | 3.2, 3.3 | E2E-002: 상태 전이 후 completed 확인, E2E-003: 연속 전이 |

#### FR-004: 롤백 시 이후 단계의 completed 항목 자동 삭제

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 7.5 | 이전 단계로 롤백 시 해당 단계 이후 기록 삭제 |
| 기본설계 | 010-basic-design.md | 2.1, 6.4 | 롤백 처리 로직 설계 (미래 확장) |
| 상세설계 | 020-detail-design.md | 7.4, 12 | 롤백 감지 알고리즘, completed 삭제 알고리즘 |
| 단위 테스트 | 026-test-specification.md | 2.7, 2.8, 2.9 | UT-007: 롤백 감지, UT-008: 삭제 로직, UT-009: 경계 조건 |
| E2E 테스트 | 026-test-specification.md | 3.4, 3.5 | E2E-004: development 롤백, E2E-005: defect 롤백 |

---

## 2. 비즈니스 규칙 추적 (BR → 구현 → 검증)

| 규칙 ID | PRD 출처 | 기본설계 섹션 | 구현 위치(개념) | 단위 테스트 | E2E 테스트 | 검증 방법 | 상태 |
|---------|----------|--------------|-----------------|-------------|------------|-----------|------|
| BR-001 | 7.5 | 4, 6.3 | executeTransition() | UT-005 | E2E-002 | 타임스탬프 형식 검증 | 설계완료 |
| BR-002 | 7.5 | 4, 6.3 | executeTransition() | UT-006 | E2E-003 | 기존 항목 보존 확인 | 설계완료 |
| BR-003 | 7.5 | 4, 6.4 | executeTransition() | UT-008 | E2E-004, E2E-005 | 이후 단계 삭제 확인 | 설계완료 |
| BR-004 | 7.5 | 4, 6.3 | executeTransition() | UT-006 | E2E-003 | completed 객체 유지 확인 | 설계완료 |

### 2.1 비즈니스 규칙별 상세 매핑

#### BR-001: 타임스탬프 형식 "YYYY-MM-DD HH:mm"

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 시간 형식: `YYYY-MM-DD HH:mm` (로컬 시간) |
| **기본설계 표현** | 타임스탬프 형식 "YYYY-MM-DD HH:mm" (로컬 시간) |
| **구현 위치** | executeTransition() 내 Date 포맷팅 로직 |
| **검증 방법** | 정규식 매칭으로 형식 검증 |
| **관련 테스트** | UT-005, E2E-002 |

#### BR-002: 상태 전이 시 자동 기록

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 상태 전이(transition) API 호출 시 자동 기록 |
| **기본설계 표현** | Transition API 호출 시 자동 타임스탬프 기록 |
| **구현 위치** | executeTransition() 내 completed[newStatusCode] = timestamp 로직 |
| **검증 방법** | 전이 후 completed 필드 확인 |
| **관련 테스트** | UT-006, E2E-003 |

#### BR-003: 롤백 시 이후 단계 삭제

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 이전 단계로 롤백 시 해당 단계 이후 기록 삭제 |
| **기본설계 표현** | 롤백 시나리오: 이후 단계의 completed 항목 삭제 |
| **구현 위치** | executeTransition() 내 롤백 감지 및 삭제 로직 |
| **검증 방법** | 롤백 후 completed 필드에 이후 단계 키 없음 확인 |
| **관련 테스트** | UT-008, E2E-004, E2E-005 |

#### BR-004: 기존 completed 항목 보존

| 구분 | 내용 |
|------|------|
| **PRD 원문** | (암묵적: 이전 단계의 기록은 유지) |
| **기본설계 표현** | 새 전이 시 기존 completed 항목 보존 |
| **구현 위치** | executeTransition() 내 completed 객체 업데이트 로직 |
| **검증 방법** | 전이 전 completed 항목이 전이 후에도 존재 |
| **관련 테스트** | UT-006, E2E-003 |

---

## 3. 테스트 역추적 매트릭스

> 테스트 결과 → 요구사항 역추적용 (build/verify 단계 결과서 생성 시 활용)

| 테스트 ID | 테스트 유형 | 검증 대상 요구사항 | 검증 대상 비즈니스 규칙 | 상태 |
|-----------|------------|-------------------|----------------------|------|
| UT-001 | 단위 | FR-001 | - | 미실행 |
| UT-002 | 단위 | FR-001 | - | 미실행 |
| UT-003 | 단위 | FR-002 | - | 미실행 |
| UT-004 | 단위 | FR-002 | - | 미실행 |
| UT-005 | 단위 | FR-003 | BR-001 | 미실행 |
| UT-006 | 단위 | FR-003 | BR-002, BR-004 | 미실행 |
| UT-007 | 단위 | FR-004 | BR-003 | 미실행 |
| UT-008 | 단위 | FR-004 | BR-003 | 미실행 |
| UT-009 | 단위 | FR-004 | BR-003 | 미실행 |
| E2E-001 | E2E | FR-001, FR-002 | - | 미실행 |
| E2E-002 | E2E | FR-003 | BR-001 | 미실행 |
| E2E-003 | E2E | FR-003 | BR-002, BR-004 | 미실행 |
| E2E-004 | E2E | FR-004 | BR-003 | 미실행 |
| E2E-005 | E2E | FR-004 | BR-003 | 미실행 |
| TC-001 | 매뉴얼 | FR-001, FR-002 | - | 미실행 |
| TC-002 | 매뉴얼 | FR-003 | BR-001, BR-002 | 미실행 |
| TC-003 | 매뉴얼 | FR-004 | BR-003 | 미실행 |

---

## 4. 데이터 모델 추적

> 기본설계 엔티티 → 상세설계 타입 → API DTO 매핑

| 기본설계 엔티티 | 상세설계 타입 | Parser 입력 | Serializer 출력 | API 응답 |
|----------------|--------------|-------------|-----------------|---------|
| completed (속성) | CompletedTimestamps | 중첩 리스트 라인 | 중첩 리스트 라인 | WbsNode.completed |
| CompletedTimestamps | Record<string, string> | parseCompleted() | serializeAttributes() | types/index.ts |

---

## 5. 인터페이스 추적

> 기본설계 인터페이스 요구사항 → 상세설계 함수 매핑

| 기본설계 인터페이스 | 상세설계 함수 | 모듈 | 파라미터 | 반환값 | 요구사항 |
|--------------------|-------------|------|----------|--------|----------|
| completed 파싱 | parseCompleted() | _attributes.ts (parser) | lines, startIndex | CompletedTimestamps | FR-001 |
| completed 직렬화 | serializeAttributes() | _attributes.ts (serializer) | node | string[] | FR-002 |
| 타임스탬프 기록 | executeTransition() | transitionService.ts | taskId, command | TransitionResult | FR-003 |
| 롤백 처리 | executeTransition() | transitionService.ts | taskId, command | TransitionResult | FR-004 |

---

## 6. 프로세스 추적

> 기본설계 프로세스 흐름 → 상세설계 시퀀스 다이어그램 매핑

| 기본설계 프로세스 | 상세설계 다이어그램 | 요구사항 |
|------------------|-------------------|----------|
| 파싱 프로세스 | 8.1 (프로세스 설명) | FR-001 |
| 직렬화 프로세스 | 8.1 (프로세스 설명) | FR-002 |
| 전이 프로세스 | 8.2 (시퀀스 다이어그램) | FR-003, FR-004 |
| 롤백 알고리즘 | 8.3 (롤백 흐름도), 12 (상세 설계) | FR-004 |

---

## 7. 추적성 검증 요약

### 7.1 커버리지 통계

| 구분 | 총 항목 | 매핑 완료 | 미매핑 | 커버리지 |
|------|---------|----------|--------|---------|
| 기능 요구사항 (FR) | 4 | 4 | 0 | 100% |
| 비즈니스 규칙 (BR) | 4 | 4 | 0 | 100% |
| 단위 테스트 (UT) | 9 | 9 | 0 | 100% |
| E2E 테스트 | 5 | 5 | 0 | 100% |
| 매뉴얼 테스트 (TC) | 3 | 3 | 0 | 100% |

### 7.2 미매핑 항목 (있는 경우)

| 구분 | ID | 설명 | 미매핑 사유 |
|------|-----|------|-----------|
| - | - | - | - |

---

## 8. 구현 검증 매트릭스

> 기존 구현 확인 및 신규 구현 항목 추적

| 컴포넌트 | 기존 구현 확인 | 신규 구현 필요 | 검증 방법 | 상태 |
|----------|--------------|--------------|----------|------|
| parseCompleted() | ✅ 존재 확인됨 (라인 223-254) | 검증 테스트 작성 | UT-001, UT-002 | 설계완료 |
| serializeAttributes() | ✅ 존재 확인됨 (라인 66-72) | 검증 테스트 작성 | UT-003, UT-004 | 설계완료 |
| executeTransition() 타임스탬프 | ✅ 존재 확인됨 (라인 199-219) | 검증 테스트 작성 | UT-005, UT-006 | 설계완료 |
| executeTransition() 롤백 | ❌ 미구현 | 롤백 로직 구현 | UT-007, UT-008, UT-009 | 설계완료 |

---

## 9. 테스트 커버리지 목표

### 9.1 요구사항별 테스트 커버리지

| 요구사항 | 단위 테스트 | E2E 테스트 | 매뉴얼 테스트 | 총 커버리지 |
|---------|------------|-----------|-------------|------------|
| FR-001 | 2개 | 1개 | 1개 | 100% |
| FR-002 | 2개 | 1개 | 1개 | 100% |
| FR-003 | 2개 | 2개 | 1개 | 100% |
| FR-004 | 3개 | 2개 | 1개 | 100% |

### 9.2 비즈니스 규칙별 테스트 커버리지

| 규칙 | 단위 테스트 | E2E 테스트 | 총 커버리지 |
|------|------------|-----------|------------|
| BR-001 | 1개 | 1개 | 100% |
| BR-002 | 1개 | 1개 | 100% |
| BR-003 | 2개 | 2개 | 100% |
| BR-004 | 1개 | 1개 | 100% |

---

## 관련 문서

- 상세설계: `020-detail-design.md`
- 테스트 명세: `026-test-specification.md`
- 기본설계: `010-basic-design.md`
- PRD: `.orchay/projects/orchay/prd.md`

---

<!--
author: AI Agent
Template Version: 1.0.0
-->
