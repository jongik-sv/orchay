# [wf:review] LLM 설계 리뷰: WBS Parser

> **Review Meta**
> * **Task ID**: TSK-02-02-01
> * **Task Name**: wbs.md 파서 구현
> * **Reviewer**: Gemini (Agentic)
> * **Date**: 2025-12-14
> * **Version**: 1차 리뷰

---

## 1. 리뷰 요약

| 검증 영역 | 평가 | 비고 |
|-----------|------|------|
| **문서 완전성** | ✅ **PASS** | `020`, `025`, `026` 및 `010` 모두 완비됨 |
| **요구사항 추적성** | ✅ **PASS** | FR/BR/AC -> 설계 -> 테스트 추적성 100% 확보 |
| **아키텍처/구조** | ✅ **PASS** | 정규식 기반 단일 순회 파싱 및 트리 빌드 로직 명확함 |
| **보안** | ✅ **PASS** | 정규식 ReDoS 및 입력 검증 전략 수립됨 |
| **테스트 가능성** | ✅ **PASS** | 단위/통합/성능 테스트로 체계적으로 분류됨 |

### 이슈 분포

| 우선순위 | Critical | High | Medium | Low | Info | 합계 |
|----------|----------|------|--------|-----|------|------|
| **P1** | 0 | 0 | 0 | 0 | 0 | 0 |
| **P2** | 0 | 0 | 0 | 0 | 0 | 0 |
| **P3** | 0 | 0 | 0 | 0 | 0 | 0 |
| **P4** | 0 | 0 | 1 | 0 | 0 | 1 |
| **P5** | 0 | 0 | 0 | 0 | 2 | 2 |
| **합계** | 0 | 0 | 1 | 0 | 2 | 3 |

---

## 2. 상세 리뷰 내용

### 2.1 강점 (Strengths)

1.  **알고리즘 상세화**: `parseWbsMarkdown`, `buildTree`, `calculateProgress` 등의 핵심 함수의 로직이 의사코드(Pseudo-code) 수준으로 상세히 기술되어 있어, 구현 시 모호함이 적습니다.
2.  **명확한 정규식 정의**: ID 파싱 및 속성 추출을 위한 정규식 패턴(`HEADER_PATTERN`, `SCHEDULE_PATTERN` 등)이 구체적으로 정의되어 있습니다.
3.  **성능 고려**: 1회 순회 파싱 전략과 Map 기반 조회 등 대규모 데이터 처리를 위한 성능 최적화 전략이 포함되어 있습니다.

### 2.2 개선 사항 (Improvements)

#### [P4/Medium] Logic: 진행률 계산 시 0으로 나누기 방지
*   **위치**: `020-detail-design.md` 섹션 3.5 (`calculateProgress` 알고리즘)
*   **내용**: `totalTasks`가 0일 때 `completedTasks / totalTasks` 연산에 대한 방어 로직이 의사코드 상에는 `if totalTasks > 0`으로 존재하나, 실제 구현 시 하위 노드가 모두 WP/ACT이고 Task가 없는 경우(TaskCount=0)에 대한 명확한 처리가 중요합니다.
*   **권장**: `totalTasks`가 0일 경우 진행률을 0으로 명확히 할당하고, 상위 노드로 전파되는 로직에서도 `Infinity`나 `NaN`이 발생하지 않도록 주의가 필요합니다. 테스트 케이스 `TC-004-005`를 강화하여 이 시나리오를 검증하십시오.

#### [P5/Info] Logic: ID 포맷 유연성 (Fuzzy Matching)
*   **위치**: `020-detail-design.md` 섹션 3.2 (ID 패턴)
*   **내용**: 현재는 엄격한 ID 패턴(`WP-XX`, `ACT-XX-XX`)을 요구합니다. 사용자가 오타(`wp-01`, `WP01`)를 냈을 때 단순히 오류 처리하거나 무시하는 것보다, 향후에는 유연한 파싱이나 린트 기능을 고려해볼 수 있습니다.
*   **권장**: 이번 단계에서는 구현하지 않더라도, "향후 개선 사항"으로 기록해두면 좋습니다.

#### [P5/Info] Test: 대용량 데이터 테스트 데이터 생성
*   **위치**: `026-test-specification.md` 섹션 7
*   **내용**: 1000개 노드 성능 테스트를 위한 데이터(`large-1000.md`) 생성 방안이 명시되면 좋습니다.
*   **권장**: 테스트 실행 시 동적으로 대용량 마크다운을 생성하는 유틸리티 함수를 테스트 코드 내에 포함시키는 것을 제안합니다.

---

## 3. 종합 의견 및 다음 단계

설계가 매우 구체적이고 완성도가 높습니다. 구현을 위한 준비가 완료되었습니다.

### Next Steps
1.  **반영 결정**: `/wf:apply TSK-02-02-01` (선택 사항, P4 이슈 반영 여부)
2.  **구현 시작**: `/wf:build TSK-02-02-01`
