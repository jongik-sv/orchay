# TSK-01-02 - ì—ë””í„° ì½˜í…ì¸  ì €ì¥/ë¡œë“œ êµ¬í˜„ ì„¤ê³„ ë¬¸ì„œ

## ë¬¸ì„œ ì •ë³´

| í•­ëª© | ë‚´ìš© |
|------|------|
| Task ID | TSK-01-02 |
| ë¬¸ì„œ ë²„ì „ | 1.0 |
| ì‘ì„±ì¼ | 2026-01-02 |
| ìƒíƒœ | ì‘ì„±ì¤‘ |
| ì¹´í…Œê³ ë¦¬ | development |

---

## 1. ê°œìš”

### 1.1 ë°°ê²½ ë° ë¬¸ì œ ì •ì˜

**í˜„ì¬ ìƒí™©:**
- TSK-01-01ì—ì„œ BlockNote ì—ë””í„°ê°€ ê¸°ë³¸ í†µí•©ë˜ì–´ í…ìŠ¤íŠ¸ ì…ë ¥ ë° ê¸°ë³¸ ë¸”ë¡ ìœ í˜•ì´ ë™ì‘í•¨
- ì—ë””í„°ì—ì„œ ì‘ì„±í•œ ì½˜í…ì¸ ê°€ ë©”ëª¨ë¦¬ì—ë§Œ ì¡´ì¬í•˜ê³  ìƒˆë¡œê³ ì¹¨ ì‹œ ìœ ì‹¤ë¨
- í˜ì´ì§€ ë¡œë“œ ì‹œ í•­ìƒ ë¹ˆ ì—ë””í„°ê°€ í‘œì‹œë¨

**í•´ê²°í•˜ë ¤ëŠ” ë¬¸ì œ:**
- ì‚¬ìš©ìê°€ ì‘ì„±í•œ ì½˜í…ì¸ ê°€ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥ë˜ì§€ ì•ŠìŒ
- í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ì—´ì—ˆì„ ë•Œ ì´ì „ì— ì‘ì„±í•œ ë‚´ìš©ì„ ë³µì›í•  ìˆ˜ ì—†ìŒ
- í¸ì§‘ ì¤‘ ë°ì´í„° ì†ì‹¤ ìœ„í—˜ì´ ì¡´ì¬í•¨

### 1.2 ëª©ì  ë° ê¸°ëŒ€ íš¨ê³¼

**ëª©ì :**
- ì—ë””í„° ì½˜í…ì¸ ë¥¼ SQLite ë°ì´í„°ë² ì´ìŠ¤ì— ì˜êµ¬ ì €ì¥
- í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ì½˜í…ì¸ ë¥¼ ìë™ìœ¼ë¡œ ë³µì›
- ì‚¬ìš©ì í¸ì§‘ ê²½í—˜ì˜ ì—°ì†ì„± ë³´ì¥

**ê¸°ëŒ€ íš¨ê³¼:**
- ì‚¬ìš©ì ê´€ì : ì‘ì„±í•œ ë‚´ìš©ì´ ìë™ìœ¼ë¡œ ì €ì¥ë˜ì–´ ë°ì´í„° ì†ì‹¤ ê±±ì • ì—†ì´ ì‘ì—… ê°€ëŠ¥
- ë¹„ì¦ˆë‹ˆìŠ¤ ê´€ì : Notionê³¼ ìœ ì‚¬í•œ ì‹ ë¢°ì„± ìˆëŠ” í¸ì§‘ ê²½í—˜ ì œê³µ

### 1.3 ë²”ìœ„

**í¬í•¨:**
- ì—ë””í„° onChange ì½œë°±ì„ í†µí•œ ì½˜í…ì¸  JSON ì¶”ì¶œ
- PUT /api/pages/:id APIë¥¼ í†µí•œ DB ì €ì¥
- í˜ì´ì§€ ë¡œë“œ ì‹œ initialContent ì „ë‹¬
- ìë™ ì €ì¥ (debounce 1ì´ˆ ì ìš©)
- ì €ì¥ ì¤‘ ìƒíƒœ í‘œì‹œ (ì„ íƒì )

**ì œì™¸:**
- ì‹¤ì‹œê°„ í˜‘ì—… ë™ê¸°í™” (í–¥í›„ ê³¼ì œ)
- ë²„ì „ íˆìŠ¤í† ë¦¬ ê´€ë¦¬ (í–¥í›„ ê³¼ì œ)
- ì˜¤í”„ë¼ì¸ ì €ì¥ í (í–¥í›„ ê³¼ì œ)

### 1.4 ì°¸ì¡° ë¬¸ì„œ

| ë¬¸ì„œ | ê²½ë¡œ | ê´€ë ¨ ì„¹ì…˜ |
|------|------|----------|
| PRD | `.orchay/projects/notion-like/prd.md` | 2.1 ë¸”ë¡ ê¸°ë°˜ ì—ë””í„° |
| TRD | `.orchay/projects/notion-like/trd.md` | 3.3 ì—ë””í„° ì˜ì—­, 5 ë°ì´í„°ë² ì´ìŠ¤, 7 API ì—”ë“œí¬ì¸íŠ¸ |

---

## 2. ì‚¬ìš©ì ë¶„ì„

### 2.1 ëŒ€ìƒ ì‚¬ìš©ì

| ì‚¬ìš©ì ìœ í˜• | íŠ¹ì„± | ì£¼ìš” ë‹ˆì¦ˆ |
|------------|------|----------|
| ì¼ë°˜ ì‚¬ìš©ì | ë¬¸ì„œ ì‘ì„±ì, ê¸°ìˆ  ìˆ˜ì¤€ ë‹¤ì–‘ | ì‘ì„± ë‚´ìš©ì´ ìë™ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì €ì¥ë˜ê¸¸ ì›í•¨ |
| íŒŒì›Œ ìœ ì € | ë§ì€ ë¬¸ì„œë¥¼ ê´€ë¦¬, ë†’ì€ ê¸°ìˆ  ì´í•´ë„ | ë¹ ë¥¸ ì €ì¥, ì €ì¥ ìƒíƒœ í™•ì¸ ì›í•¨ |

### 2.2 ì‚¬ìš©ì í˜ë¥´ì†Œë‚˜

**í˜ë¥´ì†Œë‚˜ 1: ê¹€ì‘ì„±**
- ì—­í• : ì¼ë°˜ ì‚¬ìš©ì, ë¬¸ì„œ ì‘ì„±ì
- ëª©í‘œ: ì•„ì´ë””ì–´ì™€ ë©”ëª¨ë¥¼ ë¹ ë¥´ê²Œ ê¸°ë¡í•˜ê³  ì–¸ì œë“  ì ‘ê·¼
- ë¶ˆë§Œ: ì €ì¥ ë²„íŠ¼ì„ ëˆ„ë¥´ì§€ ì•Šì•„ ì‘ì„± ë‚´ìš©ì´ ë‚ ì•„ê°„ ê²½í—˜
- ì‹œë‚˜ë¦¬ì˜¤: íšŒì˜ ì¤‘ ë…¸íŠ¸ ì‘ì„±, ë¸Œë¼ìš°ì € íƒ­ ë‹«ì•˜ë‹¤ê°€ ë‹¤ì‹œ ì—´ì—ˆì„ ë•Œ ë‚´ìš© ìœ ì§€ ê¸°ëŒ€

---

## 3. ìœ ì¦ˆì¼€ì´ìŠ¤

### 3.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

```mermaid
flowchart LR
    subgraph ì‹œìŠ¤í…œ
        UC01[UC-01: ì—ë””í„° ì½˜í…ì¸  ì €ì¥]
        UC02[UC-02: í˜ì´ì§€ ì½˜í…ì¸  ë¡œë“œ]
        UC03[UC-03: ìë™ ì €ì¥]
    end

    ì‚¬ìš©ì((ì‚¬ìš©ì)) --> UC01
    ì‚¬ìš©ì --> UC02
    ì‹œìŠ¤í…œìë™((ì‹œìŠ¤í…œ)) --> UC03
```

### 3.2 ìœ ì¦ˆì¼€ì´ìŠ¤ ìƒì„¸

#### UC-01: ì—ë””í„° ì½˜í…ì¸  ì €ì¥

| í•­ëª© | ë‚´ìš© |
|------|------|
| ì•¡í„° | ì‚¬ìš©ì (ê°„ì ‘ì ìœ¼ë¡œ ì‹œìŠ¤í…œ) |
| ëª©ì  | ì—ë””í„°ì—ì„œ ìˆ˜ì •ëœ ì½˜í…ì¸ ë¥¼ DBì— ì €ì¥ |
| ì‚¬ì „ ì¡°ê±´ | í˜ì´ì§€ê°€ ë¡œë“œë˜ì–´ ìˆê³  ì—ë””í„°ê°€ í™œì„±í™”ë¨ |
| ì‚¬í›„ ì¡°ê±´ | ì½˜í…ì¸ ê°€ pages í…Œì´ë¸”ì˜ content ì»¬ëŸ¼ì— JSON í˜•íƒœë¡œ ì €ì¥ë¨ |
| íŠ¸ë¦¬ê±° | ì—ë””í„° ë‚´ìš© ë³€ê²½ í›„ 1ì´ˆ debounce ì™„ë£Œ |

**ê¸°ë³¸ íë¦„:**
1. ì‚¬ìš©ìê°€ ì—ë””í„°ì—ì„œ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ ë¸”ë¡ì„ ìˆ˜ì •í•œë‹¤
2. onChange ì½œë°±ì´ í˜¸ì¶œë˜ì–´ editor.documentë¥¼ JSONìœ¼ë¡œ ì§ë ¬í™”í•œë‹¤
3. debounce (1ì´ˆ) í›„ PUT /api/pages/:id APIë¥¼ í˜¸ì¶œí•œë‹¤
4. APIê°€ pages í…Œì´ë¸”ì˜ content ì»¬ëŸ¼ì„ ì—…ë°ì´íŠ¸í•œë‹¤
5. ì €ì¥ ì„±ê³µ ì‹œ ì €ì¥ ìƒíƒœ í‘œì‹œê°€ ì‚¬ë¼ì§„ë‹¤ (ì„ íƒ)

**ì˜ˆì™¸ íë¦„:**
- 4a. API í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ:
  - ì½˜ì†”ì— ì—ëŸ¬ ë¡œê·¸ ì¶œë ¥
  - ì¬ì‹œë„ ë¡œì§ì€ ì´ë²ˆ ë²”ìœ„ì—ì„œ ì œì™¸ (í–¥í›„)

#### UC-02: í˜ì´ì§€ ì½˜í…ì¸  ë¡œë“œ

| í•­ëª© | ë‚´ìš© |
|------|------|
| ì•¡í„° | ì‚¬ìš©ì |
| ëª©ì  | ì €ì¥ëœ ì½˜í…ì¸ ë¥¼ ì—ë””í„°ì— í‘œì‹œ |
| ì‚¬ì „ ì¡°ê±´ | ìœ íš¨í•œ pageIdë¡œ í˜ì´ì§€ ë¼ìš°íŠ¸ ì ‘ê·¼ |
| ì‚¬í›„ ì¡°ê±´ | ì—ë””í„°ì— ì €ì¥ëœ ì½˜í…ì¸ ê°€ ë Œë”ë§ë¨ |
| íŠ¸ë¦¬ê±° | í˜ì´ì§€ URL ì ‘ê·¼ ë˜ëŠ” ì‚¬ì´ë“œë°”ì—ì„œ í˜ì´ì§€ í´ë¦­ |

**ê¸°ë³¸ íë¦„:**
1. ì‚¬ìš©ìê°€ /[pageId] URLë¡œ ì ‘ê·¼í•œë‹¤
2. ì„œë²„ì—ì„œ GET /api/pages/:idë¥¼ í˜¸ì¶œí•˜ì—¬ í˜ì´ì§€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤
3. content ì»¬ëŸ¼ì˜ JSONì„ íŒŒì‹±í•˜ì—¬ initialContentë¡œ ì „ë‹¬í•œë‹¤
4. BlockNote ì—ë””í„°ê°€ initialContentë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¸”ë¡ì„ ë Œë”ë§í•œë‹¤

**ì˜ˆì™¸ íë¦„:**
- 3a. contentê°€ nullì´ê±°ë‚˜ ë¹ˆ ë¬¸ìì—´ì´ë©´:
  - ë¹ˆ ì—ë””í„°ë¡œ ì‹œì‘ (ê¸°ë³¸ paragraph ë¸”ë¡)

#### UC-03: ìë™ ì €ì¥

| í•­ëª© | ë‚´ìš© |
|------|------|
| ì•¡í„° | ì‹œìŠ¤í…œ (ìë™) |
| ëª©ì  | ì‚¬ìš©ì ê°œì… ì—†ì´ ì£¼ê¸°ì ìœ¼ë¡œ ì½˜í…ì¸  ì €ì¥ |
| ì‚¬ì „ ì¡°ê±´ | ì—ë””í„° ë‚´ìš©ì´ ë³€ê²½ë¨ |
| ì‚¬í›„ ì¡°ê±´ | ìµœì‹  ì½˜í…ì¸ ê°€ DBì— ì €ì¥ë¨ |
| íŠ¸ë¦¬ê±° | onChange ì´ë²¤íŠ¸ ë°œìƒ í›„ 1ì´ˆ debounce |

**ê¸°ë³¸ íë¦„:**
1. ì—ë””í„°ì—ì„œ ë³€ê²½ì´ ê°ì§€ëœë‹¤ (onChange)
2. debounce íƒ€ì´ë¨¸ê°€ ì‹œì‘ëœë‹¤ (1ì´ˆ)
3. 1ì´ˆ ë‚´ì— ì¶”ê°€ ë³€ê²½ì´ ì—†ìœ¼ë©´ ì €ì¥ APIë¥¼ í˜¸ì¶œí•œë‹¤
4. 1ì´ˆ ë‚´ì— ì¶”ê°€ ë³€ê²½ì´ ìˆìœ¼ë©´ íƒ€ì´ë¨¸ë¥¼ ë¦¬ì…‹í•œë‹¤

---

## 4. ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤

### 4.1 ì‹œë‚˜ë¦¬ì˜¤ 1: ì¼ë°˜ì ì¸ ë¬¸ì„œ ì‘ì„±

**ìƒí™© ì„¤ëª…:**
ì‚¬ìš©ìê°€ ë…¸íŠ¸ í˜ì´ì§€ë¥¼ ì—´ê³  íšŒì˜ ë‚´ìš©ì„ ê¸°ë¡í•œë‹¤. ì‘ì„± ì¤‘ê°„ì— ë‹¤ë¥¸ íƒ­ìœ¼ë¡œ ì´ë™í–ˆë‹¤ê°€ ëŒì•„ì˜¤ë©´ ì‘ì„± ë‚´ìš©ì´ ê·¸ëŒ€ë¡œ ìœ ì§€ë˜ì–´ ìˆë‹¤.

**ë‹¨ê³„ë³„ ì§„í–‰:**

| ë‹¨ê³„ | ì‚¬ìš©ì í–‰ë™ | ì‹œìŠ¤í…œ ë°˜ì‘ | ì‚¬ìš©ì ê¸°ëŒ€ |
|------|-----------|------------|------------|
| 1 | í˜ì´ì§€ í´ë¦­ | DBì—ì„œ ì½˜í…ì¸  ë¡œë“œ, ì—ë””í„°ì— í‘œì‹œ | ì´ì „ ì‘ì„± ë‚´ìš© í‘œì‹œ |
| 2 | í…ìŠ¤íŠ¸ ì…ë ¥ | onChange ê°ì§€, debounce ì‹œì‘ | ìì—°ìŠ¤ëŸ¬ìš´ íƒ€ì´í•‘ |
| 3 | 1ì´ˆ ëŒ€ê¸° | PUT API í˜¸ì¶œ, DB ì €ì¥ | (ì‚¬ìš©ìëŠ” ì¸ì§€ ëª»í•¨) |
| 4 | ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨ | í˜ì´ì§€ ë‹¤ì‹œ ë¡œë“œ | ì‘ì„± ë‚´ìš© ê·¸ëŒ€ë¡œ í‘œì‹œ |

**ì„±ê³µ ì¡°ê±´:**
- ìƒˆë¡œê³ ì¹¨ í›„ ëª¨ë“  ì½˜í…ì¸ ê°€ ì •í™•íˆ ë³µì›ë¨
- ë¸”ë¡ ìˆœì„œ, ì„œì‹, ë‚´ìš©ì´ ì €ì¥ ì „ê³¼ ë™ì¼

### 4.2 ì‹œë‚˜ë¦¬ì˜¤ 2: ë¹ ë¥¸ ì—°ì† í¸ì§‘

**ìƒí™© ì„¤ëª…:**
ì‚¬ìš©ìê°€ ë¹ ë¥´ê²Œ ì—¬ëŸ¬ ë¬¸ì¥ì„ ì—°ì†ìœ¼ë¡œ ì…ë ¥í•œë‹¤. debounceê°€ ì œëŒ€ë¡œ ë™ì‘í•˜ì—¬ ë¶ˆí•„ìš”í•œ API í˜¸ì¶œì„ ë°©ì§€í•œë‹¤.

**ë‹¨ê³„ë³„ ì§„í–‰:**

| ë‹¨ê³„ | ì‚¬ìš©ì í–‰ë™ | ì‹œìŠ¤í…œ ë°˜ì‘ | ê¸°ëŒ€ ê²°ê³¼ |
|------|-----------|------------|----------|
| 1 | ì²« ë¬¸ì¥ ì…ë ¥ | debounce íƒ€ì´ë¨¸ ì‹œì‘ (1ì´ˆ) | API í˜¸ì¶œ ì—†ìŒ |
| 2 | 0.5ì´ˆ í›„ ë‘ ë²ˆì§¸ ë¬¸ì¥ ì…ë ¥ | íƒ€ì´ë¨¸ ë¦¬ì…‹ | API í˜¸ì¶œ ì—†ìŒ |
| 3 | 0.5ì´ˆ í›„ ì„¸ ë²ˆì§¸ ë¬¸ì¥ ì…ë ¥ | íƒ€ì´ë¨¸ ë¦¬ì…‹ | API í˜¸ì¶œ ì—†ìŒ |
| 4 | 1ì´ˆ ëŒ€ê¸° | PUT API 1íšŒ í˜¸ì¶œ | ìµœì¢… ì½˜í…ì¸ ë§Œ ì €ì¥ |

---

## 5. í™”ë©´ ì„¤ê³„

### 5.1 í™”ë©´ íë¦„ë„

```mermaid
flowchart LR
    A[í˜ì´ì§€ ë¡œë“œ] --> B[DBì—ì„œ ì½˜í…ì¸  ì¡°íšŒ]
    B --> C{ì½˜í…ì¸  ì¡´ì¬?}
    C -->|Yes| D[initialContentë¡œ ì—ë””í„° ì´ˆê¸°í™”]
    C -->|No| E[ë¹ˆ ì—ë””í„° ì´ˆê¸°í™”]
    D --> F[ì—ë””í„° í‘œì‹œ]
    E --> F
    F --> G[ì‚¬ìš©ì í¸ì§‘]
    G --> H[onChange ë°œìƒ]
    H --> I[debounce 1ì´ˆ]
    I --> J[PUT API í˜¸ì¶œ]
    J --> G
```

### 5.2 í™”ë©´ë³„ ìƒì„¸

#### í™”ë©´ 1: ì—ë””í„° í˜ì´ì§€ (ê¸°ì¡´ í™”ë©´ì— ì €ì¥ ê¸°ëŠ¥ ì¶”ê°€)

**í™”ë©´ ëª©ì :**
TSK-01-01ì—ì„œ êµ¬í˜„ëœ ì—ë””í„°ì— ì €ì¥/ë¡œë“œ ê¸°ëŠ¥ ì—°ë™

**ì§„ì… ê²½ë¡œ:**
- /[pageId] URL ì§ì ‘ ì ‘ê·¼
- ì‚¬ì´ë“œë°”ì—ì„œ í˜ì´ì§€ í´ë¦­

**ì™€ì´ì–´í”„ë ˆì„:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    í˜ì´ì§€ í—¤ë”                       â”‚   â”‚
â”‚  â”‚  ğŸ“„ ì•„ì´ì½˜    í˜ì´ì§€ ì œëª©                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚              BlockNote ì—ë””í„° ì˜ì—­                   â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚   [ì €ì¥ëœ ì½˜í…ì¸ ê°€ initialContentë¡œ í‘œì‹œ]           â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚   ì‚¬ìš©ì í¸ì§‘ â†’ onChange â†’ debounce â†’ ìë™ ì €ì¥     â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  (ì„ íƒ) ì €ì¥ ìƒíƒœ í‘œì‹œ: "ì €ì¥ ì¤‘..." / "ì €ì¥ë¨"      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í™”ë©´ ìš”ì†Œ ì„¤ëª…:**

| ì˜ì—­ | ì„¤ëª… | ì‚¬ìš©ì ì¸í„°ë™ì…˜ |
|------|------|----------------|
| BlockNote ì—ë””í„° | ì½˜í…ì¸  í¸ì§‘ ì˜ì—­ | í…ìŠ¤íŠ¸ ì…ë ¥, ë¸”ë¡ ì¡°ì‘ |
| ì €ì¥ ìƒíƒœ í‘œì‹œ (ì„ íƒ) | í˜„ì¬ ì €ì¥ ìƒíƒœ | ì½ê¸° ì „ìš© |

**ì‚¬ìš©ì í–‰ë™ ì‹œë‚˜ë¦¬ì˜¤:**
1. ì‚¬ìš©ìê°€ í˜ì´ì§€ì— ì§„ì…í•˜ë©´ ì €ì¥ëœ ì½˜í…ì¸ ê°€ ì—ë””í„°ì— í‘œì‹œë¨
2. í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ ë¸”ë¡ì„ ìˆ˜ì •í•˜ë©´ ìë™ìœ¼ë¡œ ì €ì¥ë¨
3. ìƒˆë¡œê³ ì¹¨í•´ë„ ì½˜í…ì¸ ê°€ ìœ ì§€ë¨

---

## 6. ì¸í„°ë™ì…˜ ì„¤ê³„

### 6.1 ì‚¬ìš©ì ì•¡ì…˜ê³¼ í”¼ë“œë°±

| ì‚¬ìš©ì ì•¡ì…˜ | ì¦‰ê° í”¼ë“œë°± | ê²°ê³¼ í”¼ë“œë°± | ì—ëŸ¬ í”¼ë“œë°± |
|------------|-----------|------------|------------|
| ì—ë””í„° í¸ì§‘ | í…ìŠ¤íŠ¸ í‘œì‹œ | (ìë™ ì €ì¥ë¨) | ì½˜ì†” ë¡œê·¸ |
| í˜ì´ì§€ ë¡œë“œ | ë¡œë”© ìƒíƒœ | ì½˜í…ì¸  í‘œì‹œ | ì—ëŸ¬ í˜ì´ì§€ |

### 6.2 ìƒíƒœë³„ í™”ë©´ ë³€í™”

| ìƒíƒœ | í™”ë©´ í‘œì‹œ | ì‚¬ìš©ì ì•ˆë‚´ |
|------|----------|------------|
| ì½˜í…ì¸  ë¡œë“œ ì¤‘ | ì—ë””í„° ìŠ¤ì¼ˆë ˆí†¤ (ë˜ëŠ” ë¹ˆ ì—ë””í„°) | - |
| ì €ì¥ ì¤‘ | (ì„ íƒ) "ì €ì¥ ì¤‘..." í…ìŠ¤íŠ¸ | ì‘ì—… ì§„í–‰ ì¤‘ |
| ì €ì¥ ì™„ë£Œ | (ì„ íƒ) "ì €ì¥ë¨" ë˜ëŠ” í‘œì‹œ ì‚¬ë¼ì§ | ì•ˆì „í•˜ê²Œ ì €ì¥ë¨ |
| ì €ì¥ ì‹¤íŒ¨ | ì½˜ì†” ì—ëŸ¬ | (MVPì—ì„œëŠ” ë³„ë„ UI ì—†ìŒ) |

---

## 7. ë°ì´í„° ìš”êµ¬ì‚¬í•­

### 7.1 í•„ìš”í•œ ë°ì´í„°

| ë°ì´í„° | ì„¤ëª… | ì¶œì²˜ | ìš©ë„ |
|--------|------|------|------|
| page.id | í˜ì´ì§€ ê³ ìœ  ì‹ë³„ì | URL params (pageId) | API í˜¸ì¶œ ì‹œ ëŒ€ìƒ ì§€ì • |
| page.content | BlockNote ë¬¸ì„œ JSON | pages í…Œì´ë¸” content ì»¬ëŸ¼ | ì—ë””í„° initialContent |
| editor.document | í˜„ì¬ ì—ë””í„° ë¸”ë¡ ë°°ì—´ | BlockNote API | ì €ì¥í•  ì½˜í…ì¸  |

### 7.2 ë°ì´í„° ê´€ê³„

```mermaid
erDiagram
    pages ||--o| content : contains
    pages {
        text id PK
        text title
        text icon
        text cover_url
        text parent_id FK
        text content "BlockNote JSON"
        integer is_favorite
        integer sort_order
        text created_at
        text updated_at
    }
```

**ê´€ê³„ ì„¤ëª…:**
- pages í…Œì´ë¸”ì˜ content ì»¬ëŸ¼ì— BlockNote documentë¥¼ JSON ë¬¸ìì—´ë¡œ ì €ì¥
- JSON êµ¬ì¡°: `[{ type: "paragraph", content: [...], ... }, ...]`

### 7.3 ë°ì´í„° ìœ íš¨ì„± ê·œì¹™

| ë°ì´í„° í•„ë“œ | ê·œì¹™ | ìœ„ë°˜ ì‹œ ë©”ì‹œì§€ |
|------------|------|---------------|
| content | JSON í˜•ì‹ | "ìœ íš¨í•˜ì§€ ì•Šì€ ì½˜í…ì¸  í˜•ì‹" |
| pageId | ì¡´ì¬í•˜ëŠ” í˜ì´ì§€ | "í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" (404) |

---

## 8. ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™

### 8.1 í•µì‹¬ ê·œì¹™

| ê·œì¹™ ID | ê·œì¹™ ì„¤ëª… | ì ìš© ìƒí™© | ì˜ˆì™¸ |
|---------|----------|----------|------|
| BR-01 | ì½˜í…ì¸  ë³€ê²½ ì‹œ ìë™ ì €ì¥ | ì—ë””í„°ì—ì„œ ëª¨ë“  ë³€ê²½ ë°œìƒ ì‹œ | debounce ì¤‘ ì¶”ê°€ ë³€ê²½ ë°œìƒ |
| BR-02 | debounce ê°„ê²© 1ì´ˆ | ë§ˆì§€ë§‰ ë³€ê²½ í›„ 1ì´ˆ ëŒ€ê¸° | ì—†ìŒ |
| BR-03 | ì½˜í…ì¸ ëŠ” JSON ë¬¸ìì—´ë¡œ ì €ì¥ | DB ì €ì¥ ì‹œ | ì—†ìŒ |

### 8.2 ê·œì¹™ ìƒì„¸ ì„¤ëª…

**BR-01: ìë™ ì €ì¥**

ì„¤ëª…: ì‚¬ìš©ìê°€ ì—ë””í„°ì—ì„œ ì–´ë–¤ ë³€ê²½ì„ í•˜ë”ë¼ë„ (í…ìŠ¤íŠ¸ ì…ë ¥, ë¸”ë¡ ì¶”ê°€/ì‚­ì œ, ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë“±) ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ì €ì¥í•œë‹¤. ì‚¬ìš©ìëŠ” ë³„ë„ì˜ ì €ì¥ ë²„íŠ¼ì„ ëˆ„ë¥¼ í•„ìš”ê°€ ì—†ë‹¤.

ì˜ˆì‹œ:
- í…ìŠ¤íŠ¸ ì…ë ¥ ì‹œ: 1ì´ˆ í›„ ìë™ ì €ì¥
- ë¸”ë¡ ìˆœì„œ ë³€ê²½ ì‹œ: 1ì´ˆ í›„ ìë™ ì €ì¥
- ë¸”ë¡ ì‚­ì œ ì‹œ: 1ì´ˆ í›„ ìë™ ì €ì¥

**BR-02: debounce ê°„ê²©**

ì„¤ëª…: ì—°ì†ì ì¸ ì…ë ¥ ì‹œ ë§¤ë²ˆ APIë¥¼ í˜¸ì¶œí•˜ë©´ ì„œë²„ ë¶€í•˜ê°€ ì¦ê°€í•˜ê³  ì„±ëŠ¥ì´ ì €í•˜ëœë‹¤. ë§ˆì§€ë§‰ ë³€ê²½ í›„ 1ì´ˆ ë™ì•ˆ ì¶”ê°€ ë³€ê²½ì´ ì—†ì„ ë•Œë§Œ ì €ì¥ì„ ì‹¤í–‰í•œë‹¤.

ì˜ˆì‹œ:
- 0.5ì´ˆ ê°„ê²©ìœ¼ë¡œ 3ë²ˆ ì…ë ¥: API í˜¸ì¶œ 1íšŒ (ë§ˆì§€ë§‰ ì…ë ¥ í›„ 1ì´ˆ ë’¤)
- 2ì´ˆ ê°„ê²©ìœ¼ë¡œ 3ë²ˆ ì…ë ¥: API í˜¸ì¶œ 3íšŒ (ê° ì…ë ¥ í›„ 1ì´ˆ ë’¤)

---

## 9. ì—ëŸ¬ ì²˜ë¦¬

### 9.1 ì˜ˆìƒ ì—ëŸ¬ ìƒí™©

| ìƒí™© | ì›ì¸ | ì‚¬ìš©ì ë©”ì‹œì§€ | ë³µêµ¬ ë°©ë²• |
|------|------|--------------|----------|
| í˜ì´ì§€ ì—†ìŒ | ì˜ëª»ëœ pageId | 404 í˜ì´ì§€ í‘œì‹œ | ì˜¬ë°”ë¥¸ URLë¡œ ì´ë™ |
| ì €ì¥ ì‹¤íŒ¨ | ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ | ì½˜ì†” ë¡œê·¸ (MVP) | í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ í›„ ì¬ì‹œë„ |
| JSON íŒŒì‹± ì˜¤ë¥˜ | ì†ìƒëœ content | ë¹ˆ ì—ë””í„°ë¡œ ì‹œì‘ | ìˆ˜ë™ ë³µêµ¬ í•„ìš” |

### 9.2 ì—ëŸ¬ í‘œì‹œ ë°©ì‹

| ì—ëŸ¬ ìœ í˜• | í‘œì‹œ ìœ„ì¹˜ | í‘œì‹œ ë°©ë²• |
|----------|----------|----------|
| í˜ì´ì§€ ì—†ìŒ | ì „ì²´ í™”ë©´ | 404 ì—ëŸ¬ í˜ì´ì§€ |
| ì €ì¥ ì‹¤íŒ¨ | ì½˜ì†” | console.error (MVP) |
| ë¡œë“œ ì‹¤íŒ¨ | ì—ë””í„° ì˜ì—­ | ë¹ˆ ì—ë””í„° + ì½˜ì†” ë¡œê·¸ |

---

## 10. ì—°ê´€ ë¬¸ì„œ

> ìƒì„¸ í…ŒìŠ¤íŠ¸ ëª…ì„¸ ë° ìš”êµ¬ì‚¬í•­ ì¶”ì ì€ ë³„ë„ ë¬¸ì„œì—ì„œ ê´€ë¦¬í•©ë‹ˆë‹¤.

| ë¬¸ì„œ | ê²½ë¡œ | ìš©ë„ |
|------|------|------|
| ìš”êµ¬ì‚¬í•­ ì¶”ì  ë§¤íŠ¸ë¦­ìŠ¤ | `025-traceability-matrix.md` | PRD â†’ ì„¤ê³„ â†’ í…ŒìŠ¤íŠ¸ ì–‘ë°©í–¥ ì¶”ì  |
| í…ŒìŠ¤íŠ¸ ëª…ì„¸ì„œ | `026-test-specification.md` | ë‹¨ìœ„/E2E/ë§¤ë‰´ì–¼ í…ŒìŠ¤íŠ¸ ìƒì„¸ ì •ì˜ |

---

## 11. êµ¬í˜„ ë²”ìœ„

### 11.1 ì˜í–¥ë°›ëŠ” ì˜ì—­

| ì˜ì—­ | ë³€ê²½ ë‚´ìš© | ì˜í–¥ë„ |
|------|----------|--------|
| src/components/editor/Editor.tsx | onChange ì½œë°± ì¶”ê°€, initialContent ì—°ë™ | ë†’ìŒ |
| src/app/[pageId]/page.tsx | í˜ì´ì§€ ë°ì´í„° fetch, ì—ë””í„°ì— ì „ë‹¬ | ë†’ìŒ |
| src/app/api/pages/[id]/route.ts | PUT API content ì €ì¥ (ê¸°ì¡´ êµ¬í˜„ í™•ì¸) | ì¤‘ê°„ |

### 11.2 ì˜ì¡´ì„±

| ì˜ì¡´ í•­ëª© | ì´ìœ  | ìƒíƒœ |
|----------|------|------|
| TSK-01-01 | BlockNote ì—ë””í„° ê¸°ë³¸ í†µí•© í•„ìš” | ëŒ€ê¸°ì¤‘ |
| TSK-00-04 | SQLite DB ë° pages í…Œì´ë¸” í•„ìš” | ëŒ€ê¸°ì¤‘ |

### 11.3 ì œì•½ ì‚¬í•­

| ì œì•½ | ì„¤ëª… | ëŒ€ì‘ ë°©ì•ˆ |
|------|------|----------|
| ì‹¤ì‹œê°„ ë™ê¸°í™” ì—†ìŒ | MVPì—ì„œ ë‹¨ì¼ ì‚¬ìš©ìë§Œ ê°€ì • | í–¥í›„ Y.js í†µí•© |
| ì˜¤í”„ë¼ì¸ ì €ì¥ ì—†ìŒ | ë„¤íŠ¸ì›Œí¬ í•„ìˆ˜ | í–¥í›„ Service Worker ì¶”ê°€ |

---

## 12. ê¸°ìˆ  ëª…ì„¸

### 12.1 ì—ë””í„° ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •

```typescript
// src/components/editor/Editor.tsx
"use client";

import { useCreateBlockNote } from "@blocknote/react";
import { BlockNoteView } from "@blocknote/mantine";
import "@blocknote/mantine/style.css";
import { useCallback, useState } from "react";

interface EditorProps {
  pageId: string;
  initialContent?: string;
}

export function Editor({ pageId, initialContent }: EditorProps) {
  const [isSaving, setIsSaving] = useState(false);

  const editor = useCreateBlockNote({
    initialContent: initialContent ? JSON.parse(initialContent) : undefined,
  });

  // debounce ì €ì¥ í•¨ìˆ˜
  const saveContent = useCallback(
    debounce(async (content: string) => {
      setIsSaving(true);
      try {
        await fetch(`/api/pages/${pageId}`, {
          method: "PUT",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ content }),
        });
      } catch (error) {
        console.error("Failed to save content:", error);
      } finally {
        setIsSaving(false);
      }
    }, 1000),
    [pageId]
  );

  return (
    <div className="px-[96px] py-4 max-w-[900px] mx-auto">
      {isSaving && (
        <div className="text-sm text-[#787774] mb-2">ì €ì¥ ì¤‘...</div>
      )}
      <BlockNoteView
        editor={editor}
        theme="light"
        onChange={() => {
          const content = JSON.stringify(editor.document);
          saveContent(content);
        }}
      />
    </div>
  );
}

// debounce ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
function debounce<T extends (...args: any[]) => any>(
  fn: T,
  delay: number
): (...args: Parameters<T>) => void {
  let timeoutId: NodeJS.Timeout;
  return (...args: Parameters<T>) => {
    clearTimeout(timeoutId);
    timeoutId = setTimeout(() => fn(...args), delay);
  };
}
```

### 12.2 í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸

```typescript
// src/app/[pageId]/page.tsx
import { getPage } from "@/lib/db";
import { Editor } from "@/components/editor/Editor";
import { PageHeader } from "@/components/editor/PageHeader";
import { notFound } from "next/navigation";

export default async function PageView({
  params,
}: {
  params: { pageId: string };
}) {
  const page = getPage(params.pageId);

  if (!page) {
    notFound();
  }

  return (
    <div className="flex-1 overflow-auto">
      <PageHeader
        icon={page.icon}
        coverUrl={page.cover_url}
        title={page.title}
        pageId={page.id}
      />
      <Editor
        pageId={page.id}
        initialContent={page.content || undefined}
      />
    </div>
  );
}
```

### 12.3 API ì—”ë“œí¬ì¸íŠ¸ (ê¸°ì¡´ í™•ì¸)

```typescript
// src/app/api/pages/[id]/route.ts
// PUT ë©”ì„œë“œì—ì„œ content í•„ë“œ ì €ì¥ í™•ì¸ í•„ìš”

export async function PUT(
  request: Request,
  { params }: { params: { id: string } }
) {
  const data = await request.json();
  // data.contentê°€ í¬í•¨ë˜ë©´ DBì— ì €ì¥ë¨
  const page = updatePage(params.id, data);
  if (!page) {
    return NextResponse.json({ error: 'Not found' }, { status: 404 });
  }
  return NextResponse.json(page);
}
```

---

## 13. ì²´í¬ë¦¬ìŠ¤íŠ¸

### 13.1 ì„¤ê³„ ì™„ë£Œ í™•ì¸

- [x] ë¬¸ì œ ì •ì˜ ë° ëª©ì  ëª…í™•í™”
- [x] ì‚¬ìš©ì ë¶„ì„ ì™„ë£Œ
- [x] ìœ ì¦ˆì¼€ì´ìŠ¤ ì •ì˜ ì™„ë£Œ
- [x] ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ ì‘ì„± ì™„ë£Œ
- [x] í™”ë©´ ì„¤ê³„ ì™„ë£Œ (ì™€ì´ì–´í”„ë ˆì„)
- [x] ì¸í„°ë™ì…˜ ì„¤ê³„ ì™„ë£Œ
- [x] ë°ì´í„° ìš”êµ¬ì‚¬í•­ ì •ì˜ ì™„ë£Œ
- [x] ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ì •ì˜ ì™„ë£Œ
- [x] ì—ëŸ¬ ì²˜ë¦¬ ì •ì˜ ì™„ë£Œ
- [x] ê¸°ìˆ  ëª…ì„¸ ì‘ì„± ì™„ë£Œ

### 13.2 ì—°ê´€ ë¬¸ì„œ ì‘ì„±

- [ ] ìš”êµ¬ì‚¬í•­ ì¶”ì  ë§¤íŠ¸ë¦­ìŠ¤ ì‘ì„± (â†’ `025-traceability-matrix.md`)
- [ ] í…ŒìŠ¤íŠ¸ ëª…ì„¸ì„œ ì‘ì„± (â†’ `026-test-specification.md`)

### 13.3 êµ¬í˜„ ì¤€ë¹„

- [x] êµ¬í˜„ ìš°ì„ ìˆœìœ„ ê²°ì • (TSK-01-01 ì™„ë£Œ í›„)
- [x] ì˜ì¡´ì„± í™•ì¸ ì™„ë£Œ
- [x] ì œì•½ ì‚¬í•­ ê²€í†  ì™„ë£Œ

---

## ë³€ê²½ ì´ë ¥

| ë²„ì „ | ì¼ì | ì‘ì„±ì | ë³€ê²½ ë‚´ìš© |
|------|------|--------|----------|
| 1.0 | 2026-01-02 | Claude | ìµœì´ˆ ì‘ì„± |
