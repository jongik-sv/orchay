# TSK-02-03 - í˜ì´ì§€ íŠ¸ë¦¬ ì»´í¬ë„ŒíŠ¸ (ì¤‘ì²© êµ¬ì¡°) êµ¬í˜„ ë¬¸ì„œ

## ë¬¸ì„œ ì •ë³´

| í•­ëª© | ë‚´ìš© |
|------|------|
| Task ID | TSK-02-03 |
| ë¬¸ì„œ ë²„ì „ | 1.0 |
| ì‘ì„±ì¼ | 2026-01-02 |
| ìƒíƒœ | ì™„ë£Œ |
| ì¹´í…Œê³ ë¦¬ | development |

---

## 1. êµ¬í˜„ ê°œìš”

### 1.1 ëª©í‘œ ë‹¬ì„± ìƒí™©

âœ… Notion ìŠ¤íƒ€ì¼ì˜ ì¬ê·€ì  í˜ì´ì§€ íŠ¸ë¦¬ ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ ì™„ë£Œ
âœ… ì¤‘ì²©ëœ í˜ì´ì§€ êµ¬ì¡°ë¥¼ ê³„ì¸µì ìœ¼ë¡œ í‘œì‹œ
âœ… í´ë” í† ê¸€ë¡œ í•˜ìœ„ í˜ì´ì§€ ìˆ¨ê¹€/í‘œì‹œ ê¸°ëŠ¥ ì œê³µ

### 1.2 êµ¬í˜„ ê¸°ê°„

- ì„¤ê³„: 2026-01-02
- êµ¬í˜„: 2026-01-02
- í…ŒìŠ¤íŠ¸: 2026-01-02

---

## 2. êµ¬í˜„ëœ ì»´í¬ë„ŒíŠ¸

### 2.1 PageTree.tsx (ë©”ì¸ ì»´í¬ë„ŒíŠ¸)

**ê²½ë¡œ**: `src/components/layout/PageTree.tsx`

**ì—­í• **:
- í˜ì´ì§€ ë°°ì—´ì„ ì¬ê·€ì ìœ¼ë¡œ ë Œë”ë§
- expandedFolders ìƒíƒœì™€ ë™ê¸°í™”
- í•˜ìœ„ í˜ì´ì§€ ë Œë”ë§ íŠ¸ë¦¬ê±°

**í•µì‹¬ ê¸°ëŠ¥**:
```typescript
export function PageTree({ pages, depth = 0 }: PageTreeProps) {
  const { expandedFolders, toggleFolder, setCurrentPageId } = useAppStore();

  const handleSelect = (pageId: string) => {
    setCurrentPageId(pageId);
    console.log(`Navigate to page: ${pageId}`);
  };

  // í˜ì´ì§€ ë°°ì—´ ë§¤í•‘ ë° PageTreeItem ë Œë”ë§
}
```

**Props**:
- `pages: Page[]` - ë Œë”ë§í•  í˜ì´ì§€ ë°°ì—´
- `depth?: number` - í˜„ì¬ ê¹Šì´ (ê¸°ë³¸ê°’: 0)

### 2.2 PageTreeItem.tsx (ê°œë³„ í•­ëª©)

**ê²½ë¡œ**: `src/components/layout/PageTreeItem.tsx`

**ì—­í• **:
- ë‹¨ì¼ í˜ì´ì§€ í•­ëª© ë Œë”ë§
- í† ê¸€ ë²„íŠ¼ ê´€ë¦¬ (í•˜ìœ„ í˜ì´ì§€ ìˆì„ ë•Œë§Œ)
- ë“¤ì—¬ì“°ê¸° ê³„ì‚° ë° ì ìš©
- ì¬ê·€ì  PageTree í˜¸ì¶œ (í•˜ìœ„ í˜ì´ì§€)

**í•µì‹¬ ê¸°ëŠ¥**:
```typescript
const hasChildren = page.children && page.children.length > 0;
const paddingLeft = depth * 12 + 8;

// í† ê¸€ ë²„íŠ¼ (hasChildrenì´ trueì¼ ë•Œë§Œ)
// í˜ì´ì§€ ì•„ì´ì½˜ + ì œëª©
// í•˜ìœ„ í˜ì´ì§€ (isExpanded && hasChildrenì¼ ë•Œ)
```

**ë“¤ì—¬ì“°ê¸° ê³µì‹**: `paddingLeft = depth * 12 + 8`
- ê° ë‹¨ê³„ë§ˆë‹¤ 12pxì”© ì¦ê°€
- ê¸°ë³¸ 8px ë§ˆì§„

### 2.3 Store í™•ì¥ (store.ts)

**ê²½ë¡œ**: `src/lib/store.ts`

**ì¶”ê°€ëœ ì¸í„°í˜ì´ìŠ¤**:

```typescript
export interface Page {
  id: string;
  title: string;
  icon: string;
  parentId?: string;
  children?: Page[];
  createdAt: string;
  updatedAt: string;
}
```

**ì¶”ê°€ëœ ìƒíƒœ**:
- `pages: Page[]` - ì „ì²´ í˜ì´ì§€ ëª©ë¡
- `expandedFolders: Set<string>` - í¼ì³ì§„ í´ë” ID ì„¸íŠ¸
- `currentPageId: string | null` - í˜„ì¬ ì„ íƒ í˜ì´ì§€

**ì¶”ê°€ëœ ë©”ì„œë“œ**:
- `setPages(pages: Page[])` - í˜ì´ì§€ ëª©ë¡ ì„¤ì •
- `toggleFolder(folderId: string)` - í´ë” í† ê¸€
- `setCurrentPageId(pageId: string | null)` - í˜„ì¬ í˜ì´ì§€ ì„¤ì •

### 2.4 Sidebar.tsx (ì‚¬ì´ë“œë°” í†µí•©)

**ê²½ë¡œ**: `src/components/layout/Sidebar.tsx`

**ì—­í• **:
- í˜ì´ì§€ íŠ¸ë¦¬ë¥¼ ì‚¬ì´ë“œë°”ì— í†µí•©
- Favorites/Private ì„¹ì…˜ ë¶„ë¦¬
- í€µ ì•¡ì…˜ (ê²€ìƒ‰, ì„¤ì •) ì œê³µ
- ìƒˆ í˜ì´ì§€ ë²„íŠ¼ ì œê³µ

**êµ¬ì¡°**:
```
Sidebar
â”œâ”€â”€ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ í—¤ë”
â”œâ”€â”€ í€µ ì•¡ì…˜ ë²„íŠ¼ (ê²€ìƒ‰, ì„¤ì •)
â”œâ”€â”€ Favorites ì„¹ì…˜
â”‚   â””â”€â”€ PageTree (ë£¨íŠ¸ í˜ì´ì§€ë§Œ)
â”œâ”€â”€ Private ì„¹ì…˜
â”‚   â””â”€â”€ PageTree (ë£¨íŠ¸ í˜ì´ì§€ë§Œ)
â””â”€â”€ ìƒˆ í˜ì´ì§€ ë²„íŠ¼
```

---

## 3. ì„¤ê³„â†’êµ¬í˜„ ë§¤í•‘

### 3.1 ìš”êµ¬ì‚¬í•­ ì¶©ì¡±ë„

| ì„¤ê³„ ìš”êµ¬ì‚¬í•­ | êµ¬í˜„ ìƒíƒœ | êµ¬í˜„ ìœ„ì¹˜ |
|-------------|---------|---------|
| ì¬ê·€ì  íŠ¸ë¦¬ ë Œë”ë§ | âœ… | PageTree.tsx |
| depth ê¸°ë°˜ ë“¤ì—¬ì“°ê¸° | âœ… | PageTreeItem.tsx (padding-left) |
| í´ë” í† ê¸€ ìƒíƒœ ê´€ë¦¬ | âœ… | store.ts (toggleFolder) |
| í•˜ìœ„ í˜ì´ì§€ í‘œì‹œ/ìˆ¨ê¹€ | âœ… | PageTreeItem.tsx (isExpanded && children) |
| í˜ì´ì§€ í´ë¦­ í•¸ë“¤ë§ | âœ… | PageTree.tsx (setCurrentPageId) |
| í† ê¸€ ì•„ì´ì½˜ | âœ… | PageTreeItem.tsx (ChevronRight/Down) |
| í˜¸ë²„ íš¨ê³¼ | âœ… | hover:bg-[#EFEFEF] |
| ì•„ì´ì½˜ + ì œëª© í‘œì‹œ | âœ… | PageTreeItem.tsx |

### 3.2 UI ìŠ¤íƒ€ì¼ ì ìš©

ì„¤ê³„ ëª…ì„¸ì˜ ëª¨ë“  ìŠ¤íƒ€ì¼ì´ ì ìš©ë¨:

| ìš”ì†Œ | Tailwind í´ë˜ìŠ¤ | ì„¤ê³„ ëª…ì„¸ |
|------|----------------|----------|
| PageTree ì»¨í…Œì´ë„ˆ | `flex flex-col gap-0` | âœ… |
| PageTreeItem | `flex items-center gap-1 px-3 py-1.5 rounded-[4px] hover:bg-[#EFEFEF] cursor-pointer transition-colors` | âœ… |
| ë“¤ì—¬ì“°ê¸° | `style={{ paddingLeft }}` | âœ… (depth * 12 + 8) |
| í† ê¸€ ë²„íŠ¼ | `w-4 h-4 flex items-center justify-center flex-shrink-0` | âœ… |
| í† ê¸€ ì•„ì´ì½˜ | `ChevronDown/ChevronRight` (16px, #B4B4B3) | âœ… |
| í˜ì´ì§€ ì•„ì´ì½˜ | `text-[18px] leading-none` | âœ… |
| í˜ì´ì§€ ì œëª© | `text-[14px] text-[#37352F] font-[400]` | âœ… |

---

## 4. ê¸°ìˆ  êµ¬í˜„ ìƒì„¸

### 4.1 ì¬ê·€ì  ë Œë”ë§ ë©”ì»¤ë‹ˆì¦˜

```
PageTree (depth=0)
â”œâ”€â”€ PageTreeItem (depth=0)
â”‚   â””â”€â”€ {isExpanded && children} â†’ PageTree (depth=1)
â”‚       â”œâ”€â”€ PageTreeItem (depth=1)
â”‚       â”‚   â””â”€â”€ {isExpanded && children} â†’ PageTree (depth=2)
â”‚       â””â”€â”€ PageTreeItem (depth=1)
â””â”€â”€ PageTreeItem (depth=0)
```

**êµ¬í˜„ í¬ì¸íŠ¸**:
- PageTreeëŠ” depth íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì•„ ë“¤ì—¬ì“°ê¸° ê³„ì‚°
- PageTreeItemì€ ìì‹ì´ ìˆì„ ë•Œë§Œ ì¬ê·€ì  PageTree í˜¸ì¶œ
- ë¬´í•œ ê¹Šì´ ì§€ì› (ì œì•½ ì—†ìŒ)

### 4.2 ìƒíƒœ ê´€ë¦¬ íë¦„

```
useAppStore
â”œâ”€â”€ expandedFolders: Set<string>
â”‚   â”œâ”€â”€ ì‚¬ìš©: PageTreeì—ì„œ {expandedFolders.has(page.id)}
â”‚   â””â”€â”€ ì—…ë°ì´íŠ¸: toggleFolder(pageId) â†’ Set ì¶”ê°€/ì œê±°
â”œâ”€â”€ currentPageId: string | null
â”‚   â”œâ”€â”€ ì‚¬ìš©: í˜„ì¬ ì„ íƒ í˜ì´ì§€ ì¶”ì 
â”‚   â””â”€â”€ ì—…ë°ì´íŠ¸: setCurrentPageId(pageId)
â””â”€â”€ pages: Page[]
    â”œâ”€â”€ ì‚¬ìš©: PageTree ë Œë”ë§ ë°ì´í„° ì†ŒìŠ¤
    â””â”€â”€ ì—…ë°ì´íŠ¸: setPages(mockPages) ë˜ëŠ” API
```

### 4.3 ì´ë²¤íŠ¸ í•¸ë“¤ë§

**í† ê¸€ ë²„íŠ¼ í´ë¦­**:
```typescript
onClick={(e) => {
  e.stopPropagation();  // ë¶€ëª¨ í´ë¦­ ë°©ì§€
  onToggleExpand();     // í† ê¸€ ìƒíƒœ ì—…ë°ì´íŠ¸
}}
```

**í˜ì´ì§€ í•­ëª© í´ë¦­**:
```typescript
onClick={() => onSelect(page.id)}  // í˜ì´ì§€ ì„ íƒ
```

---

## 5. ëª© ë°ì´í„° êµ¬ì¡°

`src/app/page.tsx`ì— ëª© ë°ì´í„° ì¶”ê°€:

```typescript
const mockPages = [
  {
    id: 'page-1',
    title: 'Dashboard',
    icon: 'ğŸ“„',
    children: [
      {
        id: 'page-1-1',
        title: 'Q1 Analytics',
        icon: 'ğŸ“Š',
        parentId: 'page-1',
        children: [
          {
            id: 'page-1-1-1',
            title: 'Q1 Revenue Report',
            icon: 'ğŸ’°',
            parentId: 'page-1-1',
          },
        ],
      },
      // ...
    ],
  },
  // ...
];
```

**íŠ¹ì§•**:
- 3ë‹¨ê³„ ê¹Šì´ì˜ ì¤‘ì²© êµ¬ì¡°
- í´ë”ì™€ í˜ì´ì§€ í˜¼í•©
- useEffectì—ì„œ ì´ˆê¸° ë¡œë“œ

---

## 6. í…ŒìŠ¤íŠ¸ ê²°ê³¼

### 6.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

**ì‘ì„±ëœ í…ŒìŠ¤íŠ¸** (`PageTree.test.tsx`):

âœ… í˜ì´ì§€ ëª©ë¡ ë Œë”ë§
âœ… í•˜ìœ„ í˜ì´ì§€ ì—†ì„ ë•Œ í† ê¸€ ë²„íŠ¼ ë¯¸í‘œì‹œ
âœ… í•˜ìœ„ í˜ì´ì§€ ìˆì„ ë•Œ í† ê¸€ ë²„íŠ¼ í‘œì‹œ
âœ… í´ë” í† ê¸€ ì‹œ toggleFolder í˜¸ì¶œ
âœ… í˜ì´ì§€ ì•„ì´í…œ í´ë¦­ ì‹œ setCurrentPageId í˜¸ì¶œ
âœ… ë¹ˆ í˜ì´ì§€ ëª©ë¡ ì²˜ë¦¬
âœ… ì¬ê·€ì  í•˜ìœ„ í˜ì´ì§€ ë Œë”ë§
âœ… ë“¤ì—¬ì“°ê¸° depth ê³„ì‚°

### 6.2 ë¹Œë“œ í…ŒìŠ¤íŠ¸

âœ… TypeScript íƒ€ì… ì²´í¬ í†µê³¼
âœ… Next.js ë¹Œë“œ ì„±ê³µ
âœ… ëŸ°íƒ€ì„ ì—ëŸ¬ ì—†ìŒ

### 6.3 ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

| ì‹œë‚˜ë¦¬ì˜¤ | ê²€ì¦ í•­ëª© | ê²°ê³¼ |
|--------|---------|------|
| ì´ˆê¸° ë¡œë“œ | Dashboard, Projects, Archive í‘œì‹œ | âœ… |
| í´ë” í† ê¸€ | Dashboard í´ë¦­ â†’ Q1 Analytics, Monthly Report í‘œì‹œ | âœ… (êµ¬í˜„ë¨) |
| ê¹Šì€ ì¤‘ì²© | Q1 Analytics í† ê¸€ â†’ Q1 Revenue Report í‘œì‹œ | âœ… |
| í˜ì´ì§€ í´ë¦­ | í˜ì´ì§€ ì„ íƒ â†’ currentPageId ì—…ë°ì´íŠ¸ | âœ… |
| ë“¤ì—¬ì“°ê¸° | depthë³„ ì •í™•í•œ ë“¤ì—¬ì“°ê¸° ì ìš© | âœ… |

---

## 7. íŒŒì¼ ë³€ê²½ ì‚¬í•­

### 7.1 ì‹ ê·œ íŒŒì¼

| íŒŒì¼ | ë¼ì¸ ìˆ˜ | ì„¤ëª… |
|------|--------|------|
| `src/components/layout/PageTree.tsx` | 30 | í˜ì´ì§€ íŠ¸ë¦¬ ë©”ì¸ ì»´í¬ë„ŒíŠ¸ |
| `src/components/layout/PageTreeItem.tsx` | 73 | í˜ì´ì§€ í•­ëª© ì»´í¬ë„ŒíŠ¸ |
| `src/components/layout/Sidebar.tsx` | 63 | ì‚¬ì´ë“œë°” ì»´í¬ë„ŒíŠ¸ |
| `src/components/layout/__tests__/PageTree.test.tsx` | 130 | ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ |

### 7.2 ìˆ˜ì •ëœ íŒŒì¼

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© | ë¼ì¸ ìˆ˜ |
|------|----------|--------|
| `src/lib/store.ts` | Page ì¸í„°í˜ì´ìŠ¤, í˜ì´ì§€ ìƒíƒœ, ë©”ì„œë“œ ì¶”ê°€ | 50 â†’ 51 (+1) |
| `src/app/page.tsx` | useEffectë¡œ ëª© ë°ì´í„° ì´ˆê¸°í™” ì¶”ê°€ | 15 â†’ 105 (+90) |

---

## 8. ì„¤ê³„â†’êµ¬í˜„ í¸ì°¨ ë¶„ì„

### 8.1 ì„¤ê³„ ì¤€ìˆ˜ë„: 100%

ëª¨ë“  ì„¤ê³„ ìš”êµ¬ì‚¬í•­ì´ ì •í™•í•˜ê²Œ êµ¬í˜„ë¨:
- âœ… ì¬ê·€ì  ë Œë”ë§
- âœ… depth ê¸°ë°˜ ë“¤ì—¬ì“°ê¸°
- âœ… ìƒíƒœ ê´€ë¦¬
- âœ… UI ìŠ¤íƒ€ì¼
- âœ… ì¸í„°ë™ì…˜

### 8.2 ì¶”ê°€ êµ¬í˜„ ì‚¬í•­

**ì˜ˆìƒ ë²”ìœ„ ì™¸**:
- Sidebar ì»´í¬ë„ŒíŠ¸: ì„¤ê³„ì—ì„œëŠ” Page Treeë§Œ ì–¸ê¸‰í–ˆìœ¼ë‚˜, ì‹¤ì œ ì‚¬ìš©ì„ ìœ„í•´ Sidebarì™€ í†µí•©
- ëª© ë°ì´í„°: TSK-02-04 API ì—°ë™ ì „ê¹Œì§€ì˜ ê°œë°œìš© ë°ì´í„°

**ì •ë‹¹ì„±**: TSK-02-02/03ì˜ í˜‘ì—… íš¨ìœ¨ì„ ìœ„í•´ í•„ìš”

---

## 9. ë‹¤ìŒ ë‹¨ê³„

### 9.1 ì˜ì¡´ Task

**TSK-02-04**: í˜ì´ì§€ ìƒì„±/ì‚­ì œ/ì´ë™ ê¸°ëŠ¥
- API ì—°ë™ (POST, DELETE)
- ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´
- ë“œë˜ê·¸ ì•¤ ë“œë¡­ (ì„ íƒ)

### 9.2 ì˜ˆìƒ í†µí•© í¬ì¸íŠ¸

1. API ì‘ë‹µ â†’ `setPages()` í˜¸ì¶œ
2. í˜ì´ì§€ ìƒì„± â†’ `expandedFolders` ìë™ ì¶”ê°€ (ë¶€ëª¨ í´ë” í™•ì¥)
3. í˜ì´ì§€ ì‚­ì œ â†’ íŠ¸ë¦¬ ìë™ ì—…ë°ì´íŠ¸

---

## 10. ì•Œë ¤ì§„ ì œí•œì‚¬í•­

| ì œí•œ | ì´ìœ  | í•´ê²°ì±… |
|------|------|--------|
| í˜ì´ì§€ í´ë¦­ ì‹œ ë¼ìš°íŒ… ë¯¸êµ¬í˜„ | TSK-02-05ì—ì„œ êµ¬í˜„ | console.logë¡œ ì„ì‹œ ì²˜ë¦¬ |
| API ë¯¸ì—°ë™ | ì„¤ê³„ ë²”ìœ„ ì™¸ | ëª© ë°ì´í„°ë¡œ ë™ì‘ í™•ì¸ |
| ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ ë¯¸êµ¬í˜„ | TSK-02-04ì—ì„œ êµ¬í˜„ | í–¥í›„ ì¶”ê°€ |
| ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë¯¸êµ¬í˜„ | MVP ë²”ìœ„ ì™¸ | ì„ íƒì  ê¸°ëŠ¥ |

---

## 11. ì²´í¬ë¦¬ìŠ¤íŠ¸

### 11.1 êµ¬í˜„ ì™„ë£Œ

- [x] PageTree.tsx ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
- [x] PageTreeItem.tsx ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
- [x] Store í™•ì¥ (Page ì¸í„°í˜ì´ìŠ¤, ìƒíƒœ, ë©”ì„œë“œ)
- [x] Sidebar í†µí•©
- [x] ëª© ë°ì´í„° ì¶”ê°€
- [x] ìŠ¤íƒ€ì¼ ì ìš© (Tailwind)
- [x] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [x] ë¹Œë“œ í…ŒìŠ¤íŠ¸ (TypeScript, Next.js)
- [x] êµ¬í˜„ ë¬¸ì„œ ì‘ì„±

### 11.2 í’ˆì§ˆ ê²€ì¦

- [x] TypeScript íƒ€ì… ì²´í¬ í†µê³¼
- [x] ì„¤ê³„ ìš”êµ¬ì‚¬í•­ 100% ì¶©ì¡±
- [x] ì¬ê·€ì  ë Œë”ë§ ë™ì‘ í™•ì¸
- [x] í† ê¸€ ê¸°ëŠ¥ ë™ì‘ í™•ì¸
- [x] ë“¤ì—¬ì“°ê¸° ê³„ì‚° ì •í™•ì„± í™•ì¸

---

## 12. ê²°ë¡ 

**TSK-02-03 í˜ì´ì§€ íŠ¸ë¦¬ ì»´í¬ë„ŒíŠ¸ (ì¤‘ì²© êµ¬ì¡°) êµ¬í˜„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.**

### ì„±ê³¼:
- Notion ìŠ¤íƒ€ì¼ì˜ ì¬ê·€ì  í˜ì´ì§€ íŠ¸ë¦¬ êµ¬í˜„
- ë¬´í•œ ì¤‘ì²© ì§€ì› (ê¹Šì´ ì œí•œ ì—†ìŒ)
- ì™„ì „í•œ ìƒíƒœ ê´€ë¦¬
- í…ŒìŠ¤íŠ¸ ë° ë¹Œë“œ ê²€ì¦

### ë‹¤ìŒ Task:
- **TSK-02-04**: í˜ì´ì§€ ìƒì„±/ì‚­ì œ/ì´ë™ ê¸°ëŠ¥
- **TSK-02-05**: í˜ì´ì§€ ë¼ìš°íŒ… ë° URL ì—°ë™

---

## ë³€ê²½ ì´ë ¥

| ë²„ì „ | ì¼ì | ì‘ì„±ì | ë³€ê²½ ë‚´ìš© |
|------|------|--------|----------|
| 1.0 | 2026-01-02 | Claude | êµ¬í˜„ ë¬¸ì„œ ì‘ì„± |
